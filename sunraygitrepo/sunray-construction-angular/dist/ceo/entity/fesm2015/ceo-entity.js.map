{"version":3,"file":"ceo-entity.js.map","sources":["ng://@ceo/entity/lib/entity/classes/entity/entity.actions.ts","ng://@ceo/entity/lib/entity/classes/entity/entity.action-classes.ts","ng://@ceo/entity/lib/entity/util/builders/selectors/build-scope-selectors.ts","ng://@ceo/entity/lib/entity/util/builders/selectors/build-entity-type-selectors.ts","ng://@ceo/entity/lib/entity/classes/entity/reducer/action-type.ts","ng://@ceo/entity/lib/entity/classes/entity/reducer/functions/add-many.ts","ng://@ceo/entity/lib/entity/classes/entity/reducer/functions/add-one.ts","ng://@ceo/entity/lib/entity/classes/entity/reducer/functions/remove-many.ts","ng://@ceo/entity/lib/entity/classes/entity/reducer/functions/remove-one.ts","ng://@ceo/entity/lib/entity/classes/entity/reducer/functions/set-scope-ids.ts","ng://@ceo/entity/lib/entity/classes/entity/reducer/functions/update-many.ts","ng://@ceo/entity/lib/entity/classes/entity/reducer/functions/update-one.ts","ng://@ceo/entity/lib/entity/classes/entity/reducer/reducer.ts","ng://@ceo/entity/lib/entity/classes/entity/entity.collection.ts","ng://@ceo/entity/lib/entity/classes/entity/entity.adapter.ts","ng://@ceo/entity/lib/entity/classes/entity/entity-adapter.factory.ts","ng://@ceo/entity/lib/entity/classes/entity/entity-type.factory.ts","ng://@ceo/entity/lib/entity/classes/entity/entity.config.ts","ng://@ceo/entity/lib/entity/classes/entity/entity.effects-config.ts","ng://@ceo/entity/lib/entity/classes/entity/entities/json-api.entity.ts","ng://@ceo/entity/lib/entity/classes/entity/entities/resource-association.entity.ts","ng://@ceo/entity/lib/entity/classes/entity/entities/resource-attribute.entity.ts","ng://@ceo/entity/lib/entity/util/builders/entity/build-entity-relationship-properties.ts","ng://@ceo/entity/lib/entity/classes/entity/entities/resource-configuration.entity.ts","ng://@ceo/entity/lib/entity/classes/entity/entities/resource-validator.entity.ts","ng://@ceo/entity/lib/entity/classes/feature/feature.config.ts","ng://@ceo/entity/lib/entity/interfaces/entity/entity.ts","ng://@ceo/entity/lib/entity/interfaces/selectors/selector-types.ts","ng://@ceo/entity/lib/entity/services/entity-cloner.service.ts","ng://@ceo/entity/lib/entity/services/selectors/selector-name.service.ts","ng://@ceo/entity/lib/entity/util/builders/selectors/build-entity-selectors.ts","ng://@ceo/entity/lib/entity/util/builders/selectors/build-slice-selector.ts","ng://@ceo/entity/lib/entity/util/builders/selectors/build-entity-type-slice-selector.ts","ng://@ceo/entity/lib/entity/util/builders/selectors/build-root-selector.ts","ng://@ceo/entity/lib/entity/util/builders/selectors/build-feature-selector.ts","ng://@ceo/entity/lib/entity/util/builders/selectors/build-filter-selector.ts","ng://@ceo/entity/lib/entity/util/builders/selectors/build-find-selector.ts","ng://@ceo/entity/lib/entity/state/feature/selectors.ts","ng://@ceo/entity/lib/entity/services/selectors/selector.service.ts","ng://@ceo/entity/lib/entity/services/selectors/selector-provider.service.ts","ng://@ceo/entity/lib/entity/services/selectors/index.ts","ng://@ceo/entity/lib/entity/services/entity-relationship-provider.service.ts","ng://@ceo/entity/lib/entity/services/entity-type-provider.service.ts","ng://@ceo/entity/lib/entity/services/entity-factory.service.ts","ng://@ceo/entity/lib/entity/services/data.service.ts","ng://@ceo/entity/lib/entity/services/attribute-builders/attribute-builder.service.ts","ng://@ceo/entity/lib/entity/services/attribute-builders/json-api-attribute-builder.service.ts","ng://@ceo/entity/lib/entity/services/attribute-builders/index.ts","ng://@ceo/entity/lib/entity/services/entity.service.ts","ng://@ceo/entity/lib/entity/state/config/actions.ts","ng://@ceo/entity/lib/entity/state/config/effects.ts","ng://@ceo/entity/lib/entity/state/config/initial-state.ts","ng://@ceo/entity/lib/entity/state/config/reducer.ts","ng://@ceo/entity/lib/entity/state/config/selectors.ts","ng://@ceo/entity/lib/entity/state/feature/actions/action-types.ts","ng://@ceo/entity/lib/entity/state/feature/actions/actions.ts","ng://@ceo/entity/lib/entity/services/route-entity-type-provider.service.ts","ng://@ceo/entity/lib/entity/services/resource-identifier.service.ts","ng://@ceo/entity/lib/entity/state/feature/effects.ts","ng://@ceo/entity/lib/entity/state/feature/initial-state.ts","ng://@ceo/entity/lib/entity/state/feature/reducer.ts","ng://@ceo/entity/lib/entity/state/state.ts","ng://@ceo/entity/lib/entity/util/tokens.ts","ng://@ceo/entity/lib/entity/services/entity.effects.ts","ng://@ceo/entity/lib/entity/services/public_api.ts","ng://@ceo/entity/lib/entity/util/builders/entity/build-entity-effects.ts","ng://@ceo/entity/lib/entity/util/builders/entity/build-entity-configs.ts","ng://@ceo/entity/lib/entity/util/builders/entity/build-entity-initial-state.ts","ng://@ceo/entity/lib/entity/util/builders/entity/build-entity-service.ts","ng://@ceo/entity/lib/entity/util/builders/entity/build-entity-type-provider.ts","ng://@ceo/entity/lib/entity/util/builders/entity/build-entity-types.ts","ng://@ceo/entity/lib/entity/util/builders/feature/build-feature-config.ts","ng://@ceo/entity/lib/entity/util/builders/feature/build-initial-state.ts","ng://@ceo/entity/lib/entity/util/builders/feature/build-reducer.ts","ng://@ceo/entity/lib/entity/util/providers.ts","ng://@ceo/entity/lib/entity/entity.module.ts","ng://@ceo/entity/lib/forms/classes/entity-form-manager.ts","ng://@ceo/entity/lib/forms/entities/form.entity.ts","ng://@ceo/entity/lib/forms/entities/form-field.entity.ts","ng://@ceo/entity/lib/forms/services/resource-configurations/forms/data-factories/dropdown-options-factory.service.ts","ng://@ceo/entity/lib/forms/services/resource-configurations/forms/data-factories/resource-list.ts","ng://@ceo/entity/lib/forms/services/resource-configurations/forms/data-factories/dropdown-factory.service.ts","ng://@ceo/entity/lib/forms/services/resource-configurations/forms/data-factories/form-control-data-factory.service.ts","ng://@ceo/entity/lib/forms/services/resource-configurations/forms/data-factories/form-control-validator-factory.service.ts","ng://@ceo/entity/lib/forms/services/resource-configurations/forms/data-factories/form-group-data-factory.service.ts","ng://@ceo/entity/lib/forms/services/resource-configurations/forms/data-factories/form-item-data-factory.service.ts","ng://@ceo/entity/lib/forms/services/resource-configurations/forms/relationships/data-factory-resolver.service.ts","ng://@ceo/entity/lib/forms/services/resource-configurations/forms/relationships/data-factory.service.ts","ng://@ceo/entity/lib/forms/services/resource-configurations/forms/relationships/relationship-provider.service.ts","ng://@ceo/entity/lib/forms/services/resource-configurations/forms/relationships/relationships-provider.service.ts","ng://@ceo/entity/lib/forms/services/resource-configurations/forms/form-fields/form-member-factory-params.service.ts","ng://@ceo/entity/lib/forms/services/resource-configurations/forms/form-factory.service.ts","ng://@ceo/entity/lib/forms/services/entity-form-factory.service.ts","ng://@ceo/entity/lib/forms/services/entity-form-manager-factory.service.ts","ng://@ceo/entity/lib/forms/services/resource-configurations/forms/data-factories/services.ts","ng://@ceo/entity/lib/forms/services/resource-configurations/forms/form-fields/services.ts","ng://@ceo/entity/lib/forms/services/resource-configurations/forms/relationships/services.ts","ng://@ceo/entity/lib/forms/services/resource-configurations/forms/services.ts","ng://@ceo/entity/lib/forms/services/resource-configurations/services.ts","ng://@ceo/entity/lib/forms/services/services.ts","ng://@ceo/entity/lib/forms/forms.module.ts"],"sourcesContent":["import { sliceActions } from '@ceo/state'\n\nexport const actions = {\n  ...sliceActions,\n  ADD: 'ADD',\n  ADD_OPTIMISTICALLY: 'ADD_OPTIMISTICALLY',\n  ADD_SUCCESS: 'ADD_SUCCESS',\n  ADD_TEMP: 'ADD_TEMP', // Use for adding to a blank to the store so users can fill in before submitting to server\n  ADD_UPDATE_FAIL: 'ADD_UPDATE_FAIL',\n  UPDATE_SUCCESS: 'UPDATE_SUCCESS',\n  DELETE: 'DELETE',\n  DELETE_FAIL: 'DELETE_FAIL',\n  DELETE_SUCCESS: 'DELETE_SUCCESS',\n  DELETE_TEMP: 'DELETE_TEMP',\n  ASYNC: 'ASYNC',\n  ASYNC_FAIL: 'ASYNC_FAIL',\n  ASYNC_SUCCESS: 'ASYNC_SUCCESS',\n  ASYNC_DATA_READY: 'ASYNC_DATA_READY',\n  PATCH: 'PATCH',\n  PATCH_EACH: 'PATCH_EACH',\n  PATCH_FAIL: 'PATCH_FAIL',\n  PATCH_SUCCESS: 'PATCH_SUCCESS',\n  RESTORE_TEMP: 'RESTORE_TEMP',\n  SELECT: 'SELECT',\n  SELECT_NEXT: 'SELECT_NEXT',\n  UNLOAD: 'UNLOAD',\n  ADD_STORE_ENTITIES: \"ADD_STORE_ENTITIES\",\n  SET_SELECTED: \"SET_SELECTED\",\n  LOAD_SEED_DATA: 'LOAD_SEED_DATA',\n  SET_PRIMARY_ENTITY: 'SET_PRIMARY_ENTITY',\n  SET_SCOPE_ENTITIES: 'SET_SCOPE_ENTITIES',\n};\n","import { Action } from '@ngrx/store'\n\nimport {\n  PayloadAction,\n  SliceAction,\n  typeFor,\n} from '@ceo/state'\n\nimport {\n  iApiResponse,\n  iEntity,\n} from '../../interfaces/index'\n\nimport { actions } from './entity.actions'\n\nexport const TEMP = 'TEMP_ID_VALUE'\n\nexport class EntityAction<T extends iEntity>\n  extends SliceAction implements PayloadAction {\n\n  constructor(public slice: any, public payload: T) {\n    super(slice, payload)\n  }\n}\n\nexport class Init<T extends iEntity>\n  extends SliceAction implements PayloadAction {\n\n  protected actionName: string = actions.INIT\n}\n\n// Action to add a new entity on the server.\nexport class Add<T extends iEntity> extends EntityAction<T> {\n  protected actionName: string = actions.ADD\n\n  constructor(public slice: any, public payload: any = {}) {\n    super(slice, Object.assign({}, { dirty: true }, payload))\n  }\n\n  // If the payload contains the temp ID value, that means\n  // we want the server to assign and ID value, so drop the ID field\n  payloadForPost() {\n    const newPayload = Object.assign({}, this.payload)\n    if (this.payload.id === TEMP) {\n      delete newPayload.id\n      delete newPayload.dirty\n    }\n\n    return newPayload\n  }\n}\n\n// Action to send array of entities to the store.\nexport class AddStoreEntities<T extends iEntity>\n  extends SliceAction {\n\n  protected actionName: string = actions.ADD_STORE_ENTITIES\n\n  constructor(public slice: string, public payload: T[]) {\n    super(slice, payload)\n  }\n}\n\n// Action to load data from the server\nexport class Load<T extends iEntity>\n  extends SliceAction implements PayloadAction {\n\n  protected actionName: string = actions.LOAD\n\n  constructor(public slice: string, public payload: any = null) {\n    super(slice, payload)\n  }\n}\n\n// Action to capture successful response from the server.\nexport class AsyncSuccess<T extends iEntity>\n  extends SliceAction {\n\n  protected actionName: string = actions.ASYNC_SUCCESS\n\n  constructor(public slice: string, public payload: iApiResponse) {\n    super(slice, payload)\n  }\n}\n\n\nexport class LoadSeedData<T extends iEntity>\n  extends SliceAction implements PayloadAction {\n\n  protected actionName: string = actions.LOAD_SEED_DATA\n\n  constructor(public slice: string, public payload: any = null) {\n    super(slice, payload)\n  }\n}\n\n///////////////////////////////////////\n///////////////////////////////////////\n// Not being used at this time: ///////\n///////////////////////////////////////\n///////////////////////////////////////\n///////////////////////////////////////\n///////////////////////////////////////\n///////////////////////////////////////\n///////////////////////////////////////\n///////////////////////////////////////\n///////////////////////////////////////\n\nexport class Initialized<T extends iEntity>\n  extends SliceAction implements PayloadAction {\n\n  protected actionName: string = actions.INITIALIZED\n}\n\nexport class Patch<T extends iEntity> extends EntityAction<T> {\n  protected actionName: string = actions.PATCH\n}\n\n/**\n * Create a temporary entity to go into the store but not to the server or be\n * validated. If the id of the payload is missing or null\n * then use the TEMP value. Otherwise use the payload.id value\n*/\nexport class AddTemp<T extends iEntity> extends EntityAction<T> {\n  protected actionName: string = actions.ADD_TEMP\n\n  constructor(public slice: any, payload: any = {}) {\n    super(slice, Object.assign({}, payload, (payload.id ? {} : { id: TEMP })))\n  }\n}\n\n/**\n* Use this action to first put in the store and then\n* submit to the server\n*/\nexport class AddOptimistically<T extends iEntity> extends Add<T> {\n  protected actionName: string = actions.ADD_OPTIMISTICALLY\n\n  constructor(public slice: any, payload: any = {}) {\n    super(slice, Object.assign({}, { id: TEMP }, payload))\n  }\n}\n\nexport class AddSuccess<T extends iEntity> extends EntityAction<T> {\n  protected actionName: string = actions.ADD_SUCCESS\n}\n\nexport class AddUpdateFail<T extends iEntity> extends EntityAction<T> {\n  protected actionName: string = actions.ADD_UPDATE_FAIL\n\n  constructor(public slice: any, payload: any = {}) {\n    super(slice, Object.assign({}, payload, (payload.id ? {} : { id: TEMP })))\n  }\n}\n\nexport class Delete<T extends iEntity> extends EntityAction<T> {\n  protected actionName: string = actions.DELETE\n\n  constructor(public slice: string, public payload: any = null) {\n    super(slice, payload)\n  }\n}\n\nexport class DeleteFail<T extends iEntity> extends EntityAction<T> {\n  protected actionName: string = actions.DELETE_FAIL\n}\n\nexport class DeleteSuccess<T extends iEntity> extends EntityAction<T> {\n  protected actionName: string = actions.DELETE_SUCCESS\n}\n\nexport class LoadFail<T extends iEntity> extends EntityAction<T> {\n  protected actionName: string = actions.LOAD_FAIL\n}\n\nexport class Async<T extends iEntity> extends EntityAction<T> {\n  protected actionName: string = actions.ASYNC\n}\n\nexport class AsyncFail<T extends iEntity> extends EntityAction<T> {\n  protected actionName: string = actions.ASYNC_FAIL\n}\n\nexport class AsyncDataReady<T extends iEntity> extends SliceAction {\n  protected actionName: string = actions.ASYNC_DATA_READY\n\n  constructor(public slice: string, public payload: T[]) {\n    super(slice, payload)\n  }\n}\n\n// this makes Effect loadFromRemote$ work\nexport class LoadSuccess<T extends iEntity> extends AsyncSuccess<T> {\n  protected actionName: string = actions.LOAD_SUCCESS\n}\n\nexport class PatchSuccess<T extends iEntity> extends EntityAction<T> {\n  protected actionName: string = actions.PATCH_SUCCESS\n}\n\nexport class PatchFail<T extends iEntity> extends EntityAction<T> {\n  protected actionName: string = actions.PATCH_FAIL\n}\n\nexport class Update<T extends iEntity> extends EntityAction<T> {\n  protected actionName: string = actions.UPDATE\n}\n\nexport class PatchEach<T extends iEntity> extends SliceAction {\n  protected actionName: string = actions.PATCH_EACH\n}\n\nexport class UpdateSuccess<T extends iEntity> extends EntityAction<T> {\n  protected actionName: string = actions.UPDATE_SUCCESS\n}\n\nexport class Select<T extends iEntity> extends EntityAction<T> {\n  protected actionName: string = actions.SELECT\n}\n\nexport class SelectNext<T extends iEntity> extends EntityAction<T> {\n  protected actionName: string = actions.SELECT_NEXT\n\n  constructor(public slice: any) {\n    super(slice, null)\n  }\n}\n\nexport class Unload<T extends iEntity> extends EntityAction<T> {\n  protected actionName: string = actions.UNLOAD\n\n  constructor(public slice: any) {\n    super(slice, null)\n  }\n}\n\nexport class SetSelected<T extends iEntity> extends SliceAction {\n  protected actionName: string = actions.SET_SELECTED\n\n  constructor(public slice: string, public payload: any) {\n    super(slice, payload)\n  }\n}\n\nexport class SetPrimaryEntity<T extends iEntity> extends SliceAction {\n  protected actionName: string = actions.SET_PRIMARY_ENTITY \n  constructor(public slice: string, public payload: any) {\n    super(slice, payload)\n  }\n}\n\nexport class SetScopeEntities<T extends iEntity> extends SliceAction {\n  protected actionName: string = actions.SET_SCOPE_ENTITIES\n  constructor(public slice: string, public payload: any) {\n    super(slice, payload)\n  }\n}\n","import * as _ from 'lodash'\n\nimport {\n  createSelector,\n} from '@ngrx/store'\n\nimport {\n  camelCase,\n} from '@ceo/core'\n\n\nimport {\n  iEntity,\n  iEntityAdapter,\n} from '../../../interfaces/index'\n\nexport const buildScopeSelector = (\n  entityAdapter,\n  selectors,\n  scopeName,\n) => {\n\n  var collectionType = entityAdapter.entityCollectionType\n\n  let selectScopeEntities = (scopes, entities) => {\n    let ids = _.get(scopes, [scopeName, 'ids'], [])\n    let scopeEntities =\n      _.compact(ids.map(function (id) { return entities[id] }))\n    let collection = new collectionType(scopeEntities)\n    return collection\n  }\n\n  let selectorName = `select.scope.${camelCase(scopeName)}`\n  selectors[selectorName] = createSelector(\n    selectors.selectScopes,\n    selectors.selectEntities,\n    selectScopeEntities\n  )\n\n  return selectors\n}\n\n// Get all the Selectors internal to an entity type\nexport const buildScopeSelectors = (entityAdapter, selectors) => {\n  let scopeNames = _.keys(entityAdapter.scopes)\n  let buildSelector =\n    _.partial(buildScopeSelector, entityAdapter)\n\n  return _.reduce(scopeNames, buildSelector, selectors)\n}\n","/*\nngrx selectors\n  selectIds\n  selectEntities\n  selectTotal\n\ncustom selectors \n  selectAll\n  selectSelectedEntity\n  selectScopes\n*/\n\nimport * as _ from 'lodash'\n\nimport {\n  iEntityState,\n  iEntity,\n} from '../../../interfaces/index'\n\nimport {\n  buildScopeSelectors\n} from './build-scope-selectors'\n\nexport const buildEntityTypeSelectors = (\n  entityAdapter,\n) => {\n\n  var collectionType = entityAdapter.entityCollectionType\n\n  var selectors = entityAdapter.ngrxEntityAdapter.getSelectors()\n\n  let defaults = ['selectIds', 'selectEntities', 'selectTotal']\n  let decoratedSelectors = _.pick(selectors, defaults)\n  \n  // Wrap the selectAll selector in order to return an\n  // entity collection object\n  decoratedSelectors.selectAll = (state: any) => {\n    let entities = selectors.selectAll(state) \n    let collection = new collectionType(entities)\n    return collection\n  }\n\n  decoratedSelectors.selectSelectedEntity = (\n    state: iEntityState<iEntity>\n  ): iEntity => {\n\n    return state.entities[state.selectedEntityId]\n  }\n\n  decoratedSelectors.selectScopes = (state) => { return state.scopes }\n\n  buildScopeSelectors(entityAdapter, decoratedSelectors)\n\n  return decoratedSelectors\n\n}\n","import * as _ from 'lodash'\n\nimport { typeFor }      from '@ceo/state'\n\n// get theType\nexport function actionType(featureName, sliceName, actionName) {\n  let fullSliceName = _.join([featureName, sliceName], \".\")\n  return typeFor(fullSliceName, actionName)\n}\n","export function addMany(\n  entities: any,\n  adapter: any,\n  state: any\n) {\n  return adapter.addMany(entities, state)\n}\n","import * as _ from 'lodash'\n\n// addOne\nexport function addOne(\n  entity: any,\n  adapter: any,\n  state: any\n) {\n\n  // Remove the entity if already existing\n  let entityId = entity.id\n  let newEntities = _.omit(state.entities, entityId)\n  let newIds = _.without(state.ids, entityId)\n  state = _.extend(state, {ids: newIds, entities: newEntities})\n\n  return adapter.addOne(entity, state)\n}\n","import * as _ from 'lodash'\n\nimport { EntityAction } from '../../entity.action-classes'\n\nexport function removeMany(\n  action: EntityAction<any>,\n  adapter: any,\n  state: any\n) {\n\n  let payloadIds = _.map(\n    _.flatten([action.payload]),\n    'id'\n  )\n  return adapter.removeMany(payloadIds, state)\n}\n","import { EntityAction } from '../../entity.action-classes'\n\n// removeOne\nexport function removeOne(\n  action: EntityAction<any>,\n  adapter: any,\n  state: any\n) {\n  return adapter.removeOne(action.payload.id, state)\n}\n","import * as _ from 'lodash'\n\nimport { EntityAction } from '../../entity.action-classes'\n\nexport function setScopeIds(\n  action: EntityAction<any>,\n  adapter: any,\n  state: any\n) {\n\n  let entities = action.payload.entities\n  let scopeName = action.payload.scope\n\n\n  let ids = _.map(entities, 'id')\n\n  let stateDelta = {\n    scopes: {\n    }\n  }\n  stateDelta.scopes[scopeName] = {\n    ids: ids\n  }\n\n\n  return Object.assign({}, state, stateDelta)\n}\n","import * as _ from 'lodash'\n\nimport { EntityAction } from '../../entity.action-classes'\n\n// updateMany\nexport function updateMany(\n  action: EntityAction<any>,\n  adapter: any,\n  state: any\n) {\n  let payload = _.flatten([action.payload])\n  let payloadIds = _.map(\n    _.flatten([payload]),\n    'id'\n  )\n  return adapter.upsertMany(payload, state)\n}\n","import { EntityAction } from '../../entity.action-classes'\n\n// updateOne\nexport function updateOne(\n  action: EntityAction<any>,\n  adapter: any,\n  state: any\n) {\n  return adapter.updateOne(action.payload, state)\n}\n","import * as _ from 'lodash'\n\nimport { EntityAction }                 from '../entity.action-classes'\nimport { actions as EntityActionsMap }  from '../entity.actions'\n\nimport {\n  actionType,\n} from './action-type'\n\nimport {\n  addMany, addOne, removeMany, removeOne,\n  setScopeIds, updateMany, updateOne,\n} from './functions/index'\n\nexport function entityReducer(\n  action: EntityAction<any>,\n  featureName: string,\n  sliceName: string,\n  adapter: any,\n  state: any,\n) {\n\n  switch (action.type) {\n    // Handle add store entities\n    case actionType(featureName, sliceName, EntityActionsMap.ADD_STORE_ENTITIES):\n\n      let entityData = action.payload\n      \n      if(_.isArray(entityData) && entityData.length == 1) {\n        // Single item\n        entityData = _.head(entityData)\n      }\n\n      if(_.isArray(entityData)) {\n        return addMany(entityData, adapter, state)\n      }\n      else {\n        return addOne(entityData, adapter, state)\n      }\n    // Handle set selected store entity\n    case actionType(featureName, sliceName, EntityActionsMap.SET_PRIMARY_ENTITY):\n      if (state.selectedEntityId == action.payload.entity.id) {\n        return state\n      }\n      else {\n        let stateDelta = {\n          selectedEntityId: action.payload.entity.id\n        }\n        return Object.assign({}, state, stateDelta)\n      }\n    case actionType(featureName, sliceName, EntityActionsMap.SET_SELECTED):\n      if (state.selectedEntityId == action.payload.entity.id) {\n        return state\n      }\n      else {\n        let stateDelta = {\n          selectedEntityId: action.payload.entity.id\n        }\n        return Object.assign({}, state, stateDelta)\n      }\n    // Handle set selected store entity\n    case actionType(featureName, sliceName, EntityActionsMap.UPDATE_SUCCESS):\n      if(Array.isArray(action.payload)) {\n        return updateMany(action, adapter, state)\n      }\n      else {\n        return updateOne(action, adapter, state)\n      }\n    // Handle delete store entities\n    case actionType(featureName, sliceName, EntityActionsMap.DELETE_SUCCESS):\n      if(Array.isArray(action.payload)) {\n        return removeMany(action, adapter, state)\n      }\n      else {\n        return removeOne(action, adapter, state)\n      }\n    // Handle set scope entities\n    case actionType(featureName, sliceName, EntityActionsMap.SET_SCOPE_ENTITIES):\n      return setScopeIds(action, adapter, state)\n    // Return the state\n    default:\n      return state\n    }\n}\n\n","import * as _ from 'lodash'\n\nimport { Observable } from 'rxjs'\n\nimport {\n  EntityIdentifier,\n  iEntity,\n  iEntityCollection,\n} from '../../interfaces'\n\n\nexport class EntityCollection implements iEntityCollection {\n  public length: number\n\n  constructor(\n    public entities: iEntity[] = []\n  ) {\n    this.length = entities.length\n  }\n\n  none() {\n    return this.buildCollection([])\n  }\n\n  sort(attributes: string[] | string): iEntityCollection {\n    attributes = _.flatten([attributes])\n\n    let entities = _.sortBy(this.entities, attributes)\n    return this.buildCollection(entities)\n  }\n\n  filter(...args): iEntityCollection {\n    // @ts-ignore:\n    let entities = this.entities.filter(...args)\n    return this.buildCollection(entities)\n  }\n\n  invokeFilter(methodName: string, attribute): iEntityCollection {\n    let filterByMethod = (entity) => {\n      if(entity[methodName]) {\n        return entity[methodName](attribute)\n      }\n      else {\n        return false\n      }\n    }\n    //let filterPartial = _.partialRight(filterByMethod, ...args)\n    let entities = _.filter(this.entities, filterByMethod)\n    return this.buildCollection(entities)\n  }\n\n  // TODO: deprecate this method\n  filterByInvoke(methodName: string, attribute): iEntityCollection {\n    return this.invokeFilter(methodName, attribute)\n  }\n\n  filterByAttrs(filters: any): iEntityCollection {\n    let runFilter = (entityCollection, filter, attr) => {\n      return entityCollection.filterByAttr(attr, filter)\n    }\n    let value = _.reduce(filters, runFilter, this)\n    return value\n  }\n\n  find(id: EntityIdentifier): iEntity {\n    let findEntity = (entity) => {\n      var defaults = [\"id\"]\n      var idAttributes =\n        _.get(entity.constructor, 'config.primaryKeys', defaults)\n      let hasId = (attr) => {\n        return entity[attr] == id\n      }\n      return ! _.isNil(_.find(idAttributes, hasId))\n    }\n\n    return _.find(this.entities, findEntity)\n  }\n\n  findByAttr(attr: string, value: any): iEntity {\n    function findEntity(entity) {\n      return entity[attr] == value\n    }\n\n    return _.find(this.entities, findEntity)\n  }\n\n  map(mapFn): any[] {\n    return _.map(this.entities, mapFn)\n  }\n\n  slice(...args): iEntityCollection {\n    let entities = this.entities.slice(...args)\n    return this.buildCollection(entities)\n  }\n\n  where(conditions: any): iEntityCollection {\n    var filterByCondition = (entity, value, key) => {\n      // When the entity does not have the attribute at all\n      if(!_.has(entity, key)) {\n        return false\n      }\n\n      let entityValue = entity[key]\n\n      // Case 1: the attribute in the entity is an array\n      if(entityValue instanceof Array) {\n        return _.includes(\n          _.map(entityValue, _.toString),\n          _.toString(value)\n        )\n      }\n\n      // Case 2: the condition is an array\n      if(value instanceof Array) {\n        return _.includes(\n          _.map(value, _.toString),\n          _.toString(entityValue)\n        )\n      }\n\n      return _.toString(entityValue) == _.toString(value)\n    }\n\n    var filterEntity = (entity) => {\n      return _.every(conditions, _.partial(filterByCondition, entity))\n    }\n\n    let entities = _.filter(this.entities, filterEntity)\n    return this.buildCollection(entities)\n  }\n\n  stringSearch(conditions: any): iEntityCollection {\n    let runFilter = (entityCollection, searchTerm, attr) => {\n      return entityCollection.stringSearchByAttr(attr, searchTerm)\n    }\n    return _.reduce(conditions, runFilter, this)\n  }\n\n  search(conditions: any): iEntityCollection {\n    var filterByCondition = (entity, value, key) => {\n      let entityValue = entity.attributes[key]\n\n      if(value instanceof Array) {\n        return _.includes(value, entityValue)\n      }\n      else {\n        return _.includes(entityValue, value)\n      }\n    }\n\n    var filterEntity = (entity) => {\n      return _.every(conditions, _.partial(filterByCondition, entity))\n    }\n\n    let entities = _.filter(this.entities, filterEntity)\n    return this.buildCollection(entities)\n  }\n\n  stringSearchByAttr(attr: string, searchTerm: any): iEntityCollection {\n    let attrFilter = (entity) => {\n      if(! searchTerm) {\n        return true\n      }\n\n      let entityValue = entity[attr]\n      let entityWildcardValue = _.lowerCase(entityValue)\n      let searchTermWildcardValue = _.lowerCase(searchTerm)\n      return _.includes(entityWildcardValue, searchTermWildcardValue)\n    }\n    return this.filter(attrFilter)\n  }\n\n  isEmpty(): boolean {\n    return _.isEmpty(this.entities)\n  }\n\n  isNotEmpty(): boolean {\n    return !this.isEmpty()\n  }\n\n  hasEntities(): boolean {\n    return this.isNotEmpty()\n  }\n\n  private filterByAttr(attr: string, filter: any): any {\n    let attrFilter = (entity) => {\n      let value = entity.attributes[attr]\n      return filter(value)\n    }\n    return this.filter(attrFilter)\n  }\n\n  private buildCollection(entities) {\n    let collectionType: any = this.constructor\n    return new collectionType(entities)\n  }\n\n  // Create an iterator for EntityTypeCollection\n  // Allows us to use the collections in angular directives\n  // (i.e. ngFor, etc)\n  [Symbol.iterator]() {\n    let current = 0\n    let entities = this.entities\n    return  {\n      next: function () {\n        let noEntities = _.isEmpty(entities)\n        let value = noEntities ? null : entities[current++]\n        let done = noEntities ? true : current > entities.length\n        return {\n          value: value,\n          done: done\n        }\n      }\n    }\n  }\n}\n","import * as _ from 'lodash'\n\nimport { createEntityAdapter as ngrxCreateEntityAdapter } from '@ngrx/entity'\n\nimport {\n  iEntityState,\n  iEntity,\n  iEntityAdapter,\n} from '../../interfaces/index'\n\nimport { \n  buildEntityTypeSelectors,\n} from '../../util/builders/selectors/build-entity-type-selectors'\n\nimport { entityReducer }         from './reducer/index'\nimport { EntityCollection }      from './entity.collection'\n\n\nexport class EntityAdapter implements iEntityAdapter {\n  featureName: any\n  entityType: any\n  entityConfig: any\n  entityName: any\n  sliceName: any\n\n  private _initialState: any\n  private _ngrxEntityAdapter: any\n  private _selectors: any\n  private _stateInterface: any\n  private _reducer: any\n  private _entityCollectionType: any\n\n  constructor(entityOpts: any) {\n    this.featureName = entityOpts.featureName\n    this.entityType = entityOpts.entityType\n    this.entityConfig = this.entityType.config\n\n    this.entityName = this.entityType.sliceName\n    this.sliceName = this.entityName\n  }\n\n\n  get entityCollectionType() {\n    return EntityCollection\n  }\n\n  get reducer() {\n    return this.getterWithBuilder('_reducer', 'buildReducer')\n  }\n\n  get selectors() {\n    return this.getterWithBuilder('_selectors', 'buildSelectors')\n  }\n\n  get initialState() {\n    return this.getterWithBuilder('_initialState', 'buildInitialState')\n  }\n\n  get ngrxEntityAdapter() {\n    if(! this._ngrxEntityAdapter) {\n      this._ngrxEntityAdapter = this.buildNgrxEntityAdapter()\n    }\n\n    return this._ngrxEntityAdapter\n  }\n\n  get scopes() {\n    let defaultScopes = {}\n    return _.get(this.entityConfig, 'initialState.scopes', defaultScopes)\n  }\n\n  private buildReducer() {\n    var adapter = this.ngrxEntityAdapter\n    var featureName = this.featureEntitySliceName(this.featureName)\n    var sliceName = this.sliceName\n    var initialState = this.initialState\n    var customReducer = this.entityConfig.reducer\n\n    let baseReducer = (state: iEntityState<iEntity> = initialState, action: any) => {\n\n      if(customReducer) {\n        state = customReducer(state, action)\n      }\n\n      state = entityReducer(\n        action, \n        featureName,\n        sliceName,\n        adapter,\n        state,\n      )\n\n      return state\n    }\n\n    return baseReducer\n  }\n  \n  private featureEntitySliceName(featureName) {\n    return _.join([featureName, 'entities'], '.')\n  }\n\n  private buildSelectors() {\n    return buildEntityTypeSelectors(this)\n  } \n\n  private buildInitialState() {\n    let entityTypeInitialState = {\n      selectedEntityId: null,\n    }\n\n    let initialState = _.merge(\n      entityTypeInitialState,\n      this.entityType.initialState\n    )\n\n    return this.ngrxEntityAdapter.getInitialState(initialState)\n  }\n\n  private buildNgrxEntityAdapter() {\n    return ngrxCreateEntityAdapter<any>() \n  }\n\n  private getterWithBuilder(propName, builder) {\n    if(!this[propName]) {\n      this[propName] = this[builder]()\n    }\n\n    return this[propName]\n  }\n\n}\n","import * as _ from 'lodash'\n\nimport { EntityAdapter }      from './entity.adapter'\n\nexport class EntityAdapterFactory {\n  _adapters: any[]\n\n  constructor(\n    private _featureConfig,\n  ) {}\n\n  get featureConfig(): any {\n    return this._featureConfig\n  }\n\n  get adapters(): any[] {\n    if(!this._adapters) {\n      this._adapters = this.buildAdapters()\n    }\n    return this._adapters\n  }\n\n  private buildAdapters() {\n    return _.map(\n      this.featureConfig.entityTypes,\n      _.bind(this.buildAdapter, this)\n    )\n  }\n\n  private buildAdapter(entityType) {\n    let opts = {\n      featureName: this.featureConfig.name,\n      entityType: entityType,\n    }\n    return new EntityAdapter(opts)\n  }\n}\n","import * as _ from 'lodash'\n\nimport { classify } from '@ceo/core'\n\nimport {\n  iFeatureConfig,\n  iEntityConstructor,\n  iEntityTypeMap,\n  iEntity,\n  iEntityConfig,\n  EntityTypeIdentifier,\n} from '../../interfaces/index'\n\nexport class EntityTypeFactory {\n  baseEntityType: iEntityConstructor\n\n  constructor(\n    baseEntityType: iEntityConstructor\n  ) {\n    this.baseEntityType = baseEntityType\n  }\n\n  build(\n    entityConfig: iEntityConfig,\n  ): iEntityTypeMap {\n\n    let entityTypeName = classify(entityConfig.name)\n    let entityType = this.buildEntityType(entityConfig)\n\n    let map = {}\n    let identifier = <EntityTypeIdentifier>entityTypeName\n    map[identifier] = entityType\n    return <iEntityTypeMap>map\n  }\n\n  private buildEntityType(\n    entityConfig: iEntityConfig,\n  ) {\n\n    var entityType\n    if(entityConfig.entityType) {\n      entityType = entityConfig.entityType\n    }\n    else {\n      entityType = this.baseEntityType\n    }\n\n    class Entity extends entityType {\n      static _sliceName: string = entityConfig.name\n      static config: any = entityConfig\n    }\n\n    return Entity\n  }\n}\n","import * as _ from 'lodash'\n\nimport {\n  iEntityConfig,\n  EntityConfigUrl,\n  EntityConfigUrlFragment,\n  iEntity,\n  iEntityConstructor,\n  iResourceIdentifier,\n} from '../../interfaces/index'\n\nexport class EntityConfig implements iEntityConfig {\n  private _name: string\n  private _entityType: iEntityConstructor\n\n  public type: string\n  public url?: EntityConfigUrlFragment\n  public primaryKeys?: any[] = ['id']\n  public seed: iResourceIdentifier[] = []\n  public apiConfig: any\n  public reducer: any\n  public initialState: any = {}\n\n  public isSeed?: boolean\n\n  public constructor(init?: Partial<EntityConfig>) {\n    Object.assign(this, init)\n  }\n\n  get name(): string {\n    if(! this._name) {\n      this._name = this.type\n    }\n\n    return this._name\n  }\n\n  set name(value: string) {\n    this._name = value\n  }\n\n  getName(): string {\n    return this.type\n  }\n\n  hasResourceType(resourceIdentifier: any = {}): boolean {\n    return this.type == resourceIdentifier.type\n  }\n\n  ofType(entityData: iEntity): boolean {\n    return this.type == entityData.type\n  }\n\n  isCustom() {\n    return _.has(this, \"primaryKeys\")\n  }\n\n  urlFragment(opts = {}): EntityConfigUrlFragment {\n    if(_.isFunction(this.url)) {\n      return this.url(opts)\n    }\n    else {\n      return this.url ? this.url : this.type\n    }\n  }\n\n  get entityType(): iEntityConstructor {\n    return this._entityType\n  }\n\n  set entityType(entityType: iEntityConstructor) {\n    this._entityType = entityType\n  }\n}\n","import * as _ from 'lodash'\n\nimport {\n  iEntity,\n  iEntityEffectsConfigArgs,\n  iEntityEffectsConfig,\n  iEntityEffectTypes,\n} from '../../interfaces/index'\n\nexport class EntityEffectsConfig implements iEntityEffectsConfig {\n  private sliceName: string\n  private initialEntity: iEntity\n  private effectTypes: iEntityEffectTypes\n  private defaultEffectTypes: iEntityEffectTypes = {\n    init: false,\n    load: true,\n    add: true,\n    patch: true,\n    asyncSuccess: true\n  }\n\n  constructor(\n    public config: iEntityEffectsConfigArgs\n  ) {\n    this.sliceName = config.sliceName\n    this.initialEntity = config.initialEntity\n    this.effectTypes = _.merge(this.defaultEffectTypes, config.effectTypes)\n  }\n\n  public hasEffectType(effectTypeName: string) {\n    return(\n      _.has(this.effectTypes, effectTypeName)  &&\n        this.effectTypes[effectTypeName]\n    )\n  }\n\n  public getConfig(configItem: string) {\n    return this.config[configItem]\n  }\n}\n","import * as _ from 'lodash'\n\nimport {\n  Observable,\n} from 'rxjs'\n\nimport {\n  slugify,\n  camelCase,\n} from '@ceo/core'\n\nimport {\n  Mixin,\n  AttributeGetterSetter,\n  AttributeUpdater,\n  Memoizer,\n} from '@ceo/shared'\n\n\nimport {\n  iDataService,\n  iDataServiceOpts,\n  iEntity,\n  iEntityAttributes,\n  iEntityConfig,\n  iEntityRelationships,\n  EntityData,\n  EntityIdentifier,\n  EntityRelationshipIdentifier,\n  EntityTypeIdentifier,\n  iResourceIdentifier,\n} from '../../../interfaces/index'\n\n// @dynamic\n@Mixin([AttributeGetterSetter, AttributeUpdater, Memoizer])\nexport class JsonApiEntity implements iEntity,\n  AttributeGetterSetter, AttributeUpdater {\n\n  static _sliceName: string = ''\n  static config: any = {}\n  static defaultAttributes: any = {}\n\n  static get sliceName(): string {\n    if(this._sliceName) {\n      return this._sliceName\n    }\n\n    if(this.config) {\n      return this.config.name\n    }\n\n    return this.constructor.name\n  }\n\n  id: EntityIdentifier\n  type: EntityTypeIdentifier\n  attributes: iEntityAttributes = {}\n  relationships: iEntityRelationships\n  defaultAttributes: any = {}\n\n  private _dataService: iDataService\n\n  public constructor(\n    init?: Partial<iEntity>,\n    dataService?: iDataService,\n  ) {\n    Object.assign(this, init)\n    this._dataService = dataService\n    this.setAttributes()\n  }\n\n  setAttributes() {\n    this.attributes =\n      _.defaults(this.attributes, (<any>this.constructor).defaultAttributes)\n    this.updateAttributes(this.attributes)\n  }\n\n  getAttr(attrName: string) {\n    return this.attributes[attrName]\n  }\n\n  setAttr(attrName: string, value: any) {\n    attrName = slugify(attrName)\n    let prop = {}\n    prop[attrName] = value\n    this.updateAttributes(prop)\n  }\n\n  get dataService(): iDataService {\n    return this._dataService\n  }\n\n  set dataService(service: iDataService) {\n    this._dataService = service\n  }\n\n  get isNew(): boolean {\n    return !_.has(this, 'id')\n  }\n\n  nameStartsWith(name: string) {\n    let nameIndex = this.getAttr('name')\n      .toLowerCase()\n      .indexOf(name.toLowerCase())\n    return nameIndex === 0\n  }\n\n  getSliceName() {\n    return this.type\n  }\n\n  relationship(type) {\n    return this[type]\n  }\n\n  relationshipSize(\n    relationshipName: EntityRelationshipIdentifier,\n  ): number {\n    if(!this.hasRelationship(relationshipName)) {\n      return 0\n    }\n\n    let relationshipData = this.relationships[relationshipName].data\n    if(_.isArray(relationshipData)) {\n      return relationshipData.length\n    }\n\n    return 1\n  }\n\n  relationship$(\n    relationshipName: EntityRelationshipIdentifier,\n    opts: iDataServiceOpts = {},\n  ): Observable<EntityData> {\n    return this.dataService.relationship$(this, relationshipName, opts)\n  }\n\n  save$(\n    opts: iDataServiceOpts = {}\n  ): Observable<iEntity> {\n    let saveAction = this.isNew ? 'create$' : 'update$'\n    return this.dataService[saveAction](this.toResourceIdentifier(), opts)\n  }\n\n  private toResourceIdentifier(): any {\n    let ri = _.clone(_.pick(this, 'feature', 'type')) as any\n    ri.data = this.attributes\n    if(!this.isNew) {\n      ri.id = this.id\n    }\n    return ri\n  }\n\n  private hasRelationship(\n    relationshipName: EntityRelationshipIdentifier,\n  ): boolean {\n    return (\n      this.relationships &&\n      this.relationships[relationshipName] && \n      this.relationships[relationshipName].data\n    )\n  }\n\n\n  // Mixin methods\n  updatedKeys: string[] = []\n  updateAttributes(attributes: any): void {}\n  createAttributeSettersAndGetters(): void {}\n  createSettersAndGetters(props: any): void {}\n  createGetSet(obj, props, key: string, name: string): void {}\n  generateGetSet(props, key, name): any {}\n  setProp(props, key, value): void {}\n  getProp(props, key): any {}\n  memoized(property: string, value: any): any {}\n}\n","import { JsonApiEntity } from './json-api.entity'\n\nexport class ResourceAssociationEntity extends JsonApiEntity {\n  isForAttribute(attrName: string) {\n    return (this as any).name == attrName\n  }\n}\n","import { JsonApiEntity } from './json-api.entity'\n\nexport class ResourceAttributeEntity extends JsonApiEntity {\n  isForAttribute(attrName: string) {\n    return (this as any).name == attrName\n  }\n}\n","import * as _ from 'lodash'\n\nimport {\n  Observable,\n} from 'rxjs'\n\nimport {\n  camelCase,\n} from '@ceo/core'\n\nimport {\n  EntityData,\n} from '../../../interfaces/index'\n\nexport function buildEntityRelationshipProperty(\n  relationshipName,\n): (() => Observable<EntityData>) {\n\n  function relationship(): Observable<EntityData> {\n    return this.dataService.relationship$(this, relationshipName, {})\n  }\n\n  return relationship\n}\n\nexport function defineEntityRelationshipGetSet(\n  entityType,\n  relationshipName,\n): void {\n\n  let propName = `${camelCase(relationshipName)}$`\n  let privatePropName = `_${propName}`\n\n  let getter = buildEntityRelationshipProperty(relationshipName)\n\n  console.log(\"building get set for \" + entityType.name + \" : \" + relationshipName)\n\n  let props = {\n    get: function() {\n      return this.memoized(privatePropName, getter)\n    },\n    set: function(value: any) {}\n  }\n\n  Object.defineProperty(entityType.prototype, propName, props)\n}\n\n\nexport function buildEntityRelationshipProperties(\n  entityType,\n): void {\n\n  let defineGetSet = _.partial(defineEntityRelationshipGetSet, entityType)\n  _.map(entityType.relationshipNames, defineGetSet)\n}\n","import * as _ from 'lodash'\n\nimport {\n  Observable,\n} from 'rxjs'\n\nimport {\n  slugify,\n} from '@ceo/core'\n\nimport {\n  iEntityCollection,\n  iResourceConfigurationEntity,\n} from '../../../interfaces/index'\n\nimport {\n  buildEntityRelationshipProperties,\n  defineEntityRelationshipGetSet,\n} from '../../../util/builders/entity/build-entity-relationship-properties'\n\nimport { JsonApiEntity } from './json-api.entity'\n\nexport class ResourceConfigurationEntity extends JsonApiEntity\n  implements iResourceConfigurationEntity {\n\n  static defaultAttributes: {} = {\n    isRoutable: true\n  }\n\n  static relationshipNames: string[] = [\n    'resource-associations',\n    'resource-attributes',\n    'resource-validators',\n  ]\n\n  resourceAssociations$: any\n}\n\nlet buildEntityRelationship = (name) => {\n  defineEntityRelationshipGetSet(ResourceConfigurationEntity, name)\n}\n_.map(ResourceConfigurationEntity.relationshipNames, buildEntityRelationship)\n\n/*\nResourceConfigurationEntity.prototype.resourceAssociations$ = function() {\n  return this.dataService.relationship$(this, 'resource-associations', {})\n}\n*/\n","import * as _ from 'lodash'\n\nimport { JsonApiEntity } from './json-api.entity'\n\nexport class ResourceValidatorEntity extends JsonApiEntity {\n  isForAttribute(attrName: string) {\n    return _.includes((this as any).attributeNames, attrName)\n  }\n}\n","import * as _ from 'lodash'\n\nimport {\n  iFeatureConfig,\n  iEntityConstructor,\n  iEntityConstructorParams,\n  iEntityTypeMap,\n  iEntity,\n  iEntityConfig,\n  iResourceIdentifier,\n} from '../../interfaces/index'\n\nimport { EntityTypeFactory } from '../entity/entity-type.factory'\n\nexport class FeatureConfig implements iFeatureConfig {\n  name: string\n  entityConfigs: iEntityConfig[]\n  baseEntityType: iEntityConstructor\n  selectors: any\n\n  private _entityTypes: iEntityTypeMap\n  private _sliceNames: string[]\n  private _seedEntities: iEntityConstructor[]\n\n  public constructor(init?: Partial<iFeatureConfig>) {\n    Object.assign(this, init)\n  }\n\n  get sliceNames(): string[] {\n    if(this._sliceNames) {\n      return this._sliceNames\n    }\n\n    this._sliceNames = this.buildSliceNames()\n    return this._sliceNames\n  }\n\n  get seedEntities() {\n   if(! this._seedEntities) {\n     this._seedEntities = this.buildSeeds()\n   }\n\n   return this._seedEntities\n  }\n\n  get entityTypes(): iEntityTypeMap {\n    if(!this._entityTypes) {\n      this._entityTypes = this.buildEntityTypes()\n    }\n\n    return this._entityTypes\n  }\n\n  entityTypeFromEntityData(\n    entityData: iEntityConstructorParams\n  ): iEntityConstructor {\n    let ofType = (entityType) => {\n      return entityType.config.ofType(entityData)\n    }\n\n    return _.find(this.entityTypes, ofType)\n  }\n\n  entityType(theType: string): iEntityConstructor {\n    let hasType = (entityType) => {\n      return entityType.config.type == theType\n    }\n\n    return _.find(this.entityTypes, hasType)\n  }\n\n  ////////////////////////////\n  // Private methods\n  ////////////////////////////\n\n\n  private get entitySliceNames(): string[] {\n    let getName = (entityType) => {\n      return entityType.sliceName\n    }\n    return _.map(this.entityTypes, getName)\n  }\n\n  private buildSliceNames(): string[] {\n    let prefixedSliceName = (sliceName) => {\n      return _.join([this.name, 'entities', sliceName], '.')\n    }\n\n    return _.map(this.entitySliceNames, prefixedSliceName)\n  }\n\n  private buildSeeds() {\n    return _.flatten(\n      _.map(\n        this.entityTypes,\n        _.bind(this.buildEntityTypeSeeds, this)\n      )\n    )\n  }\n\n  private buildEntityTypeSeeds(entityType) {\n    let buildResourceIdentiifer = (\n      ri: iResourceIdentifier\n    ) => {\n      let map = {\n        feature: this.name,\n        type: entityType.config.type\n      }\n      return _.merge(map, ri)\n    }\n\n    return _.map(entityType.config.seed, buildResourceIdentiifer)\n  }\n\n  private buildEntityTypes() {\n    var factory = new EntityTypeFactory(this.baseEntityType)\n    let build = _.bind(factory.build, factory)\n    let entityTypeMaps = _.map(this.entityConfigs, build)\n    return _.assign.apply(_, entityTypeMaps)\n  }\n}\n","import {\n  Observable,\n} from 'rxjs'\n\nimport * as types from '../types'\n\nimport { FeatureIdentifier } from '../feature/feature-identifier'\n\nimport { EntityIdentifier } from './entity-identifier'\n\nexport type EntityAttributeDataType = any;\n\nexport type EntityRelationshipIdentifier = string\n\nexport type EntityRelationshipType = string\nexport const EntityHasOneRelationshipType = \"HasOne\"\nexport const EntityHasManyRelationshipType = \"HasMany\"\nexport type EntityRelationship = EntityHasOneRelationship | EntityHasManyRelationship\n\nexport type EntityHasOneRelationship = iEntityRelationshipMapping\nexport type EntityHasManyRelationship = iEntityRelationshipMapping[]\n\nexport type EntityTypeIdentifier = string;\n\n\nexport type EntityData = iEntity | iEntityCollection\n\nexport interface iEntityAttributes {\n  [key: string]: EntityAttributeDataType;\n}\n\nexport interface iEntityRelationships {\n  [key: string]: any\n}\n\nexport interface iEntityConstructorParams {\n  id?: EntityIdentifier\n  feature?: FeatureIdentifier\n  type: EntityTypeIdentifier\n  attributes: iEntityAttributes\n  relationships?: iEntityRelationships\n  [key: string]: any\n}\n\nexport interface iEntity extends iEntityConstructorParams {\n  sliceName?: string\n  dataService?: any\n\n  save$(opts?: any): Observable<iEntity>\n}\n\nexport interface Entity extends iEntity {}\n\nexport interface iEntityConstructor {\n  new(...args): iEntity\n\n  _sliceName: string\n\n  config: any\n  defaultAttributes: any\n}\n\nexport interface iEntityCollection {\n  length: number;\n  entities: iEntity[];\n\n  slice(any): iEntityCollection;\n  filter(any): iEntityCollection;\n  find(any): iEntity;\n  findByAttr(attr: any, value: any): iEntity;\n  filterByAttrs(any): iEntityCollection;\n  invokeFilter(methodName: string, ...args): iEntityCollection\n  filterByInvoke(methodName: string, ...args): iEntityCollection\n  where(any): iEntityCollection;\n  stringSearch(any): iEntityCollection;\n  search(any): iEntityCollection;\n  stringSearchByAttr(attr: any, term: any): iEntityCollection;\n  map(any): any[]\n  sort(attributes: string[]): iEntityCollection\n  isEmpty(): boolean\n  isNotEmpty(): boolean\n  hasEntities(): boolean\n}\n\n\nexport interface iEntityRelationshipMapping {\n  id: EntityIdentifier,\n  type: EntityTypeIdentifier;\n  [key: string]: any\n}\n\nexport interface iWrappedEntityRelationship {\n  data: EntityRelationship\n}\n\n\nexport interface iEntityMap {\n  EntityTypeIdentifier: iEntity[],\n}\n\nexport interface iEntityTypeMap {\n  EntityTypeIdentifier: iEntityConstructor\n}\n","export const EntitySelectorTypes: any = {\n  All: 'All' as 'All',\n  Ids: 'Ids' as 'Ids',\n  Entities: 'Entities' as 'Entities',\n  Total: 'Total' as 'Total',\n  SelectedEntity: 'SelectedEntity' as 'SelectedEntity',\n  Config: 'Config' as 'Config',\n  Scope: 'Scope' as 'Scope',\n}\n\nexport interface iEntitySelectorTypes {\n  All: string\n  Ids: string\n  Entities: string\n  Total: string\n  SelectedEntity: string\n  Config: string\n  Scope: string\n}\n\nexport type EntitySelectorTypeKeys = keyof iEntitySelectorTypes\n","import * as _ from 'lodash'\n\nimport { Injectable } from '@angular/core'\n\nimport {\n  iDataService,\n  iEntity,\n  iEntityConstructorParams,\n} from '../interfaces/index'\n\n@Injectable()\nexport class EntityCloner {\n  clone(\n    entity: iEntity,\n    dataService: iDataService = null,\n  ): iEntity {\n    let entityCtor : any = entity.constructor\n    return new entityCtor(this.constructorParams(entity), dataService)\n  }\n\n  private constructorParams(\n    entity: iEntity,\n  ): iEntityConstructorParams {\n\n    let paramNames = [\n      'id',\n      'feature',\n      'type',\n      'attributes',\n      'relationships',\n    ]\n    return <iEntityConstructorParams>_.pick(entity, paramNames)\n\n  }\n}\n","import * as _ from 'lodash'\n\nimport { Injectable } from '@angular/core'\n\nimport {\n  InflectionService,\n}   from '@ceo/core'\n\nimport {\n  iEntitySelectorIdentifier,\n} from '../../interfaces/index'\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SelectorNameService {\n  constructor(\n    private inflectionService: InflectionService,\n  ) {}\n\n  getFeatureSelectorName(featureConfig) {\n    return featureConfig.name\n  }\n\n  getEntitySelectorName(entityAdapter) {\n    return entityAdapter.sliceName\n  }\n\n  getNestedSelectorName(parentName, selectorName) {\n    let parentSegments = this.buildSegments(parentName)\n    let selectorNameSegments = this.buildSegments(selectorName, 'select')\n    let segments = _.flatten([parentSegments, selectorNameSegments])\n\n    return _.join(segments, '.')\n  }\n\n  getResourceSelectorName(si: iEntitySelectorIdentifier) {\n    return this.selectorIdentifierToSelectorName(si)\n  }\n\n  // Alias for getResourceSelectorName\n  getSelectorName(si: iEntitySelectorIdentifier) {\n    return this.getResourceSelectorName(si)\n  }\n\n  private buildSegments(value: string, prefix: string = ''): string[] {\n    let camelCase = _.bind(this.inflectionService.camelCase, this)\n\n    let inflections = \n      [\n        ['removePrefix', prefix],\n        ['replace', / /g, ''],\n        ['trim', '.'],\n        ['split', '.'],\n      ]\n\n    let result = (<any>this.inflectionService).inflect(value, inflections)\n\n    return _.map(result, camelCase)\n  }\n\n  private sanitizedSelectorName(selectorName: string): string[] {\n    let prefix = 'select'\n\n    selectorName = this.inflectionService.removePrefix(selectorName, prefix)\n\n    let camelCase = (value) => {\n      return this.inflectionService.camelCase(value)\n    }\n\n    let segments = _.map(_.split(selectorName, '.'), camelCase)\n    return segments\n  }\n\n  private selectorIdentifierToSelectorName(si: iEntitySelectorIdentifier) {\n    let featureName =\n      this.inflectionService.camelCase(si.feature)\n\n    let featureEntities = 'entities'\n\n    let sliceName =\n      this.inflectionService.camelCase(si.entityType)\n\n    let selectorType =\n      this.inflectionService.camelCase(si.selectorType)\n\n    let segments = [\n      featureName,\n      featureEntities,\n      sliceName,\n      selectorType,\n    ]\n\n    if(_.has(si, 'scope')) {\n      let scopeName =\n        this.inflectionService.camelCase(si.scope)\n\n      segments.push(scopeName)\n    }\n\n    return _.join(segments, '.')\n  }\n}\n","// Get all the Selectors internal to an entity type\n\nimport * as _ from 'lodash'\n\nimport {\n  createSelector,\n} from '@ngrx/store'\n\nexport const buildEntitySelectors = (\n  entityAdapter,\n  entityTypeSelector,\n  selectorNameService,\n) => {\n\n  let buildEntityScopedSelector = (selector, selectorName) => {\n    let entitySelectorName =\n      selectorNameService.getEntitySelectorName(entityAdapter) \n\n    let entityScopedSelectorName =\n      selectorNameService.getNestedSelectorName(entitySelectorName, selectorName)\n\n    let featureLevelSelector = createSelector(entityTypeSelector, selector)\n\n    let selectors = {}\n    selectors[entityScopedSelectorName] = featureLevelSelector\n\n    return selectors\n  }\n\n  return _.reduce(\n    _.map(entityAdapter.selectors, buildEntityScopedSelector),\n    _.merge,\n    {},\n  )\n}\n","import {\n  iEntityState,\n} from '../../../interfaces/index'\n\nexport const buildSliceSelector = (sliceName) => {\n  return (state: iEntityState<any>) => {\n    return state[sliceName]\n  }\n}\n","import {\n  iEntityState,\n} from '../../../interfaces/index'\n\nimport { buildSliceSelector } from './build-slice-selector'\n\n// Get all the Entity Type data for an entity type.\nexport const buildEntityTypeSliceSelector = (entityAdapter) => {\n  return buildSliceSelector(entityAdapter.sliceName)\n}\n","import * as _ from 'lodash'\n\nimport {\n  compose,\n} from '@ngrx/store'\n\nexport const buildRootSelector = (\n  featureSelector,\n  entitySelector\n) => {\n\n  let rootSelectorName = _.join([featureSelector.name, entitySelector.name], '.')\n  let rootSelector = compose(entitySelector.selector, featureSelector.selector)\n\n  return {\n    name: rootSelectorName,\n    selector: rootSelector,\n  }\n}\n","import * as _ from 'lodash'\n\nimport {\n  createFeatureSelector,\n  compose,\n} from '@ngrx/store'\n\nimport { buildEntitySelectors }    from './build-entity-selectors'\nimport { buildEntityTypeSliceSelector } from './build-entity-type-slice-selector'\nimport { buildRootSelector }       from './build-root-selector'\nimport { buildSliceSelector }      from './build-slice-selector'\n\nexport const buildFeatureSelector = (\n  featureConfig,\n  entityAdapters,\n  selectorService,\n  selectorNameService,\n  buildCustomSelectors,\n) => {\n\n  // Feature Selector\n  var featureSelectorName = selectorNameService.getFeatureSelectorName(featureConfig)\n  let featureSelectorFunction = createFeatureSelector<any>(featureSelectorName)\n  let featureSelector = {\n    name: featureSelectorName,\n    selector: featureSelectorFunction\n  }\n  selectorService.addSelector(featureSelector)\n\n  // Feature Entities Selector\n  var featureEntitiesSelectorName =\n    selectorNameService.getNestedSelectorName(featureSelectorName, 'entities')\n  let entitiesSelectorFunction = buildSliceSelector('entities')\n  let featureEntitiesSelectorFunction =\n    compose(entitiesSelectorFunction, featureSelector.selector)\n  let featureEntitiesSelector = {\n    name: featureEntitiesSelectorName,\n    selector: featureEntitiesSelectorFunction\n  }\n  selectorService.addSelector(featureEntitiesSelector)\n\n\n  // Feature Config Selector\n  var featureConfigSelectorName =\n    selectorNameService.getNestedSelectorName(featureSelectorName, 'config')\n  let configSelectorFunction = buildSliceSelector('config')\n  let featureConfigSelectorFunction =\n    compose(configSelectorFunction, featureSelector.selector)\n  let featureConfigSelector = {\n    name: featureConfigSelectorName,\n    selector: featureConfigSelectorFunction\n  }\n  selectorService.addSelector(featureConfigSelector)\n\n\n  let addEntity = (entityAdapter) => {\n    var adapter = entityAdapter\n\n    var entityTypeSelector = buildEntityTypeSliceSelector(entityAdapter)\n\n    let entitySelectors =\n      buildEntitySelectors(\n        entityAdapter,\n        entityTypeSelector,\n        selectorNameService\n      )\n\n    let buildRootSelectorForEntity = (selector, selectorName) => {\n      let entitySelector = {\n        name: selectorName,\n        selector: selector\n      }\n\n      return buildRootSelector(\n        featureEntitiesSelector,\n        entitySelector\n      )\n    }\n\n    let rootSelectors = _.map(entitySelectors, buildRootSelectorForEntity)\n\n    let addSelectors = (selector) => {\n      selectorService.addSelector(selector)\n    }\n\n    _.map(rootSelectors, addSelectors)\n  }\n\n  _.map(entityAdapters, addEntity)\n\n  buildCustomSelectors(selectorService)\n}\n\n","import * as _ from 'lodash'\n\nimport { Store, createSelector, MemoizedSelector } from '@ngrx/store'\n\nimport {\n  iEntityState,\n  iEntity,\n} from '../../../interfaces/index'\n\n\nexport const buildFilterSelector = (selector, filter) => {\n\n  let filterState = (state: any) => {\n    if(state && state.where) {\n      return state.where(filter)\n    }\n    else {\n      return state\n    }\n  }\n\n  return createSelector(\n    selector,\n    filterState,\n  )\n}\n","import * as _ from 'lodash'\n\nimport { Store, createSelector, MemoizedSelector } from '@ngrx/store'\n\nimport {\n  iEntityState,\n  iEntity,\n  iResourceIdentifier,\n} from '../../../interfaces/index'\n\nexport const buildFindSelector = (\n  selector,\n  ri: iResourceIdentifier,\n  findPropPath: string = 'id'\n) => {\n\n  let find = (state: any) => {\n    return state.find(_.get(ri, findPropPath))\n  }\n\n  return createSelector(\n    selector,\n    find,\n  )\n}\n","import * as _ from 'lodash'\n\nimport { pipe }   from 'rxjs'\nimport { filter } from 'rxjs/operators'\n\nimport { \n  select,\n  createFeatureSelector,\n  createSelector, MemoizedSelector\n} from '@ngrx/store'\n\nimport {\n  iFeatureMap,\n} from '../../interfaces/index'\n\nimport { iFeatureState } from './state'\n\nexport const selectEntityFeature = createFeatureSelector<any> ('entity')\n\nlet selectFeatures = (state: iFeatureState): iFeatureMap => {\n  return state.features\n}\n\nlet selectPrimaryEntityIdentifier = (state: iFeatureState) => {\n  return _.get(state, 'primaryEntity.resourceIdentifier')\n}\n\nlet selectPrimaryEntity = (state: iFeatureState) => {\n  return _.get(state, 'primaryEntity.entity')\n}\n\nlet selectors = {\n  features: selectFeatures,\n  primaryEntity: selectPrimaryEntity,\n  primaryEntityIdentifier: selectPrimaryEntityIdentifier,\n}\n\nlet buildFeatureSelector = (selector, name) => {\n  return createSelector(\n    selectEntityFeature,\n    selector,\n  )\n}\n\n\nexport const entityFeatureSelectors =\n  _.mapValues(selectors, buildFeatureSelector)\n","import * as _ from 'lodash'\n\nimport { Observable }   from 'rxjs'\n\nimport { Injectable } from '@angular/core'\n\nimport { Store } from '@ngrx/store'\n\nimport { InflectionService }             from '@ceo/core'\n\nimport {\n  iSelectorsMap,\n  iEntitySelectorIdentifier,\n} from '../../interfaces/index'\n\nimport { SelectorNameService } from './selector-name.service'\n\n@Injectable()\nexport class SelectorService {\n  selectors: iSelectorsMap = {}\n\n  constructor(\n    private inflectionService: InflectionService,\n    private store: Store<any>,\n    private selectorNameService: SelectorNameService\n  ) {}\n\n  select$(selectorName): Observable<any> {\n    let selector = this.getSelector(selectorName)\n    return this.store.select(selector)\n  }\n\n  select(selectorName) {\n    return this.select$(selectorName)\n  }\n\n  selectorFromSelectorIdentifier(si: iEntitySelectorIdentifier) {\n    let selectorName =\n      this.selectorNameService.getResourceSelectorName(si)\n\n    return this.getSelector(selectorName)\n  } \n\n  getSelector(selectorName) {\n    let path = this.selectorPath(selectorName)\n    return  _.get(this.selectors, path)\n  }\n\n  addSelector(selector) {\n    let path = this.selectorPath(selector.name)\n    this.log(selector, path, false)\n    return _.set(this.selectors, path, selector.selector)\n  }\n\n  private selectorPath(selectorName: string): string {\n    let pathElements = _.split(selectorName, '.')\n    /*\n    if(pathElements.length > 1) {\n      pathElements.splice(1, 0, 'entities')\n    }\n    */\n    pathElements.push('selector')\n    return _.join(pathElements, '.')\n  }\n\n  private log(selector, path, loggingEnabled = false) {\n    if(loggingEnabled) {\n      console.log(\"Registering the selector \" + path)\n    }\n  }\n}\n","import * as _ from 'lodash'\n\nimport { Observable }   from 'rxjs'\n\nimport { Injectable } from '@angular/core'\n\nimport { Store, createSelector } from '@ngrx/store'\n\nimport { InflectionService } from '@ceo/core'\n\nimport {\n  iCustomSelector,\n  iEntitySelectorIdentifier,\n  iEntitySelectorTypes,\n  iFeature,\n  iFeatureMap,\n  iResourceIdentifier,\n  iDataServiceOpts,\n  EntitySelectorTypes,\n} from '../../interfaces/index'\n\nimport {\n  JsonApiEntity,\n} from '../../classes/index'\n\nimport {\n  buildFilterSelector,\n  buildFindSelector,\n} from '../../util/builders/selectors/index'\n\nimport {\n  entityFeatureSelectors,\n} from '../../state/feature/selectors'\n\n\nimport { SelectorService } from './selector.service'\n\n\n@Injectable()\nexport class SelectorProvider {\n  features$: Observable<iFeatureMap>\n  features: iFeatureMap\n\n  private defaultOpts: any = {\n    selectorType: <keyof iEntitySelectorTypes>EntitySelectorTypes.All\n  }\n\n  constructor(\n    private selectorService: SelectorService,\n    private store: Store<any>,\n  ) {\n    this.subscribeToFeatures()\n  }\n\n  provide(\n    ri: iResourceIdentifier,\n    opts: iDataServiceOpts = {}\n  ): Observable<any> {\n    opts = _.defaults(opts, this.defaultOpts)\n\n    let selector = this.customSelector(ri, opts) ||\n      this.defaultSelector(ri, opts)\n\n    return selector\n  }\n\n  private customSelector(\n    ri: iResourceIdentifier,\n    opts: iDataServiceOpts = {}\n  ): Observable<any> {\n\n    let feature = this.features[ri.feature]\n\n    if(feature) {\n      let selectorIsValid = (selector): boolean => {\n        return selector.isValid(ri)\n      }\n      let selector = _.find(feature.selectors, selectorIsValid)\n\n      if(selector) {\n        return <any>selector.selector(this.selectorService, ri)\n      }\n      else {\n        return null\n      }\n    }\n\n    return null\n  }\n\n  private defaultSelector(\n    ri: iResourceIdentifier,\n    opts: iDataServiceOpts = {}\n  ): Observable<any> {\n\n    if(this.isRelationshipResourceRequest(ri)) {\n      ri = {\n        feature: ri.feature,\n        type: ri.relationship.type\n      }\n    }\n\n    let si = this.selectorIdentifier(ri, opts)\n    let selector = this.getBaseSelector(si)\n\n    if(this.isFindRequest(ri)) {\n      selector = this.findSelector(selector, ri)\n    }\n\n    if(this.isFilteredResourceRequest(ri)) {\n      selector = this.filterSelector(selector, ri)\n    }\n\n    return selector\n  }\n\n  private isRelationshipResourceRequest(\n    ri: iResourceIdentifier,\n  ) {\n    return _.has(ri, 'relationship')\n  }\n\n  private selectorIdentifier(\n    ri: iResourceIdentifier,\n    opts: iDataServiceOpts = {}\n  ): iEntitySelectorIdentifier {\n\n    let isScoped = this.isScopedResourceIdentifier(ri)\n    var selectorType = isScoped ? 'scope' : opts.selectorType\n    \n    let si = {\n      feature: ri.feature,\n      entityType: ri.type,\n      selectorType: <keyof iEntitySelectorTypes> selectorType\n    }\n\n    if(isScoped) {\n      si = _.merge(si, {scope: ri.filter.scope})\n    }\n\n    return si\n  }\n\n  private getBaseSelector(\n    selectorIdentifier: iEntitySelectorIdentifier,\n  ) {\n    return this.selectorService\n      .selectorFromSelectorIdentifier(selectorIdentifier)\n  }\n\n  private isFindRequest(\n    ri: iResourceIdentifier,\n  ) {\n    return !_.isEmpty(this.findPropPath(ri))\n  }\n\n  private findPropPath(\n    ri: iResourceIdentifier,\n  ) {\n\n    let primaryKeys = this.getPrimaryKeys(ri)\n\n    // Simple case when primary key is 'id'\n    if(_.has(ri, 'id') && _.includes(primaryKeys, 'id')) {\n      return 'id'\n    }\n\n\n    // Alternate scenario: when the primary key is\n    // mixed in with the filter params\n    let filterKeys = _.keys(this.getFilterParams(ri))\n    let primaryKey = _.head(_.intersection(primaryKeys, filterKeys))\n    if(primaryKey) {\n      return `filter.${primaryKey}`\n    }\n    else {\n      return null\n    }\n  }\n\n  private findSelector(\n    selector: any,\n    ri: iResourceIdentifier,\n  ): any {\n    return buildFindSelector(selector, ri, this.findPropPath(ri))\n  }\n\n  private isFilteredResourceRequest(\n    ri: iResourceIdentifier,\n  ) {\n    return _.has(ri, 'filter')\n  }\n\n  private filterSelector(\n    selector: any,\n    ri: iResourceIdentifier,\n  ) {\n\n    let filter = this.getFilterParams(ri)\n    return buildFilterSelector(selector, filter)\n  }\n\n  private isScopedResourceIdentifier(ri: iResourceIdentifier,) {\n    return _.has(ri, 'filter.scope')\n  }\n\n  private subscribeToFeatures() {\n    this.features$ = \n      <Observable<iFeatureMap>>this.store.select(entityFeatureSelectors.features)\n    this.features$\n      .subscribe(features => this.features = features)\n  }\n\n  private getFeature(ri: iResourceIdentifier) {\n    return this.features[ri.feature]\n  }\n\n  private getFilterParams(ri: iResourceIdentifier) {\n    return _.omit(ri.filter, 'scope')\n  }\n\n  private getPrimaryKeys(ri: iResourceIdentifier): string[] {\n    var primaryKeys = ['id']\n    let feature = this.getFeature(ri)\n    let entityType = feature.entityType(ri.type)\n\n    if(entityType) {\n      primaryKeys = entityType.config.primaryKeys || primaryKeys\n    }\n\n    return primaryKeys\n  }\n}\n","import { SelectorNameService as EntitySelectorNameService }  from './selector-name.service'\nimport { SelectorProvider as EntitySelectorProvider }        from './selector-provider.service'\nimport { SelectorService as EntitySelectorService }          from './selector.service'\n\nexport const services: any[] = [\n  EntitySelectorNameService,\n  EntitySelectorProvider,\n  EntitySelectorService,\n]\n\nexport {\n  EntitySelectorNameService,\n  EntitySelectorProvider,\n  EntitySelectorService,\n}\n","//  Loads and constructs relations for an entity, using the entity's\n//  relationship data.\n\nimport * as _ from 'lodash'\n\nimport { Observable, empty, of } from 'rxjs'\nimport { map } from 'rxjs/operators'\n\nimport { Injectable } from '@angular/core'\n\nimport { camelCase }        from '@ceo/core'\n\nimport {\n  EntityRelationshipIdentifier,\n  EntityData,\n  EntityIdentifier,\n  EntityRelationship,\n  EntityRelationshipType,\n  EntityHasOneRelationship,\n  EntityHasManyRelationship,\n  EntityHasOneRelationshipType,\n  EntityHasManyRelationshipType,\n  EntityTypeIdentifier,\n  iDataService,\n  iDataServiceOpts,\n  iEntityRelationshipProvider,\n  iEntity,\n  iEntityRelationshipMapping,\n  iEntityCollection,\n} from '../interfaces/index'\n\nimport {\n  EntityCollection,\n} from '../classes/index'\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class EntityRelationshipProvider\n  implements iEntityRelationshipProvider {\n\n  private defaultDataServiceOpts: iDataServiceOpts = {\n    syncWithApi: false,\n  }\n\n  provide$(\n    dataService: iDataService,\n    entity: iEntity,\n    relationshipIdentifier: EntityRelationshipIdentifier,\n    opts: iDataServiceOpts = {},\n  ): Observable<EntityData> {\n\n    let relationship = this.relationshipData(entity, relationshipIdentifier)\n\n    if(!relationship) {\n      return of(<EntityData>null)\n    }\n\n    let relationshipType = this.relationshipType(relationship)\n\n    if(!relationshipType) {\n      return of(<EntityData>null)\n    }\n\n    return this.loadRelationshipData$(\n      dataService, entity, relationship, relationshipType, opts\n    )\n  }\n\n  private loadRelationshipData$(\n    dataService: iDataService,\n    entity: iEntity,\n    relationship: EntityRelationship,\n    relationshipType: EntityRelationshipType,\n    opts: iDataServiceOpts = {},\n  ): Observable<EntityData> {\n\n    var resourceType = ''\n    var prepareRelationship\n\n    if(relationshipType == EntityHasOneRelationshipType) {\n      resourceType = (<EntityHasOneRelationship> relationship).type\n      prepareRelationship = this.prepareHasOne\n    }\n\n    if(relationshipType == EntityHasManyRelationshipType) {\n      if(_.isEmpty(relationship)) {\n        resourceType = this.defaultRelationResourceType(entity)\n      }\n      else {\n        let firstRelationship = relationship[0]\n        resourceType = (firstRelationship).type || 'entity'\n      }\n\n      prepareRelationship = this.prepareHasMany\n    }\n\n    return this.loadResourceTypeData$(dataService, entity, resourceType, opts).pipe(\n      map(entities => prepareRelationship(relationship, entities))\n    )\n  }\n\n  private prepareHasMany(\n    relationship: EntityRelationship,\n    entities: iEntityCollection\n  ): iEntityCollection {\n\n    let ids = _.map(relationship, 'id')\n    return entities.where({id: ids})\n  }\n\n  private prepareHasOne(\n    relationship: EntityRelationship,\n    entities: iEntityCollection\n  ): iEntity {\n    return entities.find((<EntityHasOneRelationship> relationship).id)\n  }\n\n  private loadResourceTypeData$(\n    dataService: iDataService,\n    entity: iEntity,\n    resourceType: EntityTypeIdentifier,\n    opts: iDataServiceOpts = {},\n  ): Observable<iEntityCollection> {\n\n    let resourceOpts = {\n      feature: entity.feature,\n      type: resourceType,\n    }\n    return dataService.get$(resourceOpts, this.buildDataServiceOpts(opts))\n  }\n\n  private buildDataServiceOpts(\n    opts: iDataServiceOpts = {},\n  ) {\n    return _.defaults(opts, this.defaultDataServiceOpts)\n  }\n\n  private relationshipData(\n    entity: iEntity,\n    relationshipIdentifier: EntityRelationshipIdentifier\n  ): EntityRelationship {\n    if(entity && entity.relationships){\n      let wrappedData = entity.relationships[relationshipIdentifier]\n      if(wrappedData) {\n        return wrappedData.data\n      }\n      else {\n        return null\n      }\n    }\n    return null\n  }\n\n  private relationshipType(\n    relationship: EntityRelationship\n  ): EntityRelationshipType  | null {\n    if(_.has(relationship, 'id')) {\n      return EntityHasOneRelationshipType\n    }\n    if(relationship instanceof Array) {\n      return EntityHasManyRelationshipType\n    }\n    return null\n  }\n\n  private defaultRelationResourceType(entity: iEntity) {\n    switch(entity.feature) { \n      case 'app': {\n        return 'sunray-entities'\n      }\n      case 'cms': {\n        return 'wordpress-entities'\n      }\n      default: { \n        return 'sunray-entities'\n      }\n    }\n  }\n} \n","import * as _ from 'lodash'\n\nimport {\n  Observable,\n  pipe,\n} from 'rxjs'\n\nimport { map } from 'rxjs/operators'\n\nimport { Injectable } from '@angular/core'\n\nimport { Store }           from '@ngrx/store'\n\nimport {\n  FeatureIdentifier,\n  iEntityConfig,\n  iEntityTypeMap,\n  iEntity,\n  iEntityConstructor,\n  iEntityConstructorParams,\n  iFeatureConfig,\n  iFeatureMap,\n} from '../interfaces/index'\n\nimport {\n  entityFeatureSelectors,\n} from '../state/feature/selectors'\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class EntityTypeProviderService {\n  private _features$: Observable<iFeatureMap>\n\n  constructor(\n    protected store: Store<any>,\n  ) {}\n\n  provide$(\n    entityData: iEntityConstructorParams,\n  ): Observable<iEntityConstructor> {\n\n    return this.getFeature$(entityData.feature).pipe(\n      map(feature => this.getEntityType(feature, entityData)),\n    )\n  }\n\n  private getEntityType(\n    feature: iFeatureConfig,\n    entityData: iEntityConstructorParams\n  ): iEntityConstructor {\n\n    return this.getCustomEntityType(feature, entityData) ||\n      feature.baseEntityType\n  }\n\n  private getCustomEntityType(\n    feature: iFeatureConfig,\n    entityData: iEntityConstructorParams\n  ): iEntityConstructor {\n\n    return feature.entityTypeFromEntityData(entityData)\n  }\n\n  private getFeature$(\n    featureName: FeatureIdentifier\n  ): Observable<iFeatureConfig> {\n    return this.features$.pipe(\n      map(features => features[featureName] ),\n    )\n  }\n\n\n  // new stuff\n  private get features$(): Observable<iFeatureMap> {\n    if(!this._features$) {\n      this._features$ = this.buildFeatures$()\n    }\n\n    return this._features$\n  }\n\n  private buildFeatures$(): Observable<iFeatureMap> {\n    let features = this.store.select(entityFeatureSelectors.features)\n    return <Observable<iFeatureMap>>features\n  }\n}\n","// Builds Entity instances from raw (usually server-side) data.\n\nimport * as _ from 'lodash'\n\nimport {\n  Observable,\n} from 'rxjs'\n\nimport {\n  map,\n} from 'rxjs/operators'\n\nimport { Injectable, Inject } from '@angular/core'\n\nimport {\n  FeatureIdentifier,\n  iEntity,\n  iResourceIdentifier,\n  iEntityConstructorParams,\n  iEntityConstructor,\n} from '../interfaces/index'\n\nimport { EntityTypeProviderService }  from './entity-type-provider.service'\nimport { EntityRelationshipProvider } from './entity-relationship-provider.service'\n\n\n@Injectable()\nexport class EntityFactory {\n  constructor(\n    private entityTypeProvider: EntityTypeProviderService,\n    private relationshipProvider: EntityRelationshipProvider,\n  ) {}\n\n  build$(\n    entityData: iEntityConstructorParams,\n  ): Observable<iEntity> {\n    return this.getEntityType$(entityData).pipe(\n      map(entityType => new entityType(entityData)),\n    )\n  }\n\n  private getEntityType$(\n    entityData: iEntityConstructorParams,\n  ): Observable<iEntityConstructor> {\n    return this.entityTypeProvider.provide$(entityData)\n  }\n}\n","import * as _ from 'lodash'\n\nimport { Observable, of } from 'rxjs'\n\nimport {\n  map,\n} from 'rxjs/operators'\n\nimport { Injectable } from '@angular/core'\n\nimport { Store, createSelector } from '@ngrx/store'\n\nimport {\n  EntityActions,\n  JsonApiEntity,\n  EntityCollection,\n} from '../classes/index'\n\nimport {\n  EntityRelationshipIdentifier,\n  EntityData,\n  iEntity,\n  iResourceIdentifier,\n  iDataService,\n  iDataServiceOpts,\n  iEntityConstructorParams,\n  iEntitySelectorIdentifier,\n  EntitySelectorTypes,\n  iEntitySelectorTypes,\n} from '../interfaces/index'\n\nimport { EntityCloner }               from './entity-cloner.service'\nimport { EntitySelectorProvider }     from './selectors/index'\nimport { EntityRelationshipProvider } from './entity-relationship-provider.service'\nimport { EntityFactory              } from './entity-factory.service'\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DataService implements iDataService {\n  private defaultOpts: iDataServiceOpts = {\n    syncWithApi: true,\n    selectorOpts: {\n      selectorType: <keyof iEntitySelectorTypes>EntitySelectorTypes.All\n    }\n  }\n\n  constructor(\n    private store: Store<any>,\n    private selectorProvider: EntitySelectorProvider,\n    private entityRelationshipProvider: EntityRelationshipProvider,\n    private entityCloner: EntityCloner,\n    private entityFactory: EntityFactory,\n  ) { }\n\n  build$(\n    entityData: iEntityConstructorParams,\n  ): Observable<iEntity> {\n    return this.entityFactory.build$(entityData).pipe(\n      map(entity => this.decoratedData(entity) as iEntity)\n    )\n  }\n\n  create$(\n    ri: iResourceIdentifier,\n    opts: iDataServiceOpts = {}\n  ): Observable<any> {\n\n    let actionType = EntityActions.Add\n    return this.executeRequest$(ri, opts, actionType)\n  }\n\n  delete$(\n    ri: iResourceIdentifier,\n    opts: iDataServiceOpts = {}\n  ): Observable<any> {\n    let actionType = EntityActions.Delete\n    return this.executeRequest$(ri, opts, actionType)\n  }\n\n  get$(\n    ri: iResourceIdentifier,\n    opts: iDataServiceOpts = {}\n  ): Observable<any> {\n    let actionType = EntityActions.Load\n    return this.executeRequest$(ri, opts, actionType)\n  }\n\n  update$(ri: any, opts: iDataServiceOpts = {}) {\n    let actionType = EntityActions.Update\n    return this.executeRequest$(ri, opts, actionType)\n  }\n\n  relationship$(\n    entity: iEntity,\n    relationshipIdentifier: EntityRelationshipIdentifier,\n    opts: iDataServiceOpts = {}\n  ): Observable<EntityData> {\n    return this.entityRelationshipProvider.provide$(\n      this,\n      entity,\n      relationshipIdentifier,\n      opts,\n    )\n  }\n\n  // TODO: deprecate this method\n  get(\n    ri: iResourceIdentifier,\n    opts: iDataServiceOpts = {}\n  ): Observable<any> {\n    return this.get$(ri, opts)\n  }\n\n  private executeRequest$(\n    ri: iResourceIdentifier,\n    opts: iDataServiceOpts = {},\n    actionType: any\n  ): Observable<any> {\n\n    opts = _.defaults(opts, this.defaultOpts)\n\n    if(this.shouldDispatch(ri, opts)) {\n      let sliceName = this.getSliceName(ri)\n      let action = new actionType(sliceName, ri)\n      this.store.dispatch(action)\n    }\n\n    let selector = this.getSelector(ri, opts)\n\n    if(selector) {\n      return this.storeData$(selector, opts).pipe(\n        map(data => this.decoratedData(data)),\n      )\n    }\n    else {\n      return this.noData$()\n    }\n  }\n\n  private storeData$(\n    selector: any,\n    opts: iDataServiceOpts = {}\n  ): Observable<any> {\n\n    return this.store.select(selector)\n  }\n\n  private decoratedData(\n    data: EntityData\n  ): EntityData {\n\n    var buildDecoratedEntity = (entity: iEntity) => {\n      return this.entityCloner.clone(entity, this)\n    }\n\n    if(data) {\n      if(EntityCollection.prototype.isPrototypeOf(data)) {\n        let clonedEntities = data.map(buildDecoratedEntity)\n        let clonedCollection = new EntityCollection(clonedEntities)\n        return <EntityData>clonedCollection\n      }\n      if(JsonApiEntity.prototype.isPrototypeOf(data)) {\n        let clone = buildDecoratedEntity(<iEntity>data)\n        return <EntityData>clone\n      }\n    }\n\n    return data\n  }\n\n  private getSelector(\n    ri: iResourceIdentifier,\n    opts: iDataServiceOpts = {}\n  ): Observable<any> {\n\n    return this.selectorProvider.provide(ri, opts.selectorOpts)\n  }\n\n  private shouldDispatch(\n    ri: iResourceIdentifier,\n    opts: iDataServiceOpts = {}\n  ): boolean {\n    return opts.syncWithApi\n  }\n\n  private getSliceName(\n    ri: iResourceIdentifier,\n  ) {\n    return _.join([ri.feature, 'entities', ri.type], '.')\n  }\n\n  private noData$(): Observable<any> {\n    return of([])\n  }\n}\n","import * as _ from 'lodash'\n\nimport { Injectable } from '@angular/core'\n\nimport {\n  iEntityAttributeBuilder,\n  iEntityConstructorParams,\n} from '../../interfaces/index'\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AttributeBuilder implements iEntityAttributeBuilder {\n  build(params: any): iEntityConstructorParams {\n    return {\n      feature: params.feature,\n      type: params.type,\n      id: params.id,\n      attributes: _.omit(params, ['id', 'feature'])\n    }\n  }\n}\n","import * as _ from 'lodash'\n\nimport { Injectable } from '@angular/core'\n\nimport {\n  iEntityConstructorParams,\n  iEntityAttributeBuilder,\n} from '../../interfaces/index'\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class JsonApiAttributeBuilder implements iEntityAttributeBuilder {\n  build(params: any): iEntityConstructorParams {\n    let propNames = ['feature', 'type', 'id', 'attributes', 'relationships']\n    return <iEntityConstructorParams>_.pick(params, propNames)\n  }\n}\n","import { AttributeBuilder as EntityAttributeBuilder }               from './attribute-builder.service'\nimport { JsonApiAttributeBuilder as JsonApiEntityAttributeBuilder } from './json-api-attribute-builder.service'\n\nexport const services: any[] = [\n  EntityAttributeBuilder,\n  JsonApiEntityAttributeBuilder,\n]\n\nexport {\n  EntityAttributeBuilder,\n  JsonApiEntityAttributeBuilder,\n}\n","import * as _         from 'lodash'\n\nimport {\n  Observable,\n  of as observableOf,\n  pipe,\n  combineLatest,\n} from 'rxjs'\n\nimport { map, mergeMap } from 'rxjs/operators'\n\nimport { Injectable } from '@angular/core'\n\nimport {\n  ApiService,\n} from '@ceo/shared'\n\n\nimport {\n  FeatureIdentifier,\n  iApiResponse,\n  iEntity,\n  iEntityConstructorParams,\n  iEntityService,\n  iResourceIdentifier,\n} from '../interfaces/index'\n\nimport { EntityFactory } from './entity-factory.service'\nimport { EntityAttributeBuilder } from './attribute-builders/index'\n\n@Injectable()\nexport class EntityService implements iEntityService {\n  constructor(\n    public entityFactory: EntityFactory,\n    public apiService: ApiService,\n    public attributeBuilder: EntityAttributeBuilder,\n  ) {}\n\n  create$(...args) {\n    return this.apiEntityRequest$('create$', ...args)\n  }\n\n  post$(...args) {\n    return this.apiEntityRequest$('post$', ...args)\n  }\n\n  delete$(...args) {\n    return this.apiEntityRequest$('delete$', ...args)\n  }\n\n  get$(...args) {\n    return this.apiEntityRequest$('get$', ...args)\n  }\n\n  update$(...args) {\n    return this.apiEntityRequest$('update$', ...args)\n  }\n\n  private apiEntityRequest$(action: string, ...args) {\n    return this.entityData$((<any>this.apiService)[action](...args))\n  }\n\n  private entityData$(apiData$: Observable<iApiResponse>) {\n    return apiData$.pipe(\n      mergeMap(apiResponse => this.buildEntityData$(apiResponse)),\n    )\n  }\n\n  private buildEntityData$(\n    apiResponse: iApiResponse\n  ): Observable<any> {\n    return this.buildEntities$(apiResponse).pipe(\n      map(entities => {\n        return {\n          data: entities,\n          resourceIdentifier: apiResponse.resourceIdentifier,\n        }\n      })\n    )\n  }\n\n  private buildEntities$(apiResponse: iApiResponse): Observable<any[]> {\n    var resourceIdentifier = apiResponse.resourceIdentifier\n    var apiData = apiResponse.data\n    var featureName = resourceIdentifier.feature\n\n    let buildEntity$ = _.bind(_.partial(this.buildEntity$, featureName), this)\n    let observables = _.map(apiData, buildEntity$)\n    return combineLatest(observables)\n  }\n\n  private buildEntity$(\n    featureName: FeatureIdentifier,\n    entityData: iEntityConstructorParams,\n  ): Observable<iEntity> {\n    let featureData = {\n      feature: featureName\n    }\n    _.defaults(entityData, featureData)\n    let data = this.attributeBuilder.build(entityData)\n    return this.entityFactory.build$(data)\n  }\n}\n","import { Action } from '@ngrx/store'\n\nimport { PayloadAction } from '@ceo/state'\n\nexport enum EntityConfigActionTypes {\n  SET_PRIMARY_ENTITY = 'SET_PRIMARY_ENTITY',\n}\n\nexport class SetPrimaryEntity extends PayloadAction {\n  readonly type = EntityConfigActionTypes.SET_PRIMARY_ENTITY\n  constructor(public slice: string, public payload: any) {\n    super(slice)\n  }\n}\n\nexport type EntityConfigActionsUnion =\n  SetPrimaryEntity\n","import { Observable, of, defer } from 'rxjs'\n\nimport { Injectable } from '@angular/core'\n\nimport { Store, Action }    from '@ngrx/store'\nimport { Actions, Effect, ofType } from '@ngrx/effects'\n\n\n@Injectable()\nexport class EntityConfigEffects {\n  constructor(\n    private store: Store<any>,\n    private actions$: Actions<any>,\n  ) {}\n\n\n  @Effect()\n  init$: Observable<Action> =\n    defer(() => {})\n}\n","import {\n  iEntityConfigState,\n  iPrimaryEntityState,\n} from './state'\n\nexport var configInitialState: iPrimaryEntityState = {\n  primaryEntity: {\n    feature: \"\",\n    type: \"\",\n    id: \"\",\n  }\n}\n","import * as _ from 'lodash'\n\nimport {\n  EntityConfigActionTypes,\n  EntityConfigActionsUnion,\n} from './actions'\n\nimport {\n  iEntityConfigState\n} from './state'\n\nexport function entityConfigReducer(\n  state: iEntityConfigState,\n  action: EntityConfigActionsUnion\n): iEntityConfigState {\n  var deltaState = {}\n\n  switch (action.type) {\n    case EntityConfigActionTypes.SET_PRIMARY_ENTITY:\n      deltaState = {\n       primaryEntity: _.omit(action.payload, 'feature'),\n      }\n      return _.assign({}, state, deltaState)\n    default:\n      return state\n  }\n}\n","import * as _ from 'lodash'\n\nimport { \n  createFeatureSelector, createSelector,\n  MemoizedSelector\n} from '@ngrx/store'\n\nimport { iEntityConfigState } from './state'\n\nexport const selectAppFeature  = createFeatureSelector<any>('app')\n\n/*\nlet selectPrimaryEntity = (state: iEntityConfigState) => {\n  return state.entity.primaryEntity\n}\nexport const selectEntityPrimaryEntity = createSelector(\n  selectAppFeature,\n  selectPrimaryEntity,\n  (appFeature: any, primaryEntity: any) => {\n    if(_.isEmpty(primaryEntity)) { \n      return null\n    }\n    else {\n      let type = primaryEntity.type\n      let id = primaryEntity.id\n      return appFeature.entities[type].entities[id]\n    }\n  }\n)\n\nexport const entityConfigSelectors = {\n  primaryEntity: selectEntityPrimaryEntity,\n}\n*/\n","export enum ActionTypes {\n  ADD_FEATURE = '[EntityFeature] ADD_FEATURE',\n  LOAD_PRIMARY_ENTITY = '[EntityFeature] LOAD_PRIMARY_ENTITY',\n  REGISTER_FEATURE = '[EntityFeature] REGISTER_FEATURE',\n  SELECT_PRIMARY_ENTITY = '[EntityFeature] SELECT_PRIMARY_ENTITY',\n  SET_PRIMARY_ENTITY = '[EntityFeature] SET_PRIMARY_ENTITY',\n  SET_PRIMARY_ENTITY_IDENTIFIER = '[EntityFeature] SET_PRIMARY_ENTITY_IDENTIFIER',\n}\n","import { Action } from '@ngrx/store'\n\nimport {\n  PayloadAction,\n} from '@ceo/state'\n\nimport { ActionTypes } from './action-types'\n\nexport class AddFeature extends PayloadAction {\n  readonly type = ActionTypes.ADD_FEATURE\n}\n\nexport class LoadPrimaryEntity extends PayloadAction {\n  readonly type = ActionTypes.LOAD_PRIMARY_ENTITY\n}\n\nexport class RegisterFeature extends PayloadAction {\n  readonly type = ActionTypes.REGISTER_FEATURE\n}\n\nexport class SelectPrimaryEntity implements Action {\n  readonly type = ActionTypes.SELECT_PRIMARY_ENTITY\n}\n\nexport class SetPrimaryEntity extends PayloadAction {\n  readonly type = ActionTypes.SET_PRIMARY_ENTITY\n}\n\nexport class SetPrimaryEntityIdentifier extends PayloadAction {\n  readonly type = ActionTypes.SET_PRIMARY_ENTITY_IDENTIFIER\n}\n","import * as _ from 'lodash'\n\nimport {\n  Observable,\n  of as observableOf,\n  combineLatest,\n} from 'rxjs'\n\nimport {\n  mergeMap,\n  map,\n} from 'rxjs/operators'\n\nimport { Injectable } from '@angular/core'\n\nimport { Store } from '@ngrx/store'\n\nimport {\n  InflectionService,\n} from '@ceo/core'\n\nimport {\n  iRouterStateUrl,\n} from '@ceo/state'\n\nimport {\n  UrlSlug,\n} from '@ceo/shared'\n\nimport {\n  JsonApiEntity,\n  EntityCollection,\n} from '../classes/index'\n\nimport {\n  entityFeatureSelectors,\n} from '../state/feature/selectors'\n\n\nimport {\n  iEntityCollection,\n  iFeature,\n  iFeatureMap,\n  iResourceIdentifier,\n} from '../interfaces/index'\n\nimport { DataService } from './data.service'\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RouteEntityTypeProvider {\n  private _features$: Observable<iFeatureMap>\n\n  constructor(\n    protected store: Store<any>,\n    protected dataService: DataService,\n    protected inflectionService: InflectionService,\n  ) {}\n\n  handleRouterNavigation$(\n    routerState: iRouterStateUrl\n  ): Observable<iResourceIdentifier> {\n\n    return this.features$.pipe(\n      mergeMap(features => this.featureRoutableEntities$(features)),\n      map(collection => {\n        return this.resourceIdentifierFromRouterState(collection, routerState)\n      }),\n    )\n  }\n\n  private resourceIdentifierFromRouterState(\n    collection: any,\n    routerState: iRouterStateUrl\n  ): iResourceIdentifier {\n\n    let entityTypeSlug = this.entityTypeSlugFromRouterState(routerState)\n    if(entityTypeSlug) {\n\n      let entity = collection.findByAttr('urlSlug', entityTypeSlug)\n      if(entity) {\n\n        let routerStateOpts =\n          this.resourceIdentifierOptsFromRouterState(entity, routerState)\n\n        return _.merge({}, entity.resourceIdentifier, routerStateOpts)\n      }\n      else {\n        return null\n      }\n    }\n    else {\n      return null\n    }\n  }\n\n  private resourceIdentifierOptsFromRouterState(entity, routerState) {\n    let params = routerState.params\n    let ri = <iResourceIdentifier>{}\n\n    let isPrimaryKey = (value, prop) => {\n      return _.includes(entity.primaryKeys, prop)\n    }\n\n    let idKey = _.pickBy(params, isPrimaryKey) \n    if(idKey) {\n      ri.id = _.head(_.values(idKey))\n    }\n\n    let filter = _.omit(params, _.keys(idKey))\n    if(!_.isEmpty(filter)) {\n      ri.filter = filter\n    }\n\n    return ri\n  }\n\n  private entityTypeSlugFromRouterState(\n    routerState: iRouterStateUrl\n  ): UrlSlug {\n    let segments = _.map(routerState.segments, 'path')\n\n    if(_.head(segments) == 'app') {\n      segments = _.drop(segments)\n    }\n\n    let params = _.values(routerState.params)\n\n\n    let segmentsWithoutParam = (segments, param) => {\n      if(_.last(segments) == param) {\n        return _.dropRight(segments)\n      }\n      else {\n        return segments\n      }\n\n    }\n    let finalSegments = _.reduce(params, segmentsWithoutParam, segments)\n\n    return finalSegments[0]\n  }\n\n  private featureRoutableEntities$(features) {\n    let getRoutableEntities = _.bind(this.getRoutableEntities, this)\n    let routableEntities = _.map(features, getRoutableEntities)\n\n    return combineLatest(routableEntities).pipe(\n      map(routableEntityCollections => {\n        let entities = _.flatten(_.map(routableEntityCollections, 'entities'))\n        return new EntityCollection(entities)\n      }),\n    )\n  }\n\n  private getRoutableEntities(feature, featureName) {\n    return this.resourceConfigurations$(feature).pipe(\n      map(collection => this.routableResourceConfigurations(collection)),\n      map(collection => this.buildResourceIdentifiers(feature, collection)),\n    )\n  }\n\n  private routableResourceConfigurations(\n    collection: iEntityCollection\n  ): iEntityCollection {\n    return collection.where({isRoutable: true})\n  }\n\n  private resourceConfigurations$(feature) {\n    let ri = {\n      feature: feature.name,\n      type: 'resource-configurations',\n    }\n    let dataOpts = {\n      syncWithApi: false,\n    }\n\n    return this.dataService.get$(ri, dataOpts)\n  }\n\n  private buildResourceIdentifiers(feature, collection) {\n    let buildResourceIdentifier = (entity) => {\n      let ri = {\n        feature: feature.name,\n        type: entity.resourceType,\n      }\n\n      let attributes = {\n        resourceIdentifier: ri,\n        urlSlug: entity.displaySlug,\n        primaryKeys: entity.primaryKeys\n      }\n\n      let data = {\n        id: entity.id,\n        type: 'resource-identifiers',\n        attributes: attributes,\n      }\n      return new JsonApiEntity(data)\n    }\n    let entities = _.map(collection.entities, buildResourceIdentifier)\n    return new EntityCollection(entities)\n  }\n\n  private get features$(): Observable<iFeatureMap> {\n    if(!this._features$) {\n      this._features$ = this.getFeatures$()\n    }\n\n    return this._features$\n  }\n\n  private getFeatures$(): Observable<iFeatureMap> {\n    return <Observable<iFeatureMap>>this.store.select(entityFeatureSelectors.features)\n  }\n\n\n}\n","import * as _ from 'lodash'\n\nimport { Injectable } from '@angular/core'\n\nimport {\n  InflectionService,\n}   from '@ceo/core'\n\nimport {\n  iResourceIdentifier,\n} from '../interfaces/index'\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ResourceIdentifierService {\n  constructor(\n    private inflectionService: InflectionService,\n  ) {}\n\n  isValid(ri: iResourceIdentifier): boolean {\n    return _.has(ri, 'feature') && _.has(ri, 'type')\n  }\n\n  isScope(ri: iResourceIdentifier): boolean {\n    return _.has(ri, 'filter.scope')\n  }\n\n  isSameResource(\n    riOne: iResourceIdentifier,\n    riTwo: iResourceIdentifier,\n  ): boolean {\n    return _.isEqual(riOne, riTwo)\n  }\n\n  scopeName(ri: iResourceIdentifier): string {\n    let scopeKey = _.get(ri, 'filter.scope')\n    return this.inflectionService.camelCase(scopeKey)\n  }\n}\n","import * as _ from 'lodash'\n\nimport {\n  Observable,\n  defer,\n  of as observableOf,\n} from 'rxjs'\n\nimport {\n  map,\n  tap,\n  mergeMap,\n  switchMap,\n  distinctUntilChanged,\n} from 'rxjs/operators'\n\nimport { Injectable } from '@angular/core'\n\nimport {\n  Store, Action,\n  createSelector,\n} from '@ngrx/store'\n\nimport { Actions, Effect, ofType, }  from '@ngrx/effects'\n\nimport { ROUTER_NAVIGATION } from '@ngrx/router-store'\n\nimport {\n  FeatureActions,\n} from './actions/index'\n\nimport {\n  EntityActions,\n} from '../../classes/index'\n\nimport {\n  DataService,\n} from '../../services/data.service'\n\nimport {\n  RouteEntityTypeProvider,\n} from '../../services/route-entity-type-provider.service'\n\nimport {\n  ResourceIdentifierService,\n} from '../../services/resource-identifier.service'\n\nimport {\n  SelectorProvider,\n} from '../../services/selectors/selector-provider.service'\n\nimport {\n  entityFeatureSelectors,\n} from './selectors'\n\n@Injectable()\nexport class FeatureEffects {\n  constructor(\n    private store: Store<any>,\n    private actions$: Actions<any>,\n    protected dataService: DataService,\n    protected routeEntityTypeProvider: RouteEntityTypeProvider,\n    protected resourceIdentifierService: ResourceIdentifierService,\n    protected selectorProvider: SelectorProvider,\n  ) {}\n\n  @Effect()\n  handleRouterNavigation$: Observable<Action> =\n    this.actions$\n      .pipe(\n        ofType(ROUTER_NAVIGATION),\n        mergeMap((action: any) => {\n          return this.routeEntityTypeProvider\n            .handleRouterNavigation$(action.payload.routerState)\n        }),\n        distinctUntilChanged(this.resourceIdentifierService.isSameResource),\n        tap((payload: any) => {\n          if(this.resourceIdentifierService.isValid(payload)) {\n            this.dataService.get$(payload)\n          }\n        }),\n        map((payload: any) => {\n          return new FeatureActions.SetPrimaryEntityIdentifier(payload)\n        }),\n      )\n\n  @Effect()\n  registerFeature$: Observable<Action> =\n    this.actions$\n      .pipe(\n        ofType('[EntityFeature] REGISTER_FEATURE'),\n        map((action: any) => {\n          let feature = action.payload\n          let addFeatureAction = new FeatureActions.AddFeature(feature)\n          return addFeatureAction\n        })\n      )\n\n  @Effect()\n  loadPrimaryEntity$: Observable<Action> =\n    this.actions$\n      .pipe(\n        ofType('[EntityFeature] LOAD_PRIMARY_ENTITY'),\n        mergeMap((action: any) => {\n          return this.dataService.get$(action.payload)\n        }),\n      )\n\n  @Effect()\n  selectPrimaryEntity$: Observable<Action> =\n    this.actions$\n      .pipe(\n        ofType('[EntityFeature] SELECT_PRIMARY_ENTITY'),\n        mergeMap((action: any) => {\n          return this.store.select(entityFeatureSelectors.primaryEntityIdentifier)\n        }),\n        distinctUntilChanged(this.resourceIdentifierService.isSameResource),\n        mergeMap((payload: any) => {\n          if(_.isNil(payload)) {\n            return observableOf(null)\n          }\n          else {\n            let selector = this.selectorProvider.provide(payload)\n            return this.store.select(<any>selector)\n          }\n        }),\n        map((payload: any) => {\n          return new FeatureActions.SetPrimaryEntity(payload)\n        })\n      )\n\n  @Effect()\n  init$: Observable<Action> =\n    defer(() => {\n      return observableOf(new FeatureActions.SelectPrimaryEntity())\n    })\n}\n","import { iFeatureState } from './state'\n\nexport const featureInitialState: iFeatureState = {\n  features: {},\n  primaryEntity: {\n    resourceIdentifier: null,\n    entity: null\n  }\n}\n","import * as _ from 'lodash'\n\nimport {\n  FeatureActionsUnion,\n} from './actions/index'\n\nimport {\n  iFeatureState\n} from './state'\n\nexport function featureReducer(\n  state: iFeatureState,\n  action: FeatureActionsUnion\n): iFeatureState {\n\n  var stateDelta = <any> {}\n\n  switch (action.type) {\n    case '[EntityFeature] ADD_FEATURE':\n\n      let existingFeatures = state.features\n      let newFeature = action.payload\n\n      let featuresDelta = {}\n      featuresDelta[newFeature.name] = newFeature\n      let newFeatures = Object.assign({}, existingFeatures, featuresDelta)\n\n      stateDelta = <any> {\n        features: newFeatures\n      }\n\n      break\n\n    case '[EntityFeature] SET_PRIMARY_ENTITY':\n      stateDelta = {\n        primaryEntity: _.cloneDeep(state.primaryEntity)\n      }\n\n      stateDelta.primaryEntity.entity = action.payload\n\n      break\n\n    case '[EntityFeature] SET_PRIMARY_ENTITY_IDENTIFIER':\n      stateDelta = {\n        primaryEntity: _.cloneDeep(state.primaryEntity)\n      }\n\n      stateDelta.primaryEntity.resourceIdentifier = action.payload\n     \n      break\n\n    default:\n      break\n  }\n\n  return Object.assign({}, state, stateDelta)\n}\n","import {\n  FeatureEffects,\n  featureInitialState as initialState,\n  featureReducer as reducer,\n} from './feature/index'\n\nexport {\n  featureInitialState as initialState,\n  featureReducer as reducer,\n} from './feature/index'\n\nexport const effects: any[] = [\n  FeatureEffects,\n]\n","import { InjectionToken } from '@angular/core'\n\nexport const FEATURE_CONFIG = new InjectionToken<any>(\"Entity Feature Config\")\n","import * as _ from 'lodash'\n\nimport {\n  Observable,\n  of as observableOf,\n  defer,\n  combineLatest,\n} from 'rxjs'\n\nimport {\n  switchMap,\n  catchError, map, mergeMap,\n  flatMap, filter, tap,\n  exhaustMap,\n} from 'rxjs/operators'\n\nimport { Injectable, Inject } from '@angular/core'\n\n// @ngrx imports\nimport { Store, Action }           from '@ngrx/store'\nimport {\n  Actions, Effect,\n  ofType, OnIdentifyEffects,\n  OnInitEffects, OnRunEffects,\n  EffectNotification,\n} from '@ngrx/effects'\n\nimport {\n  typeFor, PayloadAction,\n  applicationConfigSelectors, ApplicationConfigActions,\n  systemComponentsSelectors, SystemComponentsActions,\n} from '@ceo/state'\n\nimport { EntityService }                       from './entity.service'\n\nimport {\n  FeatureActions,\n} from '../state/index'\n\nimport {\n  EntityActions,\n  EntityActionsMap,\n} from '../classes/index'\n\nimport {\n  EntityConfigActions,\n} from '../state/index'\n\nimport {\n  iEntityConstructor,\n  iApiResponse,\n  iEntitySliceNamePayload,\n  iResourceIdentifier,\n  iEntityCollection,\n  iEntityMap,\n} from '../interfaces/index'\n\nimport {\n  FEATURE_CONFIG,\n} from '../util/tokens'\n\nimport { ResourceIdentifierService } from './resource-identifier.service'\n\n@Injectable()\nexport class EntityEffects\n  implements OnIdentifyEffects, OnInitEffects {\n\n  featureName: string = 'Feature'\n\n  constructor(\n    protected store: Store<any>,\n    protected actions$: Actions<any>,\n    protected entityService: EntityService,\n    @Inject(FEATURE_CONFIG) protected featureConfig,\n    protected resourceIdentifierService: ResourceIdentifierService\n  ) {\n    this.featureName = featureConfig.name\n  }\n\n  @Effect()\n  init$: Observable<Action> =\n    this.actions$\n      .pipe(\n        ofType(this.featureAction(\"INIT\")),\n        switchMap((action: PayloadAction) => {\n          let registerFeatureAction = new FeatureActions.RegisterFeature(this.featureConfig)\n          let loadSeedAction = new EntityActions.LoadSeedData(this.featureName, this.featureConfig)\n          return [registerFeatureAction, loadSeedAction]\n        }),\n      )\n\n  @Effect()\n  seed$: Observable<Action> =\n    this.actions$\n      .pipe(\n        ofType(this.featureAction(\"LOAD_SEED_DATA\")),\n        switchMap((action: PayloadAction) => {\n          var feature = action.payload\n          let seeds = action.payload.seedEntities\n\n          let buildLoadAction = (ri: iResourceIdentifier) => {\n            let sliceName = this.getFeatureEntitySlice(feature.name, ri.type)\n            return new EntityActions.Load(sliceName, ri)\n          }\n\n          return _.map(seeds, buildLoadAction)\n        }),\n      )\n\n  @Effect()\n  load$: Observable<Action> =\n    this.actions$\n     .pipe(\n       ofType(...this.sliceActions(\"LOAD\")),\n       mergeMap((action: PayloadAction) => {\n         let resourceOpts = this.buildResourceOpts(action)\n         return this.entityService.get$(resourceOpts)\n       }),\n       map((payload: iApiResponse) => {\n         return new EntityActions.AsyncSuccess(this.featureName, payload)\n       })\n     )\n\n  @Effect()\n  add$: Observable<Action> =\n    this.actions$\n      .pipe(\n        ofType(...this.sliceActions(\"ADD\")),\n        mergeMap((action: PayloadAction) => {\n          let resourceOpts = this.buildResourceOpts(action)\n          return this.entityService.create$(resourceOpts)\n        }),\n        map((payload: iApiResponse) => {\n          return new EntityActions.AsyncSuccess(this.featureName, payload)\n        })\n      )\n\n  @Effect()\n  update$: Observable<Action> =\n    this.actions$\n      .pipe(\n        ofType(...this.sliceActions(\"UPDATE\")),\n        mergeMap((action: PayloadAction) => {\n          let resourceOpts = this.buildResourceOpts(action)\n          return this.entityService.update$(resourceOpts)\n        }),\n        map((payload: iApiResponse) => {\n          return new EntityActions.AsyncSuccess(this.featureName, payload)\n        }),\n      )\n\n  @Effect()\n  asyncSuccess$: Observable<Action> =\n    this.actions$\n      .pipe(\n        ofType(this.featureAction(\"ASYNC_SUCCESS\")),\n        map((action: PayloadAction) => {\n          return {\n            resourceIdentifier: action.payload.resourceIdentifier,\n            data: this.groupedEntities(action.payload),\n          }\n        }),\n        switchMap((payload: any) => {\n          return this.buildAddToStoreActions(payload)\n        })\n      )\n\n  @Effect()\n  delete$: Observable<Action> =\n    this.actions$\n      .pipe(\n        ofType(...this.sliceActions(\"DELETE\")),\n        mergeMap((action: PayloadAction) => {\n          let resourceOpts = this.buildResourceOpts(action)\n          return this.entityService.delete$(resourceOpts)\n        }),\n        map((payload: iApiResponse) => {\n          return new EntityActions.DeleteSuccess(\n            this.getEntitySlice(payload.resourceIdentifier.type),\n            payload.data\n          )\n        })\n      )\n\n  @Effect()\n  loadApplicationResource$: Observable<Action> =\n    this.actions$\n      .pipe(\n        ofType('[ApplicationConfig] LOAD_RESOURCE_BY_ID'),\n        mergeMap(() => {\n          return this.store.select(applicationConfigSelectors.resourceById)\n        }),\n        filter((payload) => this.isValidPayload(payload)),\n        mergeMap((payload) => {\n          return this.entityService.get$(payload)\n        }),\n        filter((payload) => this.isValidResource(payload)),\n        map((payload: any) => {\n          return new ApplicationConfigActions.SetPrimaryEntity(payload)\n        })\n      )\n\n\n  ngrxOnIdentifyEffects() {\n    return this.featureName\n  }\n\n  ngrxOnInitEffects(): Action {\n    let initFeatureAction = new EntityActions.Init(this.featureName, this.featureConfig)\n    return initFeatureAction\n  }\n\n  // Private methods\n\n  private buildAddToStoreActions(payload) {\n    let actions = []\n    let addActions = _.map(payload.data, _.bind(this.buildAddEntitiesAction, this))\n    actions = actions.concat(addActions)\n\n    if(this.resourceIdentifierService.isScope(payload.resourceIdentifier)) {\n      let scopeAction = this.buildAddScopeEntitiesAction(payload)\n      actions = actions.concat([scopeAction])\n    }\n\n    return _.flatten(actions)\n  }\n\n  private buildAddEntitiesAction(payload: iEntitySliceNamePayload) {\n    return new EntityActions.AddStoreEntities(\n      this.getEntitySlice(payload.sliceName),\n      payload.entities,\n    )\n  }\n\n  private buildAddScopeEntitiesAction(payload: any) {\n    let ri = payload.resourceIdentifier\n    let scopeName = this.resourceIdentifierService.scopeName(ri)\n\n    var sliceName = ri.type\n    let hasEntityType = (payload: iEntitySliceNamePayload): boolean => {\n      return payload.sliceName == sliceName\n    }\n\n    let sliceNamePayload = _.find(payload.data, hasEntityType)\n    let entities = sliceNamePayload.entities\n\n    let actionPayload = {\n      scope: scopeName,\n      entities: entities\n    }\n\n    return new EntityActions.SetScopeEntities(\n      this.getEntitySlice(sliceName),\n      actionPayload,\n    )\n  }\n\n  private groupedEntities(payload: iApiResponse): iEntitySliceNamePayload[] {\n    let entities = payload.data\n\n    let groupedBySlice = (entityTypeMap, entity) => {\n      let sliceName = entity.constructor.sliceName\n      var entities = []\n      if(entityTypeMap[sliceName]) {\n        entities = entityTypeMap[sliceName].entities\n      }\n      entities.push(entity)\n      entityTypeMap[sliceName] = {\n        sliceName: sliceName,\n        entities: entities\n      }\n\n      return entityTypeMap\n    }\n\n    return  _.values(_.reduce(entities, groupedBySlice, {}))\n  }\n\n\n  private isValidPayload(payload) {\n    //TODO: @Deepak  - it should ensure the payload is for THIS feature\n    return _.has(payload, 'feature') &&\n    _.has(payload, 'type') &&\n    _.has(payload, 'id')\n  }\n\n  private isValidResource(payload) {\n    return payload\n  }\n\n  private buildResourceOpts(action) {\n    let ri = {\n      type: _.last(_.split(action.slice, \".\"))\n    }\n    ri = _.merge({}, ri, action.payload)\n\n    return {\n      payload: action.payload,\n      type: _.last(_.split(action.slice, \".\")),\n      data: action.payload.data,\n      resourceIdentifier: ri,\n    }\n  }\n\n  private featureAction(actionName) {\n    let featureName = this.featureConfig.name\n    return typeFor(featureName, EntityActionsMap[actionName])\n  }\n\n  private sliceActions(actionName) {\n    let buildActionType = (sliceName) => {\n      return typeFor(sliceName, EntityActionsMap[actionName])\n    }\n    let sliceActions = _.map(this.featureConfig.sliceNames, buildActionType)\n    return sliceActions\n  }\n\n  private getSliceName(resourceOpts) {\n    return _.join([resourceOpts.feature, 'entities', resourceOpts.type], '.')\n  }\n\n  private getEntitySlice(sliceName) {\n    return this.getFeatureEntitySlice(this.featureName, sliceName)\n  }\n\n  private getFeatureEntitySlice(featureName, sliceName) {\n    return _.join([featureName,'entities', sliceName], '.')\n  }\n}\n","import { DataService }                  from './data.service'\nimport { EntityCloner }                 from './entity-cloner.service'\nimport { EntityEffects }                from './entity.effects'\nimport { EntityFactory }                from './entity-factory.service'\nimport { EntityService }                from './entity.service'\nimport { EntityRelationshipProvider }   from './entity-relationship-provider.service'\nimport { EntityTypeProviderService }    from './entity-type-provider.service'\nimport { ResourceIdentifierService }    from './resource-identifier.service'\nimport { RouteEntityTypeProvider }      from './route-entity-type-provider.service'\nimport { DataService as EntityDataService }              from './data.service'\n\nimport * as attributeBuilders from './attribute-builders/index'\nimport * as selectors         from './selectors/index'\n\nexport const entityServices: any[] = [\n  DataService,\n  EntityCloner,\n  EntityEffects,\n  EntityFactory,\n  EntityRelationshipProvider,\n  EntityService,\n  EntityTypeProviderService,\n  ResourceIdentifierService,\n  RouteEntityTypeProvider,\n  EntityDataService,\n  ...attributeBuilders.services,\n  ...selectors.services,\n]\n\nexport { DataService }\nexport { EntityCloner }\nexport { EntityDataService }\nexport { EntityEffects }\nexport { EntityFactory }\nexport { EntityService }\nexport { EntityRelationshipProvider }\nexport { EntityTypeProviderService }\nexport { ResourceIdentifierService }\nexport { RouteEntityTypeProvider }\n\nexport {\n  EntityAttributeBuilder,\n  JsonApiEntityAttributeBuilder,\n} from './attribute-builders/index'\n\nexport {\n  EntitySelectorNameService,\n  EntitySelectorService,\n  EntitySelectorProvider,\n} from './selectors/index'\n","import {\n  EntityEffects,\n  RouteEntityTypeProvider,\n  ResourceIdentifierService,\n} from '../../../services/index'\n\nexport const buildEntityEffects = (\n  store,\n  actions,\n  entityService,\n  featureConfig,\n  resourceIdentifierService,\n) => {\n\n  return new EntityEffects(\n    store,\n    actions,\n    entityService,\n    featureConfig,\n    resourceIdentifierService,\n  )\n}\n","import * as _ from 'lodash'\n\nimport { iEntityConfig } from '../../../interfaces'\n\nlet buildEntityConfig  = (\n  apiConfig,\n  defaultEntityConfigClass,\n  params,\n): iEntityConfig  => {\n\n  let configClass =\n    _.get(params, 'entityConfigClass', defaultEntityConfigClass)\n\n  let configParams = _.merge(\n    _.omit(params, ['entityConfigClass']),\n    {apiConfig: apiConfig}\n  )\n\n  return new configClass(configParams)\n}\n\nexport const buildEntityConfigs = (\n  entityConfigParams,\n  apiConfig,\n  defaultEntityConfigClass,\n) => {\n  let build =\n    _.partial(buildEntityConfig, apiConfig, defaultEntityConfigClass)\n\n  return _.map(\n    _.sortBy(entityConfigParams, 'type'),\n    build\n  )\n}\n","import { createEntityAdapter }  from '@ngrx/entity';\n\nimport {\n  iEntity,\n} from '../../../interfaces/index'\n\nexport function buildEntityInitialState(entityType): any {\n  let createInitialStateForEntityType = (name) => {\n    let prop = {};\n    let initialState = createEntityAdapter<iEntity>().getInitialState();\n    let customInitialState = {\n      selectedEntityId: null,\n      config: {\n        entityType: entityType\n      },\n      scopes: {\n      },\n    }\n    initialState =\n      Object.assign(\n        {},\n        initialState,\n        customInitialState,\n        entityType.config.initialState\n      )\n    prop[name] = initialState\n    return prop;\n  }\n\n  let sliceName = entityType.sliceName;\n  return createInitialStateForEntityType(sliceName);\n}\n","import {\n  EntityService,\n} from '../../../services/index'\n\nexport function buildEntityService(\n  entityFactory,\n  apiService,\n  attributeBuilder,\n): any {\n\n  return new EntityService(entityFactory, apiService, attributeBuilder)\n}\n","import { EntityTypeProviderService } from '../../../services';\n\nexport const buildEntityTypeProvider = (featureConfig) => {\n  return new EntityTypeProviderService(featureConfig)\n}\n","import * as _ from 'lodash';\n\nimport { classify } from '@ceo/core';\n\nlet buildEntityTypeClass = (entityConfig, baseEntity) => {\n  class Entity extends baseEntity {\n    static _sliceName: string = entityConfig.name;\n    static config: any = entityConfig;\n  }\n\n  return Entity;\n}\n\nexport function buildEntityTypes(\n  entityConfigs,\n  baseEntity\n) {\n\n  let addEntityType = (entityTypes, entityConfig) => {\n    let className = classify(entityConfig.name)\n    let entityTypeClass = buildEntityTypeClass(entityConfig, baseEntity)\n    entityTypes[className] = entityTypeClass\n    return entityTypes\n  }\n\n  return _.reduce(entityConfigs, addEntityType, {});\n}\n","import {\n  FeatureConfig,\n} from '../../../classes/index'\n\nexport function buildFeatureConfig(config): any {\n  return new FeatureConfig(config)\n}\n","import * as _ from 'lodash'\n\nimport {\n  FeatureConfig,\n} from '../../../classes/index'\n\nimport { buildEntityInitialState } from '../entity/index'\n\nexport function buildFeatureInitialState(config): any {\n  let featureConfig = new FeatureConfig(config)\n\n  let entityTypes = featureConfig.entityTypes;\n  let entityStates = _.reduce(\n    _.map(entityTypes, buildEntityInitialState),\n    _.merge,\n    {}\n  );\n\n  return {\n    entities: entityStates\n  }\n}\n","import * as _ from 'lodash'\n\nimport { pipe } from 'rxjs'\nimport { filter } from 'rxjs/operators'\n\nimport {\n  select,\n  createSelector,\n  compose,\n  ActionReducer,\n  createFeatureSelector,\n  combineReducers,\n} from '@ngrx/store'\n\nimport {\n  iEntityState,\n  iEntity,\n  iEntityCollection,\n  iEntityConfig\n} from '../../../interfaces'\n\nimport {\n  EntityAdapterFactory,\n} from '../../../classes'\n\nimport {\n  entityConfigReducer,\n} from '../../../state'\n\nimport {\n  buildEntitySelectors,\n  buildRootSelector,\n  buildSliceSelector,\n  buildFeatureSelector,\n} from '../selectors/index'\n\nexport function buildFeatureReducer(\n  featureConfig,\n  selectorService,\n  selectorNameService,\n  buildCustomSelectors,\n): ActionReducer<any> {\n\n  let factory = new EntityAdapterFactory(featureConfig)\n  let entityAdapters = factory.adapters\n\n  buildFeatureSelector(\n    featureConfig,\n    entityAdapters,\n    selectorService,\n    selectorNameService,\n    buildCustomSelectors,\n  )\n\n  var featureEntitiesReducerPrefix = _.join([featureConfig.name, 'entities'], '.')\n\n  var entityReducers = _.reduce(_.map(entityAdapters, buildEntityReducer), _.merge, {})\n\n  // @Luis: action should not be any\n  let featureEntitiesReducer = (state: iEntityState<iEntity>, action: any) => {\n    let sliceName = action.slice\n\n    if(_.startsWith(sliceName, featureEntitiesReducerPrefix)) {\n      let entitySliceName = _.last(_.split(sliceName, '.'))\n      let stateDelta = {}\n      if(entitySliceName) {\n        stateDelta[entitySliceName] = \n          entityReducers[entitySliceName](state[entitySliceName], action)\n      }\n      return Object.assign({}, state, stateDelta)\n    }\n    else {\n      return state\n    }\n  }\n\n  let reducers = {\n    config: entityConfigReducer,\n    entities: featureEntitiesReducer,\n  }\n\n  return combineReducers(reducers)\n}\n\nlet buildEntityReducer = (entityTypeAdapter) => {\n  let reducer = {}\n  let key = entityTypeAdapter.sliceName\n  reducer[key] = entityTypeAdapter.reducer\n  return reducer\n}\n","import {\n  JsonApiEntity,\n} from '../classes/index'\n\nimport {\n  FEATURE_CONFIG,\n} from './tokens'\n\nlet featureConfig = {\n  name: 'Default Feature',\n  entityConfigs: [],\n  baseEntityType: JsonApiEntity,\n}\n\nlet featureConfigProvider = {\n  provide: FEATURE_CONFIG,\n  useValue: featureConfig,\n  multi: true,\n}\n\nexport const providers: any[] = [\n  featureConfigProvider,\n]\n","import { NgModule } from '@angular/core'\n\nimport { StoreModule }                 from '@ngrx/store'\nimport { EffectsModule } from '@ngrx/effects'\n\nimport {\n  effects,\n  initialState,\n  reducer,\n} from './state/state'\n\nimport { entityServices } from './services/index'\nimport { providers }from './util/index'\n\n\n@NgModule({\n  imports: [\n    StoreModule.forFeature(\n      'entity',\n      reducer,\n      {\n        initialState: initialState,\n      }\n    ),\n    EffectsModule.forFeature([\n      ...effects,\n    ]),\n  ],\n  declarations: [],\n  providers: [\n    ...entityServices,\n    ...providers,\n  ]\n})\nexport class EntityModule { }\n","import {\n  Observable,\n  BehaviorSubject,\n} from 'rxjs'\n\nimport {\n  iFormWrapper,\n} from '@ceo/shared'\n\nimport {\n  iEntity,\n} from '../../entity/index'\n\nimport {\n  iEntityFormManager,\n} from '../interfaces/index'\n\nexport class EntityFormManager implements iEntityFormManager {\n  private _entity: iEntity\n  private _form: iFormWrapper\n\n  private _entity$: Observable<iEntity>\n  private _form$: BehaviorSubject<iFormWrapper>\n\n  constructor(\n    entity$: Observable<iEntity>,\n    form$: BehaviorSubject<iFormWrapper>,\n  ) {\n    this.entity$ = entity$\n    this.form$ = form$\n  }\n\n  set entity$(entity$: Observable<iEntity>) {\n    this._entity$ = entity$\n    entity$.subscribe(entity => this.entity = entity)\n  }\n\n  get entity$(): Observable<iEntity> {\n    return this._entity$\n  }\n\n  set form$(form$: BehaviorSubject<iFormWrapper>) {\n    this._form$ = form$\n    form$.subscribe(form => this.form = form)\n  }\n\n  get form$(): BehaviorSubject<iFormWrapper> {\n    return this._form$\n  }\n\n  get entity(): iEntity {\n    return this._entity\n  }\n\n  set entity(entity: iEntity)  {\n    this._entity = entity\n  }\n\n  get form(): iFormWrapper {\n    return this._form\n  }\n\n  set form(form: iFormWrapper) {\n    this._form = form\n  }\n\n  formToEntity() {\n    this.entity.updateAttributes(this.form.value)\n  }\n}\n","import * as _ from 'lodash'\n\nimport {\n  Observable,\n} from 'rxjs'\n\nimport {\n  iEntityCollection,\n  JsonApiEntity,\n  buildEntityRelationshipProperties,\n  defineEntityRelationshipGetSet,\n} from '../../entity/index'\n\nimport {\n  iFormEntity,\n} from '../interfaces/index'\n\nexport class FormEntity extends JsonApiEntity implements iFormEntity {\n  private _formFields$: Observable<iEntityCollection>\n\n  static relationshipNames: string[] = [\n    'form-fields',\n  ]\n\n  formFields$: any\n}\n//buildEntityRelationshipProperties(FormEntity)\n\nlet buildEntityRelationship = (name) => {\n  defineEntityRelationshipGetSet(FormEntity, name)\n}\n_.map(FormEntity.relationshipNames, buildEntityRelationship)\n","import { JsonApiEntity } from '../../entity/index'\n\nexport class FormFieldEntity extends JsonApiEntity {}\n","import * as _ from 'lodash'\n\nimport {\n  Observable,\n  of as observableOf\n} from 'rxjs'\n\nimport { map }        from 'rxjs/operators'\n\nimport { Injectable } from '@angular/core'\n\nimport {\n  iEntityCollection\n} from '../../../../../entity/index'\n\n@Injectable({\n  providedIn: 'root'\n})\n\nexport class DropdownOptionsFactory {\n  build(data$: Observable<iEntityCollection>, entityKey) {\n    var dropdownData$ = data$.pipe(map(entityCollection =>{\n      var getOptions = (entity) => {\n        return this.getOptions(entityKey, entity)\n      }\n      return _.map(entityCollection.entities, getOptions)\n    }))\n    return dropdownData$\n  }\n\n  getOptions(key, entity) {\n    return {\n      key: entity.id,\n      value: entity.attributes[key]\n    }\n  }\n}\n\n","export const resourceList = [\n  {\n    key: 'default_project_roles',\n    value: 'name',\n    name: 'project-roles'\n  }\n]\n","import {\n  Observable,\n  of as observableOf\n} from 'rxjs'\n\nimport { Injectable } from '@angular/core';\n\nimport {\n  kebabCase,\n  pluralize,\n  snakeCase,\n} from '@ceo/core'\n\nimport {\n  iEntity,\n  iEntityCollection,\n  DataService,\n} from '../../../../../entity/index'\n\n\nimport { DropdownOptionsFactory } from './dropdown-options-factory.service'\n\nimport { resourceList } from './resource-list'\n\n@Injectable({\n  providedIn: 'root'\n})\n\nexport class DropdownFactory {\n  private selectorData$: Observable<iEntityCollection>\n\n  constructor(\n    private dataService: DataService,\n    private optionsFactory: DropdownOptionsFactory,\n  ) { }\n\n  build(resolvable): any {\n    var entityKey = 'name';\n    var name = pluralize(resolvable.name.replace('_id', ''));\n    let resource = resourceList.filter(item => item.key === name)\n    if(resource.length > 0){\n      entityKey = resource[0].value\n      this.selectorData$ = this.getSelectors$(resource[0].name)\n    }\n    else{\n      this.selectorData$ = this.getSelectors$(name)\n    }\n    return this.optionsFactory.build(this.selectorData$, entityKey);\n  }\n\n  getSelectors$(type) {\n    let resourceOpts = {\n      feature: \"app\",\n      type: type\n    }\n    return this.dataService.get$(resourceOpts);\n  }\n}\n\n","import * as _ from 'lodash'\n\nimport { Observable } from 'rxjs'\n\nimport {\n  of as observableOf,\n} from 'rxjs'\n\nimport { Injectable } from '@angular/core'\n\nimport {\n  Validators as NgValidators,\n} from '@angular/forms'\n\n\nimport {\n  FormControlType,\n  FormMemberType,\n  InputTypeAttribute,\n  iFormMemberFactoryParams,\n} from '@ceo/shared'\n\nimport {\n  iEntity,\n} from '../../../../../entity/index'\n\nimport { DropdownFactory as SelectFactory } from './dropdown-factory.service'\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FormControlDataFactory {\n  static defaultControlType: FormControlType = 'input'\n  static formMemberType: FormMemberType = 'form-item'\n\n  constructor(\n    private selectFactory: SelectFactory,\n  ) { }\n\n  build(\n    entity: iEntity,\n  ): Partial<iFormMemberFactoryParams> {\n\n    return {\n      type: FormControlDataFactory.formMemberType,\n      data: {\n        label: this.labelParams(entity),\n        control: this.controlParams(entity)\n      }\n    }\n  }\n\n  private labelParams(entity: iEntity) {\n    return {\n      text: entity.displayName,\n    }\n  }\n\n  private controlParams(entity: iEntity) {\n    let params = {\n      controlType: this.controlType(entity),\n      placeholder: entity.displayName,\n      key: entity.name,\n      validators: this.buildEntityValidators(entity),\n      displayName: entity.displayName,\n    }\n\n    let controlTypeParams =\n      this.controlTypeData(entity, this.controlType(entity))\n\n    return _.defaults(params, controlTypeParams)\n  }\n\n  private controlType(entity): FormControlType {\n    if(entity.name.includes(\"_id\")) {\n      return 'select' as FormControlType\n    }\n\n    if(entity.dataType == 'boolean') {\n      return 'checkbox' as FormControlType\n    }\n\n    return FormControlDataFactory.defaultControlType\n  }\n\n  private controlTypeData(entity: iEntity, controlType: FormControlType) {\n    switch(controlType) {\n      case \"select\": {\n        return this.selectControlTypeData(entity)\n      }\n      case \"input\": {\n        return this.inputControlTypeData(entity)\n      }\n      default: {\n        return {}\n      }\n    }\n  }\n\n  private selectControlTypeData(entity) {\n    return {\n      options: this.selectFactory.build(entity)\n    }\n  }\n\n  private inputControlTypeData(entity) {\n    return {\n      required: true,\n      inputType: this.inputType(entity),\n    }\n  }\n\n  private inputType(entity: iEntity): InputTypeAttribute {\n    var inputType = 'text'\n    if(entity.name == 'email') {\n      inputType = 'email'\n    }\n    if(entity.name == 'password') {\n      inputType = 'password'\n    }\n\n    return inputType as InputTypeAttribute\n  }\n\n  private buildEntityValidators(entity: iEntity) {\n    let validators = [NgValidators.required]\n\n    if(entity.name == 'email') {\n      validators.push(NgValidators.email)\n    }\n    return validators\n  }\n}\n","import {\n  of as observableOf,\n  Observable\n} from 'rxjs'\n\nimport { Injectable } from '@angular/core'\nimport {\n  Validators as NgValidators,\n} from '@angular/forms'\n\nimport { kebabCase } from '@ceo/core'\n\nimport {\n  iEntity,\n  iEntityCollection,\n} from '../../../../../entity/index'\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FormControlValidatorFactory {\n  build(\n    resolvable: iEntity,\n  ): any {\n\n    return {\n      type: 'form-item',\n      data: {\n        control: {\n          validators: [ NgValidators.required ] ,\n        }\n      }\n    }\n  }\n}\n","import * as _                 from 'lodash'\nimport { Observable, empty  } from 'rxjs'\n\nimport { map } from 'rxjs/operators'\n\nimport { Injector, Injectable, InjectionToken } from '@angular/core'\n\nimport {\n  kebabCase,\n  pluralize,\n  snakeCase,\n} from '@ceo/core'\n\nimport {\n  iEntity,\n  EntityData,\n  JsonApiEntity,\n} from '../../../../../entity/index'\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class FormGroupDataFactory {\n  build(\n    entity: iEntity\n  ): any {\n    let resourceType = this.pluralizeType(entity)\n\n    return {\n      memberType: 'form-group',\n      key: this.inputKey(entity),\n      resourceType: resourceType,\n      formName: this.buildFormName(resourceType)\n    }\n  }\n\n  private pluralizeType(entity): string {\n    return pluralize(snakeCase(entity.className))\n  }\n\n  private inputKey(entity) {\n    return `${entity.name}_attributes`\n  }\n\n  private buildFormName(resourceType: string, formType: string = 'edit') {\n    return `${resourceType}.${formType}`\n  }\n}\n","import { Injectable } from '@angular/core'\n\nimport {\n  iEntity,\n} from '../../../../../entity/index'\n\nimport { FormControlDataFactory } from './form-control-data-factory.service'\nimport { FormControlValidatorFactory } from './form-control-validator-factory.service'\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FormItemDataFactory {\n  constructor(\n    private formControlDataFactory: FormControlDataFactory,\n    private formControlValidatorFactory: FormControlValidatorFactory,\n  ) { }\n\n  build(\n    entity: iEntity\n  ): any {\n    let factory = this.resolveParamsFactory(entity)\n    return factory.build(entity)\n  }\n\n  private resolveParamsFactory(entity: iEntity) {\n    switch(entity.type) {\n      case \"resource-attributes\": {\n        return this.formControlDataFactory\n      }\n      case \"resource-validators\": {\n        return this.formControlValidatorFactory\n      }\n      default: {\n        return this.formControlDataFactory\n      }\n    }\n  }\n}\n","import * as _ from 'lodash'\n\nimport {\n  Observable,\n} from 'rxjs'\n\nimport { map } from 'rxjs/operators'\n\nimport { Injectable } from '@angular/core'\n\nimport {\n  iEntity,\n} from '../../../../../entity/index'\n\nimport {\n  FormGroupDataFactory,\n  FormItemDataFactory,\n} from '../data-factories/index'\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DataFactoryResolver {\n  constructor(\n    private formGroupDataFactory: FormGroupDataFactory,\n    private formItemDataFactory: FormItemDataFactory,\n  ) {}\n\n  resolve(\n    entity: iEntity,\n  ) {\n    switch(entity.type) {\n      case \"resource-associations\": {\n        return this.formGroupDataFactory\n      }\n      case \"resource-attributes\": {\n        return this.formItemDataFactory\n      }\n      case \"resource-validators\": {\n        return this.formItemDataFactory\n      }\n      default: {\n        return this.formItemDataFactory\n      }\n    }\n  }\n}\n","import * as _ from 'lodash'\n\nimport {\n  Observable,\n} from 'rxjs'\n\nimport { map } from 'rxjs/operators'\n\nimport { Injectable } from '@angular/core'\n\nimport {\n  iFormMemberFactoryParams,\n} from '@ceo/shared'\n\nimport {\n  iEntity,\n} from '../../../../../entity/index'\n\nimport { DataFactoryResolver } from './data-factory-resolver.service'\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DataFactory {\n  constructor(\n    private dataFactoryResolver: DataFactoryResolver,\n  ) {}\n\n  build(\n    entity: iEntity,\n  ): Partial<iFormMemberFactoryParams> {\n    let factory = this.resolveDataFactory(entity)\n    return factory.build(entity) as Partial<iFormMemberFactoryParams>\n  }\n\n  private resolveDataFactory(\n    entity: iEntity,\n  ) {\n    return this.dataFactoryResolver.resolve(entity)\n  }\n}\n","import * as _ from 'lodash'\n\nimport {\n  Observable,\n} from 'rxjs'\n\nimport {\n  map, filter, tap,\n} from 'rxjs/operators'\n\nimport { Injectable } from '@angular/core'\n\nimport {\n  EntityData,\n  iEntityCollection,\n} from '../../../../../entity/index'\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RelationshipProvider {\n  provide$(\n    resourceConfiguration,\n    formFieldEntity,\n    relationshipName,\n  ): Observable<EntityData> {\n\n    return resourceConfiguration.relationship$(relationshipName).pipe(\n      filter((collection: iEntityCollection) => {\n\n        return this.relationshipFullyLoaded(\n          resourceConfiguration,\n          relationshipName,\n          collection\n        )\n\n      }),\n      map((collection: iEntityCollection) => {\n        return collection.invokeFilter('isForAttribute', formFieldEntity.inputName)\n      }),\n    )\n  }\n\n  private relationshipFullyLoaded(\n    resourceConfiguration,\n    relationshipName,\n    collection\n  ) {\n\n    let relationshipSize =\n      resourceConfiguration.relationshipSize(relationshipName)\n\n    return collection.length == relationshipSize\n  }\n}\n","import * as _ from 'lodash'\n\nimport {\n  zip as observableZip,\n  Observable,\n} from 'rxjs'\n\nimport { first, filter, map, startWith, tap } from 'rxjs/operators'\n\nimport { Injectable } from '@angular/core'\n\nimport {\n  iEntity,\n  EntityData,\n} from '../../../../../entity/index'\n\nimport { RelationshipProvider } from './relationship-provider.service'\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RelationshipsProvider {\n  private relationshipTypes: string[] = [\n    'resource-attributes',\n    'resource-associations',\n    'resource-validators',\n  ]\n\n  constructor(\n    private relationshipProvider: RelationshipProvider,\n  ) {}\n\n  provide$(\n    resourceConfiguration,\n    formFieldEntity,\n  ): Observable<iEntity[]> {\n\n    let provideRelationships$ = _.bind(\n      _.partial(\n        this.provideRelationship$,\n        resourceConfiguration,\n        formFieldEntity\n      ),\n      this\n    )\n\n    let relationships = _.map(this.relationshipTypes, provideRelationships$)\n\n    return observableZip(...relationships).pipe(\n      map(relationshipCollections => {\n        return _.flatMap(relationshipCollections, 'entities')\n      }),\n    )\n  }\n\n  private flattenedRelationships(collections): iEntity[] {\n    return _.flatMap(<any>_.pick(collections, 'entities'))\n  }\n\n  private provideRelationship$(\n    resourceConfiguration,\n    formFieldEntity,\n    relationshipType,\n  ): Observable<EntityData> {\n\n    return this.relationshipProvider.provide$(\n      resourceConfiguration,\n      formFieldEntity,\n      relationshipType,\n    )\n  }\n}\n","import * as _ from 'lodash'\n\nimport {\n  Observable,\n} from 'rxjs'\n\nimport { map } from 'rxjs/operators'\n\nimport { Injectable } from '@angular/core'\n\nimport {\n  iFormMemberFactoryParams,\n} from '@ceo/shared'\n\nimport {\n  EntityData,\n  iEntity,\n} from '../../../../../entity/index'\n\nimport {\n  RelationshipsProvider,\n  RelationshipDataFactory,\n} from '../relationships/index'\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FormMemberFactoryParamsService {\n  constructor(\n    private relationshipsProvider: RelationshipsProvider,\n    private relationshipDataFactory: RelationshipDataFactory,\n  ) {}\n\n  provide$(\n    resourceConfiguration,\n    formFieldEntity,\n  ): Observable<iFormMemberFactoryParams> {\n\n    return this.relationships$(resourceConfiguration, formFieldEntity).pipe(\n      map(relationships => {\n        return this.buildParams(relationships, formFieldEntity)\n      }),\n    )\n  }\n\n  private relationships$(\n    resourceConfiguration,\n    formFieldEntity,\n  ) {\n    return this.relationshipsProvider.provide$(\n      resourceConfiguration,\n      formFieldEntity,\n    )\n  }\n\n  private buildParams(entities, formFieldEntity): iFormMemberFactoryParams {\n    let buildEntityFormMemberParams =\n      _.bind(this.buildEntityFormMemberParams, this)\n    let entitiesParams = _.map(entities, buildEntityFormMemberParams)\n    let params = _.merge({}, ...entitiesParams)\n    return params as iFormMemberFactoryParams\n  }\n\n  private buildEntityFormMemberParams(\n    entity: iEntity,\n  ): Partial<iFormMemberFactoryParams> {\n    return this.relationshipDataFactory.build(entity)\n  }\n}\n","import * as _ from 'lodash'\n\nimport {\n  Observable,\n  of as observableOf,\n  zip, combineLatest,\n  BehaviorSubject,\n} from 'rxjs'\n\nimport {\n  first, tap, take,\n  map, mergeMap, skipWhile,\n  startWith, filter,\n  share,\n} from 'rxjs/operators'\n\nimport { Injectable } from '@angular/core'\n\nimport {\n  iFormGroup,\n  iFormMemberFactoryParams,\n  iFormMember,\n  iMap,\n  FormGroup,\n  FormMemberFactory,\n  FormFactory as BaseFormFactory,\n} from '@ceo/shared'\n\nimport {\n  iEntity,\n  iEntityCollection,\n} from '../../../../entity/index'\n\nimport {\n  iFormEntity,\n} from '../../../interfaces/index'\n\nimport {\n  FormMemberFactoryParamsService,\n} from './form-fields/index'\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FormFactory {\n  constructor(\n    private formMemberFactory: FormMemberFactory,\n    private formMemberFactoryParamsService: FormMemberFactoryParamsService,\n    private formFactory: BaseFormFactory,\n  ) {}\n\n  build$(\n    resourceConfiguration: iEntity,\n    form: iFormEntity,\n  ): BehaviorSubject<any> {\n    return this.buildFormGroup$(resourceConfiguration, form, null)\n  }\n\n  buildFormGroup$(\n    resourceConfiguration: iEntity,\n    form: iFormEntity,\n    resourceType,\n  ): BehaviorSubject<any> {\n\n    return <BehaviorSubject<any>>form.formFields$.pipe(\n      mergeMap(formFields => {\n        return this.buildFormMembersParams$(\n          resourceConfiguration,\n          formFields,\n        )\n      }),\n      map((params: iMap<iFormMemberFactoryParams>) => {\n        return this.buildFormMembers(params)\n      }),\n      map((formMembers: iMap<iFormMember>) => {\n        return this.buildForm(formMembers, resourceType)\n      }),\n    )\n  }\n\n  private buildFormMembersParams$(\n    resourceConfiguration: iEntity,\n    formFields: iEntityCollection,\n  ): Observable<iMap<iFormMemberFactoryParams>> {\n\n    let buildFormMemberParams$ = _.partial(\n      _.bind(this.buildFormMemberParams$, this),\n      resourceConfiguration\n    )\n\n    let formMemberParams$ =\n      _.map(formFields.entities, buildFormMemberParams$)\n\n    return combineLatest(...formMemberParams$).pipe(\n      map(formMembersParams => {\n        let mergedParams = _.merge({}, ...formMembersParams)\n        return mergedParams as iMap<iFormMemberFactoryParams>\n      })\n    )\n  }\n\n  private buildFormMemberParams$(\n    resourceConfiguration,\n    formFieldEntity,\n  ): Observable<iMap<iFormMemberFactoryParams>> {\n    return this.formMemberFactoryParamsService.provide$(\n      resourceConfiguration,\n      formFieldEntity,\n    ).pipe(\n      map((params: iFormMemberFactoryParams) => {\n        let pair = [formFieldEntity.inputName, params]\n        return _.fromPairs([pair]) as iMap<iFormMemberFactoryParams>\n      }),\n    )\n  }\n\n  private buildFormMembers(\n    paramsSet: iMap<iFormMemberFactoryParams>,\n  ): iMap<iFormMember> {\n\n    let buildFormMember = (params: iFormMemberFactoryParams) => {\n      return this.formMemberFactory.build(params)\n    }\n    let formMembers = _.mapValues(paramsSet, buildFormMember)\n    return formMembers\n  }\n\n  private buildForm(\n    formMembers: iMap<iFormMember>,\n    resourceType: string,\n  ) {\n\n    var formParams\n    if(resourceType) {\n      let pair = [resourceType, formMembers]\n      formParams = _.fromPairs([pair])\n    }\n    else {\n      formParams = formMembers\n    }\n\n    return this.formFactory.build(formParams)\n  }\n}\n","// Accepts:\n// resourceType 'string'\n// formName 'string'\n//\n// Returns a FormGroup\n\nimport * as _ from 'lodash'\n\nimport {\n  Observable,\n  BehaviorSubject,\n  combineLatest,\n} from 'rxjs'\n\nimport {\n  map, mergeMap,\n  filter,\n} from 'rxjs/operators'\n\nimport { Injectable } from '@angular/core'\n\nimport {\n  TextboxFormControl,\n  iFormControl,\n  iFormWrapper,\n} from '@ceo/shared'\n\nimport {\n  EntityData,\n  iEntity,\n  DataService,\n} from '../../entity/index'\n\nimport {\n  iFormEntity,\n  iEntityFormFactoryOpts,\n} from '../interfaces/index'\n\nimport {\n  ResourceConfigurationFormFactory,\n} from './resource-configurations/index'\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class EntityFormFactory {\n  constructor(\n    private resourceConfigurationFormFactory: ResourceConfigurationFormFactory,\n    private dataService: DataService,\n  ) {}\n\n  build$(entity: iEntity, opts: iEntityFormFactoryOpts): BehaviorSubject<iFormWrapper> {\n    let data$ = combineLatest(\n      this.resourceConfiguration$(entity),\n      this.form$(entity, opts.formName),\n    )\n\n    return <BehaviorSubject<iFormWrapper>>data$.pipe(\n      mergeMap(([rc, form]) => {\n        return this.resourceConfigurationFormFactory.build$(<iEntity>rc, <iFormEntity>form)\n      }),\n    )\n  }\n\n  private form$(entity: iEntity, formName: string): Observable<iEntity> {\n    let opts = {\n      feature: entity.feature,\n      type: 'forms',\n      id: formName,\n    }\n\n    return <Observable<iEntity>>this.loadData$(opts)\n  }\n\n  private resourceConfiguration$(entity: iEntity): Observable<EntityData> {\n    let opts = {\n      feature: entity.feature,\n      type: 'resource-configurations',\n      id: entity.type,\n    }\n\n    return <Observable<iEntity>>this.loadData$(opts)\n  }\n\n  private loadData$(opts: any): Observable<iEntity> {\n    return this.dataService.get$(opts).pipe(\n      filter(entityType => !_.isNil(entityType))\n    )\n  }\n}\n","import {\n  Observable,\n  BehaviorSubject,\n} from 'rxjs'\n\nimport {\n  mergeMap,\n  shareReplay,\n} from 'rxjs/operators'\n\nimport { Injectable } from '@angular/core'\n\nimport {\n  iFormWrapper,\n} from '@ceo/shared'\n\nimport {\n  iEntity,\n} from '../../entity/index'\n\nimport {\n  EntityFormManager,\n} from '../classes/index'\n\nimport { EntityFormFactory } from './entity-form-factory.service'\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class EntityFormManagerFactory {\n  constructor(\n    private formFactory: EntityFormFactory,\n  ) { }\n\n  build(entity$: Observable<iEntity>, formName: string): EntityFormManager {\n    let form$ = this.buildForm$(entity$, formName).pipe(\n      shareReplay(1),\n    ) as BehaviorSubject<iFormWrapper>\n\n    return new EntityFormManager(entity$, form$)\n  }\n\n  private buildForm$(\n    entity$: Observable<iEntity>,\n    formName: string,\n  ): BehaviorSubject<iFormWrapper> {\n\n    return entity$.pipe(\n      shareReplay(1),\n      mergeMap(entity => this.buildForm(entity, formName))\n    ) as BehaviorSubject<iFormWrapper>\n  }\n\n  private buildForm(\n    entity: iEntity,\n    formName: string\n  ): BehaviorSubject<iFormWrapper> {\n    let opts = {\n      formName: formName\n    }\n    return this.formFactory.build$(entity, opts)\n  }\n}\n","import {\n  FormControlDataFactory,\n  FormControlValidatorFactory,\n  FormGroupDataFactory,\n  FormItemDataFactory,\n  DropdownFactory,\n  DropdownOptionsFactory,\n} from './index'\n\nexport const services: any[] = [\n  FormControlDataFactory,\n  FormControlValidatorFactory,\n  FormGroupDataFactory,\n  FormItemDataFactory,\n  DropdownFactory,\n  DropdownOptionsFactory,\n]\n","import {\n  FormMemberFactoryParamsService,\n} from './index'\n\n\nexport const services: any[] = [\n  FormMemberFactoryParamsService,\n]\n","import {\n  RelationshipDataFactory,\n  RelationshipDataFactoryResolver,\n  RelationshipProvider,\n  RelationshipsProvider,\n} from './index'\n\nexport const services: any[] = [\n  RelationshipDataFactory,\n  RelationshipDataFactoryResolver,\n  RelationshipProvider,\n  RelationshipsProvider,\n]\n","import {\n  ResourceConfigurationFormFactory,\n} from './index'\n\nimport { services as dataFactoriesServices } from './data-factories/services'\nimport { services as formFieldsServices }    from './form-fields/services'\nimport { services as relationshipsServices } from './relationships/services'\n\nexport const services: any[] = [\n  ResourceConfigurationFormFactory,\n  ...dataFactoriesServices,\n  ...formFieldsServices,\n  ...relationshipsServices,\n]\n","import { services as formsServices } from './forms/services'\n\nexport const services: any[] = [\n  ...formsServices,\n]\n","import {\n  EntityFormFactory,\n  EntityFormManagerFactory,\n} from './public-api'\n\nimport { services as resourceConfigurationServices } from './resource-configurations/services'\n\nexport const services: any[] = [\n  EntityFormFactory,\n  EntityFormManagerFactory,\n  ...resourceConfigurationServices,\n]\n","import { NgModule } from '@angular/core'\n\nimport { CeoFormsModule } from '@ceo/shared'\n\nimport { services }     from './services/services'\n\n@NgModule({\n  imports: [\n    CeoFormsModule,\n  ],\n  declarations: [],\n  providers: [\n    ...services,\n  ]\n})\nexport class CeoEntityFormsModule { }\n"],"names":["_.get","_.compact","_.keys","_.partial","_.reduce","defaults","_.pick","_.join","_.omit","_.without","_.extend","_.map","_.flatten","EntityActionsMap","_.isArray","_.head","_.sortBy","_.filter","filter","_.isNil","_.find","_.has","_.includes","_.toString","_.every","_.lowerCase","_.isEmpty","_.merge","ngrxCreateEntityAdapter","_.bind","map","_.isFunction","_.defaults","_.clone","ofType","_.assign","camelCase","_.split","find","buildFeatureSelector","_.mapValues","_.set","_.intersection","EntitySelectorNameService","EntitySelectorProvider","EntitySelectorService","actionType","EntityActions.Add","EntityActions.Delete","EntityActions.Load","EntityActions.Update","clone","services","EntityAttributeBuilder","JsonApiEntityAttributeBuilder","SetPrimaryEntity","tslib_1.__decorate","_.pickBy","_.values","_.drop","_.last","_.dropRight","_.isEqual","FeatureActions.SetPrimaryEntityIdentifier","FeatureActions.AddFeature","observableOf","FeatureActions.SetPrimaryEntity","FeatureActions.SelectPrimaryEntity","_.cloneDeep","FeatureActions.RegisterFeature","EntityActions.LoadSeedData","EntityActions.AsyncSuccess","EntityActions.DeleteSuccess","EntityActions.Init","actions","EntityActions.AddStoreEntities","EntityActions.SetScopeEntities","sliceActions","EntityDataService","attributeBuilders.services","selectors.services","_.startsWith","reducer","initialState","buildEntityRelationship","NgValidators","SelectFactory","observableZip","_.flatMap","RelationshipDataFactory","FormFactory","_.fromPairs","BaseFormFactory","ResourceConfigurationFormFactory","RelationshipDataFactoryResolver","dataFactoriesServices","formFieldsServices","relationshipsServices","formsServices","resourceConfigurationServices"],"mappings":"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"}
