!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@ceo/state"),require("@ngrx/router-store"),require("@ngrx/entity"),require("@ngrx/store"),require("@ngrx/effects"),require("@angular/forms"),require("@ceo/core"),require("lodash"),require("rxjs"),require("rxjs/operators"),require("@angular/core"),require("@ceo/shared")):"function"==typeof define&&define.amd?define("@ceo/entity",["exports","@ceo/state","@ngrx/router-store","@ngrx/entity","@ngrx/store","@ngrx/effects","@angular/forms","@ceo/core","lodash","rxjs","rxjs/operators","@angular/core","@ceo/shared"],e):e((t.ceo=t.ceo||{},t.ceo.entity={}),t.state,t.routerStore,t.entity,t.i1,t.effects,t.ng.forms,t.i1$1,t._,t.rxjs,t.rxjs.operators,t.ng.core,t.i1$2)}(this,function(t,a,u,c,y,s,r,p,d,f,l,n,e){"use strict";var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function h(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var o=function(){return(o=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function m(t,e,r,n){var i,o=arguments.length,a=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var u=t.length-1;0<=u;u--)(i=t[u])&&(a=(o<3?i(a):3<o?i(e,r,a):i(e,r))||a);return 3<o&&a&&Object.defineProperty(e,r,a),a}function v(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function E(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(n=o.next()).done;)a.push(n.value)}catch(u){i={error:u}}finally{try{n&&!n.done&&(r=o["return"])&&r.call(o)}finally{if(i)throw i.error}}return a}function b(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(E(arguments[e]));return t}var S=o({},a.sliceActions,{ADD:"ADD",ADD_OPTIMISTICALLY:"ADD_OPTIMISTICALLY",ADD_SUCCESS:"ADD_SUCCESS",ADD_TEMP:"ADD_TEMP",ADD_UPDATE_FAIL:"ADD_UPDATE_FAIL",UPDATE_SUCCESS:"UPDATE_SUCCESS",DELETE:"DELETE",DELETE_FAIL:"DELETE_FAIL",DELETE_SUCCESS:"DELETE_SUCCESS",DELETE_TEMP:"DELETE_TEMP",ASYNC:"ASYNC",ASYNC_FAIL:"ASYNC_FAIL",ASYNC_SUCCESS:"ASYNC_SUCCESS",ASYNC_DATA_READY:"ASYNC_DATA_READY",PATCH:"PATCH",PATCH_EACH:"PATCH_EACH",PATCH_FAIL:"PATCH_FAIL",PATCH_SUCCESS:"PATCH_SUCCESS",RESTORE_TEMP:"RESTORE_TEMP",SELECT:"SELECT",SELECT_NEXT:"SELECT_NEXT",UNLOAD:"UNLOAD",ADD_STORE_ENTITIES:"ADD_STORE_ENTITIES",SET_SELECTED:"SET_SELECTED",LOAD_SEED_DATA:"LOAD_SEED_DATA",SET_PRIMARY_ENTITY:"SET_PRIMARY_ENTITY",SET_SCOPE_ENTITIES:"SET_SCOPE_ENTITIES"}),g="TEMP_ID_VALUE",T=function(n){function t(t,e){var r=n.call(this,t,e)||this;return r.slice=t,r.payload=e,r}return h(t,n),t}(a.SliceAction),I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.actionName=S.INIT,t}return h(t,e),t}(a.SliceAction),A=function(n){function t(t,e){void 0===e&&(e={});var r=n.call(this,t,Object.assign({},{dirty:!0},e))||this;return r.slice=t,r.payload=e,r.actionName=S.ADD,r}return h(t,n),t.prototype.payloadForPost=function(){var t=Object.assign({},this.payload);return this.payload.id===g&&(delete t.id,delete t.dirty),t},t}(T),_=function(n){function t(t,e){var r=n.call(this,t,e)||this;return r.slice=t,r.payload=e,r.actionName=S.ADD_STORE_ENTITIES,r}return h(t,n),t}(a.SliceAction),F=function(n){function t(t,e){void 0===e&&(e=null);var r=n.call(this,t,e)||this;return r.slice=t,r.payload=e,r.actionName=S.LOAD,r}return h(t,n),t}(a.SliceAction),N=function(n){function t(t,e){var r=n.call(this,t,e)||this;return r.slice=t,r.payload=e,r.actionName=S.ASYNC_SUCCESS,r}return h(t,n),t}(a.SliceAction),P=function(n){function t(t,e){void 0===e&&(e=null);var r=n.call(this,t,e)||this;return r.slice=t,r.payload=e,r.actionName=S.LOAD_SEED_DATA,r}return h(t,n),t}(a.SliceAction),R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.actionName=S.INITIALIZED,t}return h(t,e),t}(a.SliceAction),D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.actionName=S.PATCH,t}return h(t,e),t}(T),$=function(n){function t(t,e){void 0===e&&(e={});var r=n.call(this,t,Object.assign({},e,e.id?{}:{id:g}))||this;return r.slice=t,r.actionName=S.ADD_TEMP,r}return h(t,n),t}(T),C=function(n){function t(t,e){void 0===e&&(e={});var r=n.call(this,t,Object.assign({},{id:g},e))||this;return r.slice=t,r.actionName=S.ADD_OPTIMISTICALLY,r}return h(t,n),t}(A),j=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.actionName=S.ADD_SUCCESS,t}return h(t,e),t}(T),O=function(n){function t(t,e){void 0===e&&(e={});var r=n.call(this,t,Object.assign({},e,e.id?{}:{id:g}))||this;return r.slice=t,r.actionName=S.ADD_UPDATE_FAIL,r}return h(t,n),t}(T),M=function(n){function t(t,e){void 0===e&&(e=null);var r=n.call(this,t,e)||this;return r.slice=t,r.payload=e,r.actionName=S.DELETE,r}return h(t,n),t}(T),w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.actionName=S.DELETE_FAIL,t}return h(t,e),t}(T),L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.actionName=S.DELETE_SUCCESS,t}return h(t,e),t}(T),Y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.actionName=S.LOAD_FAIL,t}return h(t,e),t}(T),U=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.actionName=S.ASYNC,t}return h(t,e),t}(T),k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.actionName=S.ASYNC_FAIL,t}return h(t,e),t}(T),x=function(n){function t(t,e){var r=n.call(this,t,e)||this;return r.slice=t,r.payload=e,r.actionName=S.ASYNC_DATA_READY,r}return h(t,n),t}(a.SliceAction),q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.actionName=S.LOAD_SUCCESS,t}return h(t,e),t}(N),B=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.actionName=S.PATCH_SUCCESS,t}return h(t,e),t}(T),H=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.actionName=S.PATCH_FAIL,t}return h(t,e),t}(T),V=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.actionName=S.UPDATE,t}return h(t,e),t}(T),G=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.actionName=S.PATCH_EACH,t}return h(t,e),t}(a.SliceAction),z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.actionName=S.UPDATE_SUCCESS,t}return h(t,e),t}(T),K=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.actionName=S.SELECT,t}return h(t,e),t}(T),W=function(r){function t(t){var e=r.call(this,t,null)||this;return e.slice=t,e.actionName=S.SELECT_NEXT,e}return h(t,r),t}(T),X=function(r){function t(t){var e=r.call(this,t,null)||this;return e.slice=t,e.actionName=S.UNLOAD,e}return h(t,r),t}(T),J=function(n){function t(t,e){var r=n.call(this,t,e)||this;return r.slice=t,r.payload=e,r.actionName=S.SET_SELECTED,r}return h(t,n),t}(a.SliceAction),Z=function(n){function t(t,e){var r=n.call(this,t,e)||this;return r.slice=t,r.payload=e,r.actionName=S.SET_PRIMARY_ENTITY,r}return h(t,n),t}(a.SliceAction),Q=function(n){function t(t,e){var r=n.call(this,t,e)||this;return r.slice=t,r.payload=e,r.actionName=S.SET_SCOPE_ENTITIES,r}return h(t,n),t}(a.SliceAction),tt=Object.freeze({TEMP:g,EntityAction:T,Init:I,Add:A,AddStoreEntities:_,Load:F,AsyncSuccess:N,LoadSeedData:P,Initialized:R,Patch:D,AddTemp:$,AddOptimistically:C,AddSuccess:j,AddUpdateFail:O,Delete:M,DeleteFail:w,DeleteSuccess:L,LoadFail:Y,Async:U,AsyncFail:k,AsyncDataReady:x,LoadSuccess:q,PatchSuccess:B,PatchFail:H,Update:V,PatchEach:G,UpdateSuccess:z,Select:K,SelectNext:W,Unload:X,SetSelected:J,SetPrimaryEntity:Z,SetScopeEntities:Q}),et=function(t,e,i){var o=t.entityCollectionType;return e["select.scope."+p.camelCase(i)]=y.createSelector(e.selectScopes,e.selectEntities,function(t,e){var r=d.get(t,[i,"ids"],[]),n=d.compact(r.map(function(t){return e[t]}));return new o(n)}),e},rt=function(t,e){var r=d.keys(t.scopes),n=d.partial(et,t);return d.reduce(r,n,e)},nt=function(t){var r=t.entityCollectionType,n=t.ngrxEntityAdapter.getSelectors(),e=d.pick(n,["selectIds","selectEntities","selectTotal"]);return e.selectAll=function(t){var e=n.selectAll(t);return new r(e)},e.selectSelectedEntity=function(t){return t.entities[t.selectedEntityId]},e.selectScopes=function(t){return t.scopes},rt(t,e),e};function it(t,e,r){var n=d.join([t,e],".");return a.typeFor(n,r)}function ot(t,e,r){return e.addMany(t,r)}function at(t,e,r){var n=t.id,i=d.omit(r.entities,n),o=d.without(r.ids,n);return r=d.extend(r,{ids:o,entities:i}),e.addOne(t,r)}function ut(t,e,r){var n=d.map(d.flatten([t.payload]),"id");return e.removeMany(n,r)}function ct(t,e,r){return e.removeOne(t.payload.id,r)}function st(t,e,r){var n=t.payload.entities,i=t.payload.scope,o=d.map(n,"id"),a={scopes:{}};return a.scopes[i]={ids:o},Object.assign({},r,a)}function pt(t,e,r){var n=d.flatten([t.payload]);d.map(d.flatten([n]),"id");return e.upsertMany(n,r)}function ft(t,e,r){return e.updateOne(t.payload,r)}function lt(t,e,r,n,i){switch(t.type){case it(e,r,S.ADD_STORE_ENTITIES):var o=t.payload;return d.isArray(o)&&1==o.length&&(o=d.head(o)),d.isArray(o)?ot(o,n,i):at(o,n,i);case it(e,r,S.SET_PRIMARY_ENTITY):case it(e,r,S.SET_SELECTED):if(i.selectedEntityId==t.payload.entity.id)return i;var a={selectedEntityId:t.payload.entity.id};return Object.assign({},i,a);case it(e,r,S.UPDATE_SUCCESS):return Array.isArray(t.payload)?pt(t,n,i):ft(t,n,i);case it(e,r,S.DELETE_SUCCESS):return Array.isArray(t.payload)?ut(t,n,i):ct(t,n,i);case it(e,r,S.SET_SCOPE_ENTITIES):return st(t,0,i);default:return i}}var yt=function(){function t(t){void 0===t&&(t=[]),this.entities=t,this.length=t.length}return t.prototype.none=function(){return this.buildCollection([])},t.prototype.sort=function(t){t=d.flatten([t]);var e=d.sortBy(this.entities,t);return this.buildCollection(e)},t.prototype.filter=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=(t=this.entities).filter.apply(t,b(e));return this.buildCollection(n)},t.prototype.invokeFilter=function(e,r){var t=d.filter(this.entities,function(t){return!!t[e]&&t[e](r)});return this.buildCollection(t)},t.prototype.filterByInvoke=function(t,e){return this.invokeFilter(t,e)},t.prototype.filterByAttrs=function(t){return d.reduce(t,function(t,e,r){return t.filterByAttr(r,e)},this)},t.prototype.find=function(r){return d.find(this.entities,function(e){var t=d.get(e.constructor,"config.primaryKeys",["id"]);return!d.isNil(d.find(t,function(t){return e[t]==r}))})},t.prototype.findByAttr=function(e,r){return d.find(this.entities,function(t){return t[e]==r})},t.prototype.map=function(t){return d.map(this.entities,t)},t.prototype.slice=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=(t=this.entities).slice.apply(t,b(e));return this.buildCollection(n)},t.prototype.where=function(e){var r=function(t,e,r){if(!d.has(t,r))return!1;var n=t[r];return n instanceof Array?d.includes(d.map(n,d.toString),d.toString(e)):e instanceof Array?d.includes(d.map(e,d.toString),d.toString(n)):d.toString(n)==d.toString(e)},t=d.filter(this.entities,function(t){return d.every(e,d.partial(r,t))});return this.buildCollection(t)},t.prototype.stringSearch=function(t){return d.reduce(t,function(t,e,r){return t.stringSearchByAttr(r,e)},this)},t.prototype.search=function(e){var r=function(t,e,r){var n=t.attributes[r];return e instanceof Array?d.includes(e,n):d.includes(n,e)},t=d.filter(this.entities,function(t){return d.every(e,d.partial(r,t))});return this.buildCollection(t)},t.prototype.stringSearchByAttr=function(i,o){return this.filter(function(t){if(!o)return!0;var e=t[i],r=d.lowerCase(e),n=d.lowerCase(o);return d.includes(r,n)})},t.prototype.isEmpty=function(){return d.isEmpty(this.entities)},t.prototype.isNotEmpty=function(){return!this.isEmpty()},t.prototype.hasEntities=function(){return this.isNotEmpty()},t.prototype.filterByAttr=function(r,n){return this.filter(function(t){var e=t.attributes[r];return n(e)})},t.prototype.buildCollection=function(t){return new this.constructor(t)},t.prototype[Symbol.iterator]=function(){var e=0,r=this.entities;return{next:function(){var t=d.isEmpty(r);return{value:t?null:r[e++],done:!!t||e>r.length}}}},t}(),dt=function(){function t(t){this.featureName=t.featureName,this.entityType=t.entityType,this.entityConfig=this.entityType.config,this.entityName=this.entityType.sliceName,this.sliceName=this.entityName}return Object.defineProperty(t.prototype,"entityCollectionType",{get:function(){return yt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reducer",{get:function(){return this.getterWithBuilder("_reducer","buildReducer")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectors",{get:function(){return this.getterWithBuilder("_selectors","buildSelectors")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"initialState",{get:function(){return this.getterWithBuilder("_initialState","buildInitialState")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngrxEntityAdapter",{get:function(){return this._ngrxEntityAdapter||(this._ngrxEntityAdapter=this.buildNgrxEntityAdapter()),this._ngrxEntityAdapter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scopes",{get:function(){return d.get(this.entityConfig,"initialState.scopes",{})},enumerable:!0,configurable:!0}),t.prototype.buildReducer=function(){var r=this.ngrxEntityAdapter,n=this.featureEntitySliceName(this.featureName),i=this.sliceName,o=this.initialState,a=this.entityConfig.reducer;return function(t,e){return void 0===t&&(t=o),a&&(t=a(t,e)),t=lt(e,n,i,r,t)}},t.prototype.featureEntitySliceName=function(t){return d.join([t,"entities"],".")},t.prototype.buildSelectors=function(){return nt(this)},t.prototype.buildInitialState=function(){var t=d.merge({selectedEntityId:null},this.entityType.initialState);return this.ngrxEntityAdapter.getInitialState(t)},t.prototype.buildNgrxEntityAdapter=function(){return c.createEntityAdapter()},t.prototype.getterWithBuilder=function(t,e){return this[t]||(this[t]=this[e]()),this[t]},t}(),ht=function(){function t(t){this._featureConfig=t}return Object.defineProperty(t.prototype,"featureConfig",{get:function(){return this._featureConfig},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"adapters",{get:function(){return this._adapters||(this._adapters=this.buildAdapters()),this._adapters},enumerable:!0,configurable:!0}),t.prototype.buildAdapters=function(){return d.map(this.featureConfig.entityTypes,d.bind(this.buildAdapter,this))},t.prototype.buildAdapter=function(t){var e={featureName:this.featureConfig.name,entityType:t};return new dt(e)},t}(),mt=function(){function t(t){this.baseEntityType=t}return t.prototype.build=function(t){var e=p.classify(t.name),r=this.buildEntityType(t),n={};return n[e]=r,n},t.prototype.buildEntityType=function(r){return function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e._sliceName=r.name,e.config=r,e}(r.entityType?r.entityType:this.baseEntityType)},t}(),vt=function(){function t(t){this.primaryKeys=["id"],this.seed=[],this.initialState={},Object.assign(this,t)}return Object.defineProperty(t.prototype,"name",{get:function(){return this._name||(this._name=this.type),this._name},set:function(t){this._name=t},enumerable:!0,configurable:!0}),t.prototype.getName=function(){return this.type},t.prototype.hasResourceType=function(t){return void 0===t&&(t={}),this.type==t.type},t.prototype.ofType=function(t){return this.type==t.type},t.prototype.isCustom=function(){return d.has(this,"primaryKeys")},t.prototype.urlFragment=function(t){return void 0===t&&(t={}),d.isFunction(this.url)?this.url(t):this.url?this.url:this.type},Object.defineProperty(t.prototype,"entityType",{get:function(){return this._entityType},set:function(t){this._entityType=t},enumerable:!0,configurable:!0}),t}(),Et=function(){function t(t){this.config=t,this.defaultEffectTypes={init:!1,load:!0,add:!0,patch:!0,asyncSuccess:!0},this.sliceName=t.sliceName,this.initialEntity=t.initialEntity,this.effectTypes=d.merge(this.defaultEffectTypes,t.effectTypes)}return t.prototype.hasEffectType=function(t){return d.has(this.effectTypes,t)&&this.effectTypes[t]},t.prototype.getConfig=function(t){return this.config[t]},t}(),bt=function(){function t(t,e){this.attributes={},this.defaultAttributes={},this.updatedKeys=[],Object.assign(this,t),this._dataService=e,this.setAttributes()}return Object.defineProperty(t,"sliceName",{get:function(){return this._sliceName?this._sliceName:this.config?this.config.name:this.constructor.name},enumerable:!0,configurable:!0}),t.prototype.setAttributes=function(){this.attributes=d.defaults(this.attributes,this.constructor.defaultAttributes),this.updateAttributes(this.attributes)},t.prototype.getAttr=function(t){return this.attributes[t]},t.prototype.setAttr=function(t,e){var r={};r[t=p.slugify(t)]=e,this.updateAttributes(r)},Object.defineProperty(t.prototype,"dataService",{get:function(){return this._dataService},set:function(t){this._dataService=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isNew",{get:function(){return!d.has(this,"id")},enumerable:!0,configurable:!0}),t.prototype.nameStartsWith=function(t){return 0===this.getAttr("name").toLowerCase().indexOf(t.toLowerCase())},t.prototype.getSliceName=function(){return this.type},t.prototype.relationship=function(t){return this[t]},t.prototype.relationshipSize=function(t){if(!this.hasRelationship(t))return 0;var e=this.relationships[t].data;return d.isArray(e)?e.length:1},t.prototype.relationship$=function(t,e){return void 0===e&&(e={}),this.dataService.relationship$(this,t,e)},t.prototype.save$=function(t){void 0===t&&(t={});var e=this.isNew?"create$":"update$";return this.dataService[e](this.toResourceIdentifier(),t)},t.prototype.toResourceIdentifier=function(){var t=d.clone(d.pick(this,"feature","type"));return t.data=this.attributes,this.isNew||(t.id=this.id),t},t.prototype.hasRelationship=function(t){return this.relationships&&this.relationships[t]&&this.relationships[t].data},t.prototype.updateAttributes=function(t){},t.prototype.createAttributeSettersAndGetters=function(){},t.prototype.createSettersAndGetters=function(t){},t.prototype.createGetSet=function(t,e,r,n){},t.prototype.generateGetSet=function(t,e,r){},t.prototype.setProp=function(t,e,r){},t.prototype.getProp=function(t,e){},t.prototype.memoized=function(t,e){},t._sliceName="",t.config={},t.defaultAttributes={},t=m([e.Mixin([e.AttributeGetterSetter,e.AttributeUpdater,e.Memoizer]),v("design:paramtypes",[Object,Object])],t)}(),St=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e.prototype.isForAttribute=function(t){return this.name==t},e}(bt),gt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e.prototype.isForAttribute=function(t){return this.name==t},e}(bt);function Tt(t){return function(){return this.dataService.relationship$(this,t,{})}}function It(t,e){var r=p.camelCase(e)+"$",n="_"+r,i=Tt(e);console.log("building get set for "+t.name+" : "+e);var o={get:function(){return this.memoized(n,i)},set:function(t){}};Object.defineProperty(t.prototype,r,o)}var At=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e.defaultAttributes={isRoutable:!0},e.relationshipNames=["resource-associations","resource-attributes","resource-validators"],e}(bt);d.map(At.relationshipNames,function(t){It(At,t)});var _t=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e.prototype.isForAttribute=function(t){return d.includes(this.attributeNames,t)},e}(bt),Ft=function(){function t(t){Object.assign(this,t)}return Object.defineProperty(t.prototype,"sliceNames",{get:function(){return this._sliceNames||(this._sliceNames=this.buildSliceNames()),this._sliceNames},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"seedEntities",{get:function(){return this._seedEntities||(this._seedEntities=this.buildSeeds()),this._seedEntities},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"entityTypes",{get:function(){return this._entityTypes||(this._entityTypes=this.buildEntityTypes()),this._entityTypes},enumerable:!0,configurable:!0}),t.prototype.entityTypeFromEntityData=function(e){return d.find(this.entityTypes,function(t){return t.config.ofType(e)})},t.prototype.entityType=function(e){return d.find(this.entityTypes,function(t){return t.config.type==e})},Object.defineProperty(t.prototype,"entitySliceNames",{get:function(){return d.map(this.entityTypes,function(t){return t.sliceName})},enumerable:!0,configurable:!0}),t.prototype.buildSliceNames=function(){var e=this;return d.map(this.entitySliceNames,function(t){return d.join([e.name,"entities",t],".")})},t.prototype.buildSeeds=function(){return d.flatten(d.map(this.entityTypes,d.bind(this.buildEntityTypeSeeds,this)))},t.prototype.buildEntityTypeSeeds=function(r){var n=this;return d.map(r.config.seed,function(t){var e={feature:n.name,type:r.config.type};return d.merge(e,t)})},t.prototype.buildEntityTypes=function(){var t=new mt(this.baseEntityType),e=d.bind(t.build,t),r=d.map(this.entityConfigs,e);return d.assign.apply(d,r)},t}(),Nt="HasOne",Pt="HasMany",Rt={All:"All",Ids:"Ids",Entities:"Entities",Total:"Total",SelectedEntity:"SelectedEntity",Config:"Config",Scope:"Scope"},Dt=function(){function t(){}return t.prototype.clone=function(t,e){return void 0===e&&(e=null),new t.constructor(this.constructorParams(t),e)},t.prototype.constructorParams=function(t){return d.pick(t,["id","feature","type","attributes","relationships"])},t.decorators=[{type:n.Injectable}],t}(),$t=function(){function t(t){this.inflectionService=t}return t.prototype.getFeatureSelectorName=function(t){return t.name},t.prototype.getEntitySelectorName=function(t){return t.sliceName},t.prototype.getNestedSelectorName=function(t,e){var r=this.buildSegments(t),n=this.buildSegments(e,"select"),i=d.flatten([r,n]);return d.join(i,".")},t.prototype.getResourceSelectorName=function(t){return this.selectorIdentifierToSelectorName(t)},t.prototype.getSelectorName=function(t){return this.getResourceSelectorName(t)},t.prototype.buildSegments=function(t,e){void 0===e&&(e="");var r=d.bind(this.inflectionService.camelCase,this),n=[["removePrefix",e],["replace",/ /g,""],["trim","."],["split","."]],i=this.inflectionService.inflect(t,n);return d.map(i,r)},t.prototype.sanitizedSelectorName=function(t){var e=this;t=this.inflectionService.removePrefix(t,"select");return d.map(d.split(t,"."),function(t){return e.inflectionService.camelCase(t)})},t.prototype.selectorIdentifierToSelectorName=function(t){var e=[this.inflectionService.camelCase(t.feature),"entities",this.inflectionService.camelCase(t.entityType),this.inflectionService.camelCase(t.selectorType)];if(d.has(t,"scope")){var r=this.inflectionService.camelCase(t.scope);e.push(r)}return d.join(e,".")},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:p.InflectionService}]},t.ngInjectableDef=n.defineInjectable({factory:function(){return new t(n.inject(p.InflectionService))},token:t,providedIn:"root"}),t}(),Ct=function(a,u,c){return d.reduce(d.map(a.selectors,function(t,e){var r=c.getEntitySelectorName(a),n=c.getNestedSelectorName(r,e),i=y.createSelector(u,t),o={};return o[n]=i,o}),d.merge,{})},jt=function(e){return function(t){return t[e]}},Ot=function(t){return jt(t.sliceName)},Mt=function(t,e){return{name:d.join([t.name,e.name],"."),selector:y.compose(e.selector,t.selector)}},wt=function(t,e,i,o,r){var n=o.getFeatureSelectorName(t),a={name:n,selector:y.createFeatureSelector(n)};i.addSelector(a);var u=o.getNestedSelectorName(n,"entities"),c=jt("entities"),s={name:u,selector:y.compose(c,a.selector)};i.addSelector(s);var p=o.getNestedSelectorName(n,"config"),f=jt("config"),l={name:p,selector:y.compose(f,a.selector)};i.addSelector(l);d.map(e,function(t){var e=Ot(t),r=Ct(t,e,o),n=d.map(r,function(t,e){return Mt(s,{name:e,selector:t})});d.map(n,function(t){i.addSelector(t)})}),r(i)},Lt=function(t,e){return y.createSelector(t,function(t){return t&&t.where?t.where(e):t})},Yt=function(t,e,r){void 0===r&&(r="id");return y.createSelector(t,function(t){return t.find(d.get(e,r))})},Ut=y.createFeatureSelector("entity"),kt={features:function(t){return t.features},primaryEntity:function(t){return d.get(t,"primaryEntity.entity")},primaryEntityIdentifier:function(t){return d.get(t,"primaryEntity.resourceIdentifier")}},xt=d.mapValues(kt,function(t,e){return y.createSelector(Ut,t)}),qt=function(){function t(t,e,r){this.inflectionService=t,this.store=e,this.selectorNameService=r,this.selectors={}}return t.prototype.select$=function(t){var e=this.getSelector(t);return this.store.select(e)},t.prototype.select=function(t){return this.select$(t)},t.prototype.selectorFromSelectorIdentifier=function(t){var e=this.selectorNameService.getResourceSelectorName(t);return this.getSelector(e)},t.prototype.getSelector=function(t){var e=this.selectorPath(t);return d.get(this.selectors,e)},t.prototype.addSelector=function(t){var e=this.selectorPath(t.name);return this.log(t,e,!1),d.set(this.selectors,e,t.selector)},t.prototype.selectorPath=function(t){var e=d.split(t,".");return e.push("selector"),d.join(e,".")},t.prototype.log=function(t,e,r){void 0===r&&(r=!1),r&&console.log("Registering the selector "+e)},t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[{type:p.InflectionService},{type:y.Store},{type:$t}]},t}(),Bt=function(){function t(t,e){this.selectorService=t,this.store=e,this.defaultOpts={selectorType:Rt.All},this.subscribeToFeatures()}return t.prototype.provide=function(t,e){return void 0===e&&(e={}),e=d.defaults(e,this.defaultOpts),this.customSelector(t,e)||this.defaultSelector(t,e)},t.prototype.customSelector=function(e,t){void 0===t&&(t={});var r=this.features[e.feature];if(r){var n=d.find(r.selectors,function(t){return t.isValid(e)});return n?n.selector(this.selectorService,e):null}return null},t.prototype.defaultSelector=function(t,e){void 0===e&&(e={}),this.isRelationshipResourceRequest(t)&&(t={feature:t.feature,type:t.relationship.type});var r=this.selectorIdentifier(t,e),n=this.getBaseSelector(r);return this.isFindRequest(t)&&(n=this.findSelector(n,t)),this.isFilteredResourceRequest(t)&&(n=this.filterSelector(n,t)),n},t.prototype.isRelationshipResourceRequest=function(t){return d.has(t,"relationship")},t.prototype.selectorIdentifier=function(t,e){void 0===e&&(e={});var r=this.isScopedResourceIdentifier(t),n=r?"scope":e.selectorType,i={feature:t.feature,entityType:t.type,selectorType:n};return r&&(i=d.merge(i,{scope:t.filter.scope})),i},t.prototype.getBaseSelector=function(t){return this.selectorService.selectorFromSelectorIdentifier(t)},t.prototype.isFindRequest=function(t){return!d.isEmpty(this.findPropPath(t))},t.prototype.findPropPath=function(t){var e=this.getPrimaryKeys(t);if(d.has(t,"id")&&d.includes(e,"id"))return"id";var r=d.keys(this.getFilterParams(t)),n=d.head(d.intersection(e,r));return n?"filter."+n:null},t.prototype.findSelector=function(t,e){return Yt(t,e,this.findPropPath(e))},t.prototype.isFilteredResourceRequest=function(t){return d.has(t,"filter")},t.prototype.filterSelector=function(t,e){var r=this.getFilterParams(e);return Lt(t,r)},t.prototype.isScopedResourceIdentifier=function(t){return d.has(t,"filter.scope")},t.prototype.subscribeToFeatures=function(){var e=this;this.features$=this.store.select(xt.features),this.features$.subscribe(function(t){return e.features=t})},t.prototype.getFeature=function(t){return this.features[t.feature]},t.prototype.getFilterParams=function(t){return d.omit(t.filter,"scope")},t.prototype.getPrimaryKeys=function(t){var e=["id"],r=this.getFeature(t).entityType(t.type);return r&&(e=r.config.primaryKeys||e),e},t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[{type:qt},{type:y.Store}]},t}(),Ht=[$t,Bt,qt],Vt=function(){function t(){this.defaultDataServiceOpts={syncWithApi:!1}}return t.prototype.provide$=function(t,e,r,n){void 0===n&&(n={});var i=this.relationshipData(e,r);if(!i)return f.of(null);var o=this.relationshipType(i);return o?this.loadRelationshipData$(t,e,i,o,n):f.of(null)},t.prototype.loadRelationshipData$=function(t,e,r,n,i){void 0===i&&(i={});var o,a="";if(n==Nt&&(a=r.type,o=this.prepareHasOne),n==Pt){if(d.isEmpty(r))a=this.defaultRelationResourceType(e);else a=r[0].type||"entity";o=this.prepareHasMany}return this.loadResourceTypeData$(t,e,a,i).pipe(l.map(function(t){return o(r,t)}))},t.prototype.prepareHasMany=function(t,e){var r=d.map(t,"id");return e.where({id:r})},t.prototype.prepareHasOne=function(t,e){return e.find(t.id)},t.prototype.loadResourceTypeData$=function(t,e,r,n){void 0===n&&(n={});var i={feature:e.feature,type:r};return t.get$(i,this.buildDataServiceOpts(n))},t.prototype.buildDataServiceOpts=function(t){return void 0===t&&(t={}),d.defaults(t,this.defaultDataServiceOpts)},t.prototype.relationshipData=function(t,e){if(t&&t.relationships){var r=t.relationships[e];return r?r.data:null}return null},t.prototype.relationshipType=function(t){return d.has(t,"id")?Nt:t instanceof Array?Pt:null},t.prototype.defaultRelationResourceType=function(t){switch(t.feature){case"app":return"sunray-entities";case"cms":return"wordpress-entities";default:return"sunray-entities"}},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ngInjectableDef=n.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),Gt=function(){function t(t){this.store=t}return t.prototype.provide$=function(e){var r=this;return this.getFeature$(e.feature).pipe(l.map(function(t){return r.getEntityType(t,e)}))},t.prototype.getEntityType=function(t,e){return this.getCustomEntityType(t,e)||t.baseEntityType},t.prototype.getCustomEntityType=function(t,e){return t.entityTypeFromEntityData(e)},t.prototype.getFeature$=function(e){return this.features$.pipe(l.map(function(t){return t[e]}))},Object.defineProperty(t.prototype,"features$",{get:function(){return this._features$||(this._features$=this.buildFeatures$()),this._features$},enumerable:!0,configurable:!0}),t.prototype.buildFeatures$=function(){return this.store.select(xt.features)},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:y.Store}]},t.ngInjectableDef=n.defineInjectable({factory:function(){return new t(n.inject(y.Store))},token:t,providedIn:"root"}),t}(),zt=function(){function t(t,e){this.entityTypeProvider=t,this.relationshipProvider=e}return t.prototype.build$=function(e){return this.getEntityType$(e).pipe(l.map(function(t){return new t(e)}))},t.prototype.getEntityType$=function(t){return this.entityTypeProvider.provide$(t)},t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[{type:Gt},{type:Vt}]},t}(),Kt=function(){function t(t,e,r,n,i){this.store=t,this.selectorProvider=e,this.entityRelationshipProvider=r,this.entityCloner=n,this.entityFactory=i,this.defaultOpts={syncWithApi:!0,selectorOpts:{selectorType:Rt.All}}}return t.prototype.build$=function(t){var e=this;return this.entityFactory.build$(t).pipe(l.map(function(t){return e.decoratedData(t)}))},t.prototype.create$=function(t,e){void 0===e&&(e={});var r=A;return this.executeRequest$(t,e,r)},t.prototype.delete$=function(t,e){void 0===e&&(e={});var r=M;return this.executeRequest$(t,e,r)},t.prototype.get$=function(t,e){void 0===e&&(e={});var r=F;return this.executeRequest$(t,e,r)},t.prototype.update$=function(t,e){void 0===e&&(e={});var r=V;return this.executeRequest$(t,e,r)},t.prototype.relationship$=function(t,e,r){return void 0===r&&(r={}),this.entityRelationshipProvider.provide$(this,t,e,r)},t.prototype.get=function(t,e){return void 0===e&&(e={}),this.get$(t,e)},t.prototype.executeRequest$=function(t,e,r){var n=this;if(void 0===e&&(e={}),e=d.defaults(e,this.defaultOpts),this.shouldDispatch(t,e)){var i=new r(this.getSliceName(t),t);this.store.dispatch(i)}var o=this.getSelector(t,e);return o?this.storeData$(o,e).pipe(l.map(function(t){return n.decoratedData(t)})):this.noData$()},t.prototype.storeData$=function(t,e){return void 0===e&&(e={}),this.store.select(t)},t.prototype.decoratedData=function(t){var e=this,r=function(t){return e.entityCloner.clone(t,e)};if(t){if(yt.prototype.isPrototypeOf(t)){var n=t.map(r);return new yt(n)}if(bt.prototype.isPrototypeOf(t))return r(t)}return t},t.prototype.getSelector=function(t,e){return void 0===e&&(e={}),this.selectorProvider.provide(t,e.selectorOpts)},t.prototype.shouldDispatch=function(t,e){return void 0===e&&(e={}),e.syncWithApi},t.prototype.getSliceName=function(t){return d.join([t.feature,"entities",t.type],".")},t.prototype.noData$=function(){return f.of([])},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:y.Store},{type:Bt},{type:Vt},{type:Dt},{type:zt}]},t.ngInjectableDef=n.defineInjectable({factory:function(){return new t(n.inject(y.Store),n.inject(Bt),n.inject(Vt),n.inject(Dt),n.inject(zt))},token:t,providedIn:"root"}),t}(),Wt=function(){function t(){}return t.prototype.build=function(t){return{feature:t.feature,type:t.type,id:t.id,attributes:d.omit(t,["id","feature"])}},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ngInjectableDef=n.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),Xt=function(){function t(){}return t.prototype.build=function(t){return d.pick(t,["feature","type","id","attributes","relationships"])},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ngInjectableDef=n.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),Jt=[Wt,Xt],Zt=function(){function t(t,e,r){this.entityFactory=t,this.apiService=e,this.attributeBuilder=r}return t.prototype.create$=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.apiEntityRequest$.apply(this,b(["create$"],t))},t.prototype.post$=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.apiEntityRequest$.apply(this,b(["post$"],t))},t.prototype.delete$=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.apiEntityRequest$.apply(this,b(["delete$"],t))},t.prototype.get$=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.apiEntityRequest$.apply(this,b(["get$"],t))},t.prototype.update$=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.apiEntityRequest$.apply(this,b(["update$"],t))},t.prototype.apiEntityRequest$=function(t){for(var e,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return this.entityData$((e=this.apiService)[t].apply(e,b(r)))},t.prototype.entityData$=function(t){var e=this;return t.pipe(l.mergeMap(function(t){return e.buildEntityData$(t)}))},t.prototype.buildEntityData$=function(e){return this.buildEntities$(e).pipe(l.map(function(t){return{data:t,resourceIdentifier:e.resourceIdentifier}}))},t.prototype.buildEntities$=function(t){var e=t.resourceIdentifier,r=t.data,n=e.feature,i=d.bind(d.partial(this.buildEntity$,n),this),o=d.map(r,i);return f.combineLatest(o)},t.prototype.buildEntity$=function(t,e){var r={feature:t};d.defaults(e,r);var n=this.attributeBuilder.build(e);return this.entityFactory.build$(n)},t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[{type:zt},{type:e.ApiService},{type:Wt}]},t}(),Qt={SET_PRIMARY_ENTITY:"SET_PRIMARY_ENTITY"},te=function(n){function t(t,e){var r=n.call(this,t)||this;return r.slice=t,r.payload=e,r.type=Qt.SET_PRIMARY_ENTITY,r}return h(t,n),t}(a.PayloadAction),ee=Object.freeze({EntityConfigActionTypes:Qt,SetPrimaryEntity:te}),re=function(){function t(t,e){this.store=t,this.actions$=e,this.init$=f.defer(function(){})}return t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[{type:y.Store},{type:s.Actions}]},m([s.Effect(),v("design:type",f.Observable)],t.prototype,"init$",void 0),t}();function ne(t,e){var r={};switch(e.type){case Qt.SET_PRIMARY_ENTITY:return r={primaryEntity:d.omit(e.payload,"feature")},d.assign({},t,r);default:return t}}var ie=y.createFeatureSelector("app"),oe={ADD_FEATURE:"[EntityFeature] ADD_FEATURE",LOAD_PRIMARY_ENTITY:"[EntityFeature] LOAD_PRIMARY_ENTITY",REGISTER_FEATURE:"[EntityFeature] REGISTER_FEATURE",SELECT_PRIMARY_ENTITY:"[EntityFeature] SELECT_PRIMARY_ENTITY",SET_PRIMARY_ENTITY:"[EntityFeature] SET_PRIMARY_ENTITY",SET_PRIMARY_ENTITY_IDENTIFIER:"[EntityFeature] SET_PRIMARY_ENTITY_IDENTIFIER"},ae=Object.freeze({ActionTypes:oe}),ue=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=oe.ADD_FEATURE,t}return h(t,e),t}(a.PayloadAction),ce=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=oe.LOAD_PRIMARY_ENTITY,t}return h(t,e),t}(a.PayloadAction),se=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=oe.REGISTER_FEATURE,t}return h(t,e),t}(a.PayloadAction),pe=function(){this.type=oe.SELECT_PRIMARY_ENTITY},fe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=oe.SET_PRIMARY_ENTITY,t}return h(t,e),t}(a.PayloadAction),le=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=oe.SET_PRIMARY_ENTITY_IDENTIFIER,t}return h(t,e),t}(a.PayloadAction),ye=Object.freeze({AddFeature:ue,LoadPrimaryEntity:ce,RegisterFeature:se,SelectPrimaryEntity:pe,SetPrimaryEntity:fe,SetPrimaryEntityIdentifier:le}),de=function(){function t(t,e,r){this.store=t,this.dataService=e,this.inflectionService=r}return t.prototype.handleRouterNavigation$=function(e){var r=this;return this.features$.pipe(l.mergeMap(function(t){return r.featureRoutableEntities$(t)}),l.map(function(t){return r.resourceIdentifierFromRouterState(t,e)}))},t.prototype.resourceIdentifierFromRouterState=function(t,e){var r=this.entityTypeSlugFromRouterState(e);if(r){var n=t.findByAttr("urlSlug",r);if(n){var i=this.resourceIdentifierOptsFromRouterState(n,e);return d.merge({},n.resourceIdentifier,i)}return null}return null},t.prototype.resourceIdentifierOptsFromRouterState=function(r,t){var e=t.params,n={},i=d.pickBy(e,function(t,e){return d.includes(r.primaryKeys,e)});i&&(n.id=d.head(d.values(i)));var o=d.omit(e,d.keys(i));return d.isEmpty(o)||(n.filter=o),n},t.prototype.entityTypeSlugFromRouterState=function(t){var e=d.map(t.segments,"path");"app"==d.head(e)&&(e=d.drop(e));var r=d.values(t.params);return d.reduce(r,function(t,e){return d.last(t)==e?d.dropRight(t):t},e)[0]},t.prototype.featureRoutableEntities$=function(t){var e=d.bind(this.getRoutableEntities,this),r=d.map(t,e);return f.combineLatest(r).pipe(l.map(function(t){var e=d.flatten(d.map(t,"entities"));return new yt(e)}))},t.prototype.getRoutableEntities=function(e,t){var r=this;return this.resourceConfigurations$(e).pipe(l.map(function(t){return r.routableResourceConfigurations(t)}),l.map(function(t){return r.buildResourceIdentifiers(e,t)}))},t.prototype.routableResourceConfigurations=function(t){return t.where({isRoutable:!0})},t.prototype.resourceConfigurations$=function(t){var e={feature:t.name,type:"resource-configurations"};return this.dataService.get$(e,{syncWithApi:!1})},t.prototype.buildResourceIdentifiers=function(n,t){var e=d.map(t.entities,function(t){var e={resourceIdentifier:{feature:n.name,type:t.resourceType},urlSlug:t.displaySlug,primaryKeys:t.primaryKeys},r={id:t.id,type:"resource-identifiers",attributes:e};return new bt(r)});return new yt(e)},Object.defineProperty(t.prototype,"features$",{get:function(){return this._features$||(this._features$=this.getFeatures$()),this._features$},enumerable:!0,configurable:!0}),t.prototype.getFeatures$=function(){return this.store.select(xt.features)},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:y.Store},{type:Kt},{type:p.InflectionService}]},t.ngInjectableDef=n.defineInjectable({factory:function(){return new t(n.inject(y.Store),n.inject(Kt),n.inject(p.InflectionService))},token:t,providedIn:"root"}),t}(),he=function(){function t(t){this.inflectionService=t}return t.prototype.isValid=function(t){return d.has(t,"feature")&&d.has(t,"type")},t.prototype.isScope=function(t){return d.has(t,"filter.scope")},t.prototype.isSameResource=function(t,e){return d.isEqual(t,e)},t.prototype.scopeName=function(t){var e=d.get(t,"filter.scope");return this.inflectionService.camelCase(e)},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:p.InflectionService}]},t.ngInjectableDef=n.defineInjectable({factory:function(){return new t(n.inject(p.InflectionService))},token:t,providedIn:"root"}),t}(),me=function(){function t(t,e,r,n,i,o){var a=this;this.store=t,this.actions$=e,this.dataService=r,this.routeEntityTypeProvider=n,this.resourceIdentifierService=i,this.selectorProvider=o,this.handleRouterNavigation$=this.actions$.pipe(s.ofType(u.ROUTER_NAVIGATION),l.mergeMap(function(t){return a.routeEntityTypeProvider.handleRouterNavigation$(t.payload.routerState)}),l.distinctUntilChanged(this.resourceIdentifierService.isSameResource),l.tap(function(t){a.resourceIdentifierService.isValid(t)&&a.dataService.get$(t)}),l.map(function(t){return new le(t)})),this.registerFeature$=this.actions$.pipe(s.ofType("[EntityFeature] REGISTER_FEATURE"),l.map(function(t){var e=t.payload;return new ue(e)})),this.loadPrimaryEntity$=this.actions$.pipe(s.ofType("[EntityFeature] LOAD_PRIMARY_ENTITY"),l.mergeMap(function(t){return a.dataService.get$(t.payload)})),this.selectPrimaryEntity$=this.actions$.pipe(s.ofType("[EntityFeature] SELECT_PRIMARY_ENTITY"),l.mergeMap(function(t){return a.store.select(xt.primaryEntityIdentifier)}),l.distinctUntilChanged(this.resourceIdentifierService.isSameResource),l.mergeMap(function(t){if(d.isNil(t))return f.of(null);var e=a.selectorProvider.provide(t);return a.store.select(e)}),l.map(function(t){return new fe(t)})),this.init$=f.defer(function(){return f.of(new pe)})}return t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[{type:y.Store},{type:s.Actions},{type:Kt},{type:de},{type:he},{type:Bt}]},m([s.Effect(),v("design:type",f.Observable)],t.prototype,"handleRouterNavigation$",void 0),m([s.Effect(),v("design:type",f.Observable)],t.prototype,"registerFeature$",void 0),m([s.Effect(),v("design:type",f.Observable)],t.prototype,"loadPrimaryEntity$",void 0),m([s.Effect(),v("design:type",f.Observable)],t.prototype,"selectPrimaryEntity$",void 0),m([s.Effect(),v("design:type",f.Observable)],t.prototype,"init$",void 0),t}(),ve={features:{},primaryEntity:{resourceIdentifier:null,entity:null}};function Ee(t,e){var r={};switch(e.type){case"[EntityFeature] ADD_FEATURE":var n=t.features,i=e.payload,o={};o[i.name]=i,r={features:Object.assign({},n,o)};break;case"[EntityFeature] SET_PRIMARY_ENTITY":(r={primaryEntity:d.cloneDeep(t.primaryEntity)}).primaryEntity.entity=e.payload;break;case"[EntityFeature] SET_PRIMARY_ENTITY_IDENTIFIER":(r={primaryEntity:d.cloneDeep(t.primaryEntity)}).primaryEntity.resourceIdentifier=e.payload}return Object.assign({},t,r)}var be=[me],Se=new n.InjectionToken("Entity Feature Config"),ge=function(){function t(t,e,r,n,i){var o=this;this.store=t,this.actions$=e,this.entityService=r,this.featureConfig=n,this.resourceIdentifierService=i,this.featureName="Feature",this.init$=this.actions$.pipe(s.ofType(this.featureAction("INIT")),l.switchMap(function(t){return[new se(o.featureConfig),new P(o.featureName,o.featureConfig)]})),this.seed$=this.actions$.pipe(s.ofType(this.featureAction("LOAD_SEED_DATA")),l.switchMap(function(t){var r=t.payload,e=t.payload.seedEntities;return d.map(e,function(t){var e=o.getFeatureEntitySlice(r.name,t.type);return new F(e,t)})})),this.load$=this.actions$.pipe(s.ofType.apply(void 0,b(this.sliceActions("LOAD"))),l.mergeMap(function(t){var e=o.buildResourceOpts(t);return o.entityService.get$(e)}),l.map(function(t){return new N(o.featureName,t)})),this.add$=this.actions$.pipe(s.ofType.apply(void 0,b(this.sliceActions("ADD"))),l.mergeMap(function(t){var e=o.buildResourceOpts(t);return o.entityService.create$(e)}),l.map(function(t){return new N(o.featureName,t)})),this.update$=this.actions$.pipe(s.ofType.apply(void 0,b(this.sliceActions("UPDATE"))),l.mergeMap(function(t){var e=o.buildResourceOpts(t);return o.entityService.update$(e)}),l.map(function(t){return new N(o.featureName,t)})),this.asyncSuccess$=this.actions$.pipe(s.ofType(this.featureAction("ASYNC_SUCCESS")),l.map(function(t){return{resourceIdentifier:t.payload.resourceIdentifier,data:o.groupedEntities(t.payload)}}),l.switchMap(function(t){return o.buildAddToStoreActions(t)})),this.delete$=this.actions$.pipe(s.ofType.apply(void 0,b(this.sliceActions("DELETE"))),l.mergeMap(function(t){var e=o.buildResourceOpts(t);return o.entityService.delete$(e)}),l.map(function(t){return new L(o.getEntitySlice(t.resourceIdentifier.type),t.data)})),this.loadApplicationResource$=this.actions$.pipe(s.ofType("[ApplicationConfig] LOAD_RESOURCE_BY_ID"),l.mergeMap(function(){return o.store.select(a.applicationConfigSelectors.resourceById)}),l.filter(function(t){return o.isValidPayload(t)}),l.mergeMap(function(t){return o.entityService.get$(t)}),l.filter(function(t){return o.isValidResource(t)}),l.map(function(t){return new a.ApplicationConfigActions.SetPrimaryEntity(t)})),this.featureName=n.name}return t.prototype.ngrxOnIdentifyEffects=function(){return this.featureName},t.prototype.ngrxOnInitEffects=function(){return new I(this.featureName,this.featureConfig)},t.prototype.buildAddToStoreActions=function(t){var e=[],r=d.map(t.data,d.bind(this.buildAddEntitiesAction,this));if(e=e.concat(r),this.resourceIdentifierService.isScope(t.resourceIdentifier)){var n=this.buildAddScopeEntitiesAction(t);e=e.concat([n])}return d.flatten(e)},t.prototype.buildAddEntitiesAction=function(t){return new _(this.getEntitySlice(t.sliceName),t.entities)},t.prototype.buildAddScopeEntitiesAction=function(t){var e=t.resourceIdentifier,r=this.resourceIdentifierService.scopeName(e),n=e.type,i={scope:r,entities:d.find(t.data,function(t){return t.sliceName==n}).entities};return new Q(this.getEntitySlice(n),i)},t.prototype.groupedEntities=function(t){var e=t.data;return d.values(d.reduce(e,function(t,e){var r=e.constructor.sliceName,n=[];return t[r]&&(n=t[r].entities),n.push(e),t[r]={sliceName:r,entities:n},t},{}))},t.prototype.isValidPayload=function(t){return d.has(t,"feature")&&d.has(t,"type")&&d.has(t,"id")},t.prototype.isValidResource=function(t){return t},t.prototype.buildResourceOpts=function(t){var e={type:d.last(d.split(t.slice,"."))};return e=d.merge({},e,t.payload),{payload:t.payload,type:d.last(d.split(t.slice,".")),data:t.payload.data,resourceIdentifier:e}},t.prototype.featureAction=function(t){var e=this.featureConfig.name;return a.typeFor(e,S[t])},t.prototype.sliceActions=function(e){return d.map(this.featureConfig.sliceNames,function(t){return a.typeFor(t,S[e])})},t.prototype.getSliceName=function(t){return d.join([t.feature,"entities",t.type],".")},t.prototype.getEntitySlice=function(t){return this.getFeatureEntitySlice(this.featureName,t)},t.prototype.getFeatureEntitySlice=function(t,e){return d.join([t,"entities",e],".")},t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[{type:y.Store},{type:s.Actions},{type:Zt},{type:undefined,decorators:[{type:n.Inject,args:[Se]}]},{type:he}]},m([s.Effect(),v("design:type",f.Observable)],t.prototype,"init$",void 0),m([s.Effect(),v("design:type",f.Observable)],t.prototype,"seed$",void 0),m([s.Effect(),v("design:type",f.Observable)],t.prototype,"load$",void 0),m([s.Effect(),v("design:type",f.Observable)],t.prototype,"add$",void 0),m([s.Effect(),v("design:type",f.Observable)],t.prototype,"update$",void 0),m([s.Effect(),v("design:type",f.Observable)],t.prototype,"asyncSuccess$",void 0),m([s.Effect(),v("design:type",f.Observable)],t.prototype,"delete$",void 0),m([s.Effect(),v("design:type",f.Observable)],t.prototype,"loadApplicationResource$",void 0),t}(),Te=b([Kt,Dt,ge,zt,Vt,Zt,Gt,he,de,Kt],Jt,Ht),Ie=function(t,e,r){return new(d.get(r,"entityConfigClass",e))(d.merge(d.omit(r,["entityConfigClass"]),{apiConfig:t}))};function Ae(t){var e,r,n,i,o=t.sliceName;return e=o,r={},n=c.createEntityAdapter().getInitialState(),i={selectedEntityId:null,config:{entityType:t},scopes:{}},n=Object.assign({},n,i,t.config.initialState),r[e]=n,r}var _e=function(t){var e={};return e[t.sliceName]=t.reducer,e},Fe=[{provide:Se,useValue:{name:"Default Feature",entityConfigs:[],baseEntityType:bt},multi:!0}],Ne=function(){function t(){}return t.decorators=[{type:n.NgModule,args:[{imports:[y.StoreModule.forFeature("entity",Ee,{initialState:ve}),s.EffectsModule.forFeature(b(be))],declarations:[],providers:b(Te,Fe)}]}],t}(),Pe=function(){function t(t,e){this.entity$=t,this.form$=e}return Object.defineProperty(t.prototype,"entity$",{get:function(){return this._entity$},set:function(t){var e=this;(this._entity$=t).subscribe(function(t){return e.entity=t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"form$",{get:function(){return this._form$},set:function(t){var e=this;(this._form$=t).subscribe(function(t){return e.form=t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"entity",{get:function(){return this._entity},set:function(t){this._entity=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"form",{get:function(){return this._form},set:function(t){this._form=t},enumerable:!0,configurable:!0}),t.prototype.formToEntity=function(){this.entity.updateAttributes(this.form.value)},t}(),Re=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e.relationshipNames=["form-fields"],e}(bt);d.map(Re.relationshipNames,function(t){It(Re,t)});var De=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e}(bt),$e=function(){function t(){}return t.prototype.build=function(t,e){var r=this;return t.pipe(l.map(function(t){return d.map(t.entities,function(t){return r.getOptions(e,t)})}))},t.prototype.getOptions=function(t,e){return{key:e.id,value:e.attributes[t]}},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ngInjectableDef=n.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),Ce=[{key:"default_project_roles",value:"name",name:"project-roles"}],je=function(){function t(t,e){this.dataService=t,this.optionsFactory=e}return t.prototype.build=function(t){var e="name",r=p.pluralize(t.name.replace("_id","")),n=Ce.filter(function(t){return t.key===r});return 0<n.length?(e=n[0].value,this.selectorData$=this.getSelectors$(n[0].name)):this.selectorData$=this.getSelectors$(r),this.optionsFactory.build(this.selectorData$,e)},t.prototype.getSelectors$=function(t){var e={feature:"app",type:t};return this.dataService.get$(e)},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:Kt},{type:$e}]},t.ngInjectableDef=n.defineInjectable({factory:function(){return new t(n.inject(Kt),n.inject($e))},token:t,providedIn:"root"}),t}(),Oe=function(){function e(t){this.selectFactory=t}return e.prototype.build=function(t){return{type:e.formMemberType,data:{label:this.labelParams(t),control:this.controlParams(t)}}},e.prototype.labelParams=function(t){return{text:t.displayName}},e.prototype.controlParams=function(t){var e={controlType:this.controlType(t),placeholder:t.displayName,key:t.name,validators:this.buildEntityValidators(t),displayName:t.displayName},r=this.controlTypeData(t,this.controlType(t));return d.defaults(e,r)},e.prototype.controlType=function(t){return t.name.includes("_id")?"select":"boolean"==t.dataType?"checkbox":e.defaultControlType},e.prototype.controlTypeData=function(t,e){switch(e){case"select":return this.selectControlTypeData(t);case"input":return this.inputControlTypeData(t);default:return{}}},e.prototype.selectControlTypeData=function(t){return{options:this.selectFactory.build(t)}},e.prototype.inputControlTypeData=function(t){return{required:!0,inputType:this.inputType(t)}},e.prototype.inputType=function(t){var e="text";return"email"==t.name&&(e="email"),"password"==t.name&&(e="password"),e},e.prototype.buildEntityValidators=function(t){var e=[r.Validators.required];return"email"==t.name&&e.push(r.Validators.email),e},e.defaultControlType="input",e.formMemberType="form-item",e.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:je}]},e.ngInjectableDef=n.defineInjectable({factory:function(){return new e(n.inject(je))},token:e,providedIn:"root"}),e}(),Me=function(){function t(){}return t.prototype.build=function(t){return{type:"form-item",data:{control:{validators:[r.Validators.required]}}}},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ngInjectableDef=n.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),we=function(){function t(){}return t.prototype.build=function(t){var e=this.pluralizeType(t);return{memberType:"form-group",key:this.inputKey(t),resourceType:e,formName:this.buildFormName(e)}},t.prototype.pluralizeType=function(t){return p.pluralize(p.snakeCase(t.className))},t.prototype.inputKey=function(t){return t.name+"_attributes"},t.prototype.buildFormName=function(t,e){return void 0===e&&(e="edit"),t+"."+e},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ngInjectableDef=n.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),Le=function(){function t(t,e){this.formControlDataFactory=t,this.formControlValidatorFactory=e}return t.prototype.build=function(t){return this.resolveParamsFactory(t).build(t)},t.prototype.resolveParamsFactory=function(t){switch(t.type){case"resource-attributes":return this.formControlDataFactory;case"resource-validators":return this.formControlValidatorFactory;default:return this.formControlDataFactory}},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:Oe},{type:Me}]},t.ngInjectableDef=n.defineInjectable({factory:function(){return new t(n.inject(Oe),n.inject(Me))},token:t,providedIn:"root"}),t}(),Ye=function(){function t(t,e){this.formGroupDataFactory=t,this.formItemDataFactory=e}return t.prototype.resolve=function(t){switch(t.type){case"resource-associations":return this.formGroupDataFactory;case"resource-attributes":case"resource-validators":default:return this.formItemDataFactory}},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:we},{type:Le}]},t.ngInjectableDef=n.defineInjectable({factory:function(){return new t(n.inject(we),n.inject(Le))},token:t,providedIn:"root"}),t}(),Ue=function(){function t(t){this.dataFactoryResolver=t}return t.prototype.build=function(t){return this.resolveDataFactory(t).build(t)},t.prototype.resolveDataFactory=function(t){return this.dataFactoryResolver.resolve(t)},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:Ye}]},t.ngInjectableDef=n.defineInjectable({factory:function(){return new t(n.inject(Ye))},token:t,providedIn:"root"}),t}(),ke=function(){function t(){}return t.prototype.provide$=function(e,r,n){var i=this;return e.relationship$(n).pipe(l.filter(function(t){return i.relationshipFullyLoaded(e,n,t)}),l.map(function(t){return t.invokeFilter("isForAttribute",r.inputName)}))},t.prototype.relationshipFullyLoaded=function(t,e,r){var n=t.relationshipSize(e);return r.length==n},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ngInjectableDef=n.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),xe=function(){function t(t){this.relationshipProvider=t,this.relationshipTypes=["resource-attributes","resource-associations","resource-validators"]}return t.prototype.provide$=function(t,e){var r=d.bind(d.partial(this.provideRelationship$,t,e),this),n=d.map(this.relationshipTypes,r);return f.zip.apply(void 0,b(n)).pipe(l.map(function(t){return d.flatMap(t,"entities")}))},t.prototype.flattenedRelationships=function(t){return d.flatMap(d.pick(t,"entities"))},t.prototype.provideRelationship$=function(t,e,r){return this.relationshipProvider.provide$(t,e,r)},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:ke}]},t.ngInjectableDef=n.defineInjectable({factory:function(){return new t(n.inject(ke))},token:t,providedIn:"root"}),t}(),qe=function(){function t(t,e){this.relationshipsProvider=t,this.relationshipDataFactory=e}return t.prototype.provide$=function(t,e){var r=this;return this.relationships$(t,e).pipe(l.map(function(t){return r.buildParams(t,e)}))},t.prototype.relationships$=function(t,e){return this.relationshipsProvider.provide$(t,e)},t.prototype.buildParams=function(t,e){var r=d.bind(this.buildEntityFormMemberParams,this),n=d.map(t,r);return d.merge.apply(d,b([{}],n))},t.prototype.buildEntityFormMemberParams=function(t){return this.relationshipDataFactory.build(t)},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:xe},{type:Ue}]},t.ngInjectableDef=n.defineInjectable({factory:function(){return new t(n.inject(xe),n.inject(Ue))},token:t,providedIn:"root"}),t}(),Be=function(){function t(t,e,r){this.formMemberFactory=t,this.formMemberFactoryParamsService=e,this.formFactory=r}return t.prototype.build$=function(t,e){return this.buildFormGroup$(t,e,null)},t.prototype.buildFormGroup$=function(e,t,r){var n=this;return t.formFields$.pipe(l.mergeMap(function(t){return n.buildFormMembersParams$(e,t)}),l.map(function(t){return n.buildFormMembers(t)}),l.map(function(t){return n.buildForm(t,r)}))},t.prototype.buildFormMembersParams$=function(t,e){var r=d.partial(d.bind(this.buildFormMemberParams$,this),t),n=d.map(e.entities,r);return f.combineLatest.apply(void 0,b(n)).pipe(l.map(function(t){return d.merge.apply(d,b([{}],t))}))},t.prototype.buildFormMemberParams$=function(t,r){return this.formMemberFactoryParamsService.provide$(t,r).pipe(l.map(function(t){var e=[r.inputName,t];return d.fromPairs([e])}))},t.prototype.buildFormMembers=function(t){var e=this;return d.mapValues(t,function(t){return e.formMemberFactory.build(t)})},t.prototype.buildForm=function(t,e){var r;if(e){var n=[e,t];r=d.fromPairs([n])}else r=t;return this.formFactory.build(r)},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:e.FormMemberFactory},{type:qe},{type:e.FormFactory}]},t.ngInjectableDef=n.defineInjectable({factory:function(){return new t(n.inject(e.FormMemberFactory),n.inject(qe),n.inject(e.FormFactory))},token:t,providedIn:"root"}),t}(),He=function(){function t(t,e){this.resourceConfigurationFormFactory=t,this.dataService=e}return t.prototype.build$=function(t,e){var i=this;return f.combineLatest(this.resourceConfiguration$(t),this.form$(t,e.formName)).pipe(l.mergeMap(function(t){var e=E(t,2),r=e[0],n=e[1];return i.resourceConfigurationFormFactory.build$(r,n)}))},t.prototype.form$=function(t,e){var r={feature:t.feature,type:"forms",id:e};return this.loadData$(r)},t.prototype.resourceConfiguration$=function(t){var e={feature:t.feature,type:"resource-configurations",id:t.type};return this.loadData$(e)},t.prototype.loadData$=function(t){return this.dataService.get$(t).pipe(l.filter(function(t){return!d.isNil(t)}))},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:Be},{type:Kt}]},t.ngInjectableDef=n.defineInjectable({factory:function(){return new t(n.inject(Be),n.inject(Kt))},token:t,providedIn:"root"}),t}(),Ve=function(){function t(t){this.formFactory=t}return t.prototype.build=function(t,e){var r=this.buildForm$(t,e).pipe(l.shareReplay(1));return new Pe(t,r)},t.prototype.buildForm$=function(t,e){var r=this;return t.pipe(l.shareReplay(1),l.mergeMap(function(t){return r.buildForm(t,e)}))},t.prototype.buildForm=function(t,e){var r={formName:e};return this.formFactory.build$(t,r)},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:He}]},t.ngInjectableDef=n.defineInjectable({factory:function(){return new t(n.inject(He))},token:t,providedIn:"root"}),t}(),Ge=[Oe,Me,we,Le,je,$e],ze=[qe],Ke=[Ue,Ye,ke,xe],We=b([Be],Ge,ze,Ke),Xe=b(We),Je=b([He,Ve],Xe),Ze=function(){function t(){}return t.decorators=[{type:n.NgModule,args:[{imports:[e.CeoFormsModule],declarations:[],providers:b(Je)}]}],t}();t.EntityActions=tt,t.EntityAction=T,t.EntityActionsMap=S,t.EntityAdapter=dt,t.EntityAdapterFactory=ht,t.EntityTypeFactory=mt,t.EntityCollection=yt,t.EntityConfig=vt,t.EntityEffectsConfig=Et,t.actionType=it,t.addMany=ot,t.addOne=at,t.removeMany=ut,t.removeOne=ct,t.setScopeIds=st,t.updateMany=pt,t.updateOne=ft,t.entityReducer=lt,t.JsonApiEntity=bt,t.ResourceAssociationEntity=St,t.ResourceAttributeEntity=gt,t.ResourceConfigurationEntity=At,t.ResourceValidatorEntity=_t,t.FeatureConfig=Ft,t.EntityHasOneRelationshipType=Nt,t.EntityHasManyRelationshipType=Pt,t.EntitySelectorTypes=Rt,t.entityServices=Te,t.DataService=Kt,t.EntityCloner=Dt,t.EntityDataService=Kt,t.EntityEffects=ge,t.EntityFactory=zt,t.EntityService=Zt,t.EntityRelationshipProvider=Vt,t.EntityTypeProviderService=Gt,t.ResourceIdentifierService=he,t.RouteEntityTypeProvider=de,t.EntityAttributeBuilder=Wt,t.JsonApiEntityAttributeBuilder=Xt,t.EntitySelectorNameService=$t,t.EntitySelectorService=qt,t.EntitySelectorProvider=Bt,t.EntityConfigActions=ee,t.EntityConfigEffects=re,t.configInitialState={primaryEntity:{feature:"",type:"",id:""}},t.entityConfigReducer=ne,t.selectAppFeature=ie,t.FeatureActions=ye,t.FeatureActionTypes=ae,t.FeatureEffects=me,t.featureInitialState=ve,t.featureReducer=Ee,t.selectEntityFeature=Ut,t.entityFeatureSelectors=xt,t.initialState=ve,t.reducer=Ee,t.effects=be,t.buildEntityEffects=function(t,e,r,n,i){return new ge(t,e,r,n,i)},t.buildEntityConfigs=function(t,e,r){var n=d.partial(Ie,e,r);return d.map(d.sortBy(t,"type"),n)},t.buildEntityInitialState=Ae,t.buildEntityRelationshipProperty=Tt,t.defineEntityRelationshipGetSet=It,t.buildEntityRelationshipProperties=function(t){var e=d.partial(It,t);d.map(t.relationshipNames,e)},t.buildEntityService=function(t,e,r){return new Zt(t,e,r)},t.buildEntityTypeProvider=function(t){return new Gt(t)},t.buildEntityTypes=function(t,o){return d.reduce(t,function(t,e){var r,n=p.classify(e.name),i=(r=e,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e._sliceName=r.name,e.config=r,e}(o));return t[n]=i,t},{})},t.buildFeatureConfig=function(t){return new Ft(t)},t.buildFeatureInitialState=function(t){var e=new Ft(t).entityTypes;return{entities:d.reduce(d.map(e,Ae),d.merge,{})}},t.buildFeatureReducer=function(t,e,r,n){var i=new ht(t).adapters;wt(t,i,e,r,n);var o=d.join([t.name,"entities"],"."),a=d.reduce(d.map(i,_e),d.merge,{}),u={config:ne,entities:function(t,e){var r=e.slice;if(d.startsWith(r,o)){var n=d.last(d.split(r,".")),i={};return n&&(i[n]=a[n](t[n],e)),Object.assign({},t,i)}return t}};return y.combineReducers(u)},t.buildScopeSelectors=rt,t.buildEntitySelectors=Ct,t.buildEntityTypeSelectors=nt,t.buildEntityTypeSliceSelector=Ot,t.buildFeatureSelector=wt,t.buildFilterSelector=Lt,t.buildFindSelector=Yt,t.buildRootSelector=Mt,t.buildSliceSelector=jt,t.FEATURE_CONFIG=Se,t.providers=Fe,t.EntityModule=Ne,t.EntityFormManager=Pe,t.FormEntity=Re,t.FormFieldEntity=De,t.EntityFormFactory=He,t.EntityFormManagerFactory=Ve,t.ResourceConfigurationFormFactory=Be,t.FormControlDataFactory=Oe,t.FormControlValidatorFactory=Me,t.FormGroupDataFactory=we,t.FormItemDataFactory=Le,t.DropdownFactory=je,t.DropdownOptionsFactory=$e,t.FormMemberFactoryParamsService=qe,t.RelationshipDataFactory=Ue,t.RelationshipDataFactoryResolver=Ye,t.RelationshipProvider=ke,t.RelationshipsProvider=xe,t.CeoEntityFormsModule=Ze,t.a=Jt,t.b=Ht,t.f=Ge,t.g=ze,t.h=Ke,t.e=We,t.d=Xe,t.c=Je,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ceo-entity.umd.min.js.map