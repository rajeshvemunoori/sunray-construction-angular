!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("rxjs/operators"),require("@ceo/core"),require("lodash"),require("@angular/common/http"),require("@ceo/shared"),require("@ceo/entity"),require("@angular/core"),require("@ngrx/store"),require("@ngrx/effects")):"function"==typeof define&&define.amd?define("@ceo/wordpress",["exports","rxjs/operators","@ceo/core","lodash","@angular/common/http","@ceo/shared","@ceo/entity","@angular/core","@ngrx/store","@ngrx/effects"],t):t((e.ceo=e.ceo||{},e.ceo.wordpress={}),e.rxjs.operators,e.core,e._,e.ng.common.http,e.shared,e.entity,e.ng.core,e.store,e.effects)}(this,function(e,n,a,o,t,s,r,i,p,u){"use strict";var c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function l(e,t){function r(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function d(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(i=o.next()).done;)s.push(i.value)}catch(u){n={error:u}}finally{try{i&&!i.done&&(r=o["return"])&&r.call(o)}finally{if(n)throw n.error}}return s}function y(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e}var f=function(i){function e(e,t){var r=i.call(this,e,t)||this;return r.createRenderedAttributeGetters(),r}return l(e,i),Object.defineProperty(e.prototype,"featuredMediaUrl",{get:function(){return this._featuredMediaUrl||(this._featuredMediaUrl=this.getFeaturedMediaUrl()),this._featuredMediaUrl},enumerable:!0,configurable:!0}),e.prototype.attachment$=function(e){var t=this[a.camelCase(e)],r={feature:this.feature,type:"attachments",id:t.id||t.ID};return this.dataService.get$(r).pipe(n.filter(function(e){return!o.isEmpty(e)}))},e.prototype.getFeaturedMediaUrl=function(e){if(void 0===e&&(e=""),!o.has(this,"attributes._embedded.wp:featuredmedia"))return e;var t=this.attributes._embedded["wp:featuredmedia"];return t?t[0].source_url:e},e.prototype.createRenderedAttributeGetters=function(){var s=this,e=this.getAttributesWithRenderedFormat();o.map(e,function(e,t){var r="rendered"+a.pascalCase(t),i="_"+r,n=function(){return s[t].rendered},o={get:function(){return s.memoized(i,n)},set:function(e){}};Object.defineProperty(s,r,o)})},e.prototype.getAttributesWithRenderedFormat=function(){return o.pickBy(this.attributes,function(e){return o.has(e,"rendered")})},e._sliceName="wp-entities",e}(r.JsonApiEntity),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),Object.defineProperty(t.prototype,"htmlTagAttributes",{get:function(){switch(this.htmlMediaType){case"image":return this.imageTagAttributes();case"video":return this.videoTagAttributes();default:return this.imageTagAttributes()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"htmlMediaType",{get:function(){var e=o.find(s.mimeTypes,{mimeType:this.mimeType});return e?e.mediaType:t.defaultMediaType},enumerable:!0,configurable:!0}),t.prototype.imageTagAttributes=function(){return{width:this.mediaDetails.width,height:this.mediaDetails.height,alt:this.altText,src:this.sourceUrl}},t.prototype.videoTagAttributes=function(){return{autoplay:!1,controls:!0,width:this.mediaDetails.width,height:this.mediaDetails.height,src:[{src:this.sourceUrl,type:this.mimeType}]}},t.defaultMediaType="image",t}(f),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.defaultAttributes={isRoutable:!0},t}(f),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.defaultAttributes={isRoutable:!1},t}(f),b="http://sunray-wordpress.customexposure.tech/wp-json",g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.ofType=function(e){if(e.type)return this.type==e.type;var t=o.join([b,this.url],"/"),r=this.urlFromAttributes(e);return a.startsWith(r,t)},t.prototype.urlFromAttributes=function(e){return void 0===e&&(e={}),o.get(e,["attributes","_links","self","0","href"]," ")},t}(r.EntityConfig),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.ofType=function(e){return e.type?"attachment"==e.type:this.urlFromAttributes(e).includes("v2/media")},t}(g),T={type:"attachments",url:"wp/v2/media",entityConfig:w,entityType:m},A=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.ofType=function(e){return e.type?this.type==e.type:this.urlFromAttributes(e).includes("v2/menus")},t.prototype.urlFromAttributes=function(e){return void 0===e&&(e={}),o.get(e,["attributes","meta","links","self"]," ")},t}(g),j={type:"menus",isSeed:!0,seed:[{}],url:"wp-api-menus/v2/menus",entityConfig:A},E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.ofType=function(e){return e.type?"page"==e.type:this.urlFromAttributes(e).includes("v2/pages")},t.prototype.urlFromAttributes=function(e){return void 0===e&&(e={}),o.get(e,["attributes","meta","links","self"]," ")},t}(g),F={type:"pages",url:"wp/v2/pages",primaryKeys:["id","slug"],entityConfig:E},I=[{type:"wordpress-entities"},{type:"categories",isSeed:!0,seed:[{}],url:"wp/v2/categories"},{type:"document-types",url:"wp/v2/document-types"},{type:"ebooks",url:"wp/v2/ebooks"},{type:"faqs",url:"wp/v2/faqs"},{type:"gallery-images",url:"wp/v2/gallery-images"},{type:"infographics",url:"wp/v2/infographics"},{type:"lc-categories",url:"wp/v2/lc-categories"},{type:"posts",url:"wp/v2/posts"},{type:"publications",url:"wp/v2/publications"},{type:"statutory-documents",url:"wp/v2/statutory-documents"},{type:"recorded-webinars",url:"wp/v2/recorded-webinars"},{type:"seminars",url:"wp/v2/seminars"},{type:"states",url:"wp/v2/states",entityType:v},{type:"team-members",url:"wp/v2/team-members"},{type:"testimonials",url:"wp/v2/testimonials"},{type:"video-testimonials",url:"wp/v2/video-testimonials"},{type:"videos",url:"wp/v2/videos"},{type:"webinars",url:"wp/v2/webinars"}],S=o.concat(I,j,F,T),C=o.sortBy(S,"type"),k=o.reduce(C,function(e,t){var r=t.type,i={displayName:a.pascalCase(r),displaySlug:r,resourceType:r,primaryKeys:["id"]};t.entityType&&o.merge(i,t.entityType.defaultAttributes);var n=new h({id:r,type:"resource-configurations",attributes:i});return e[r]=n,e},{}),_={type:"resource-configurations",url:"wp/v2/resource-configurations",entityType:h,initialState:{ids:o.map(k,"id"),entities:k}},P=o.concat(C,_);function R(e){var t=o.get(e,"entityConfig",g),r=o.omit(e,["entityConfig","configuration"]);return new t(r=o.defaults(r,{entityType:f}))}function W(e){return o.map(o.sortBy(e,"type"),R)}var q=W(P);function x(e,t){var r={feature:"cms",entityType:t.type,selectorType:"all"},i=e.selectorFromSelectorIdentifier(r),n=a.pluralize(t.filter.taxonomy),o=t.filter.term,s={feature:"cms",entityType:n,selectorType:"all"},u=e.selectorFromSelectorIdentifier(s);return p.createSelector(i,u,function(e,t){if(e&&e.where){var r=t.findByAttr("slug",o);if(r){var i={};return i[n]=r.id,e.where(i)}return e.none()}return e})}function M(e){var t,r=e.filter;return r&&(t=r,o.has(t,"taxonomy")&&o.has(t,"term"))}var O={selector:x,isValid:M},B=[O],U="cms",D={name:U,entityConfigs:q,baseEntityType:f,selectors:B},N=new r.FeatureConfig(D),V={url:b,defaultBodyParams:{},defaultQueryParams:{_embed:!0,per_page:100},resourceTypes:N.entityTypes},z=new s.ApiConfig(V),G=function(){function e(){this.omittedAttributes=["id","type"]}return e.prototype.build=function(e){return{feature:e.feature,type:e.type,id:e.id,attributes:this.buildAttributes(e)}},e.prototype.buildAttributes=function(e){return o.omit(e,this.omittedAttributes)},e.decorators=[{type:i.Injectable,args:[{providedIn:"root"}]}],e.ngInjectableDef=i.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),J=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.decorators=[{type:i.Injectable}],t}(r.EntityEffects),K=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.filterParams=function(e){var t=this.getFilter(e);return t?{filter:this.sanitizedParams(t)}:{}},t.decorators=[{type:i.Injectable}],t}(s.ApiRequestOptionsBuilder),$=[K],H=y([G,J],$),Q=(new i.InjectionToken("Wordpress API EndpointP Provider"),new i.InjectionToken("Wordpress API Attribute Builder")),L=new i.InjectionToken("API Request Options Builder"),X=new i.InjectionToken("Wordpress API Response Parser"),Y=new i.InjectionToken("Wordpress API Service"),Z=new i.InjectionToken("Feature Reducer"),ee=new i.InjectionToken("Wordpress Entity Service"),te=(new i.InjectionToken("Wordpress Entity Type Provider"),new i.InjectionToken("Wordpress Entity Adapter Factory"),new i.InjectionToken("Wordpress Feature Config")),re=new i.InjectionToken("Wordpress Feature Config Attributes"),ie=new i.InjectionToken("Wordpress Feature Name"),ne=(new i.InjectionToken("Wordpress Base Entity"),new i.InjectionToken("Wordpress Entity Effects"),new i.InjectionToken("Wordpress Custom Selectors")),oe=new i.InjectionToken("Wordpress Entity Attribute Builder");function se(e,t,r,i){var n=new s.ApiRequestUrlBuilder(e),o=new K(e);return new s.ApiService(t,r,i,n,o)}function ue(){return r.buildFeatureInitialState(D)}function ae(e){}var pe=[{provide:Q,useValue:z},{provide:L,useClass:K},{provide:X,useClass:s.ApiResponseParser},{provide:Y,useFactory:se,deps:[Q,t.HttpClient,s.CsvToJsonService,X,L]},{provide:ne,useValue:ae},{provide:oe,useClass:G},{provide:J,useFactory:r.buildEntityEffects,deps:[p.Store,u.Actions,ee,te,r.ResourceIdentifierService]},{provide:ee,useFactory:r.buildEntityService,deps:[r.EntityFactory,Y,oe]},{provide:r.FEATURE_CONFIG,useValue:D,multi:!0},{provide:ie,useValue:U},{provide:Z,deps:[te,r.EntitySelectorService,r.EntitySelectorNameService,ne],useFactory:r.buildFeatureReducer},{provide:te,deps:[re],useFactory:r.buildFeatureConfig},{provide:re,useValue:D}],ce=function(){function e(){}return e.decorators=[{type:i.NgModule,args:[{imports:[p.StoreModule.forFeature(U,Z,{initialState:ue}),u.EffectsModule.forFeature([J])],providers:y(H,pe)}]}],e}();e.WordpressApiModule=ce,e.WordpressEntity=f,e.AttachmentEntity=m,e.ResourceConfigurationEntity=h,e.StateEntity=v,e.apiConfig=z,e.entityConfigs=q,e.featureName=U,e.featureConfig=D,e.services=H,e.EntityAttributeBuilder=G,e.EntityEffects=J,e.ApiRequestOptionsBuilder=K,e.WORDPRESS_FEATURE_REDUCER=Z,e.buildFeatureInitialState=ue,e.buildSelectors=ae,e.tokenProviders=pe,e.ɵt=g,e.ɵn=R,e.ɵo=W,e.ɵw=w,e.ɵx=T,e.ɵq=C,e.ɵp=P,e.ɵr=A,e.ɵs=j,e.ɵu=E,e.ɵv=F,e.ɵy=_,e.ɵz=B,e.ɵbc=M,e.ɵbb=x,e.ɵba=O,e.ɵm=b,e.ɵa=$,e.ɵl=se,e.ɵb=Q,e.ɵc=L,e.ɵd=X,e.ɵe=Y,e.ɵj=ne,e.ɵk=oe,e.ɵf=ee,e.ɵg=te,e.ɵh=re,e.ɵi=ie,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ceo-wordpress.umd.min.js.map