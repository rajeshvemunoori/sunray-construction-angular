{"version":3,"sources":["modules/router-store/router-store.umd.js"],"names":["global","factory","exports","module","require","define","amd","ngrx","routerStore","ng","core","router","rxjs","operators","this","store","NavigationActionTiming","ROUTER_ERROR","RouterStateSerializer","DefaultRouterStateSerializer","prototype","serialize","routerState","root","serializeRoute","url","route","_this","children","map","c","params","paramMap","data","outlet","routeConfig","component","path","pathMatch","redirectTo","queryParams","queryParamMap","fragment","undefined","parent","firstChild","pathFromRoot","__assign","Object","assign","t","s","i","n","arguments","length","p","hasOwnProperty","call","apply","__read","o","m","Symbol","iterator","r","e","ar","next","done","push","value","error","RouterTrigger","_ROUTER_CONFIG","InjectionToken","ROUTER_CONFIG","DEFAULT_ROUTER_FEATURENAME","_createRouterConfig","config","stateKey","serializer","navigationActionTiming","PreActivation","ɵ0","StoreRouterConnectingModule","store$$1","router$$1","errorHandler","lastEvent","trigger","NONE","setUpStoreStateListener","setUpRouterEventsListener","StoreRouterConnectingModule_1","decorator","forRoot","ngModule","providers","provide","useValue","useClass","pipe","select","withLatestFrom","subscribe","_a","_b","navigateIfNeeded","routerStoreState","storeState","state","ROUTER","NavigationStart","STORE","navigateByUrl","catch","handleError","routesRecognized","dispatchNavLate","PostActivation","events","event","snapshot","dispatchRouterRequest","RoutesRecognized","dispatchRouterNavigation","NavigationCancel","dispatchRouterCancel","reset","NavigationError","dispatchRouterError","NavigationEnd","dispatchRouterNavigated","dispatchRouterAction","lastRoutesRecognized","nextRouterState","id","urlAfterRedirects","type","payload","dispatch","decorators","target","key","desc","d","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__decorate","NgModule","useFactory","deps","Inject","k","v","metadata","__metadata","Store","Router","ErrorHandler","ɵngrx_modules_router_store_router_store_a","ɵngrx_modules_router_store_router_store_b","ROUTER_CANCEL","ROUTER_NAVIGATION","ROUTER_NAVIGATED","ROUTER_REQUEST","routerReducer","action","routerAction","navigationId"],"mappings":"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","sourcesContent":["/**\n * @license NgRx 7.2.0\n * (c) 2015-2018 Brandon Roberts, Mike Ryan, Rob Wormald, Victor Savkin\n * License: MIT\n */\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('@angular/router'), require('@ngrx/store'), require('rxjs/operators')) :\n    typeof define === 'function' && define.amd ? define('@ngrx/router-store', ['exports', '@angular/core', '@angular/router', '@ngrx/store', 'rxjs/operators'], factory) :\n    (factory((global.ngrx = global.ngrx || {}, global.ngrx.routerStore = {}),global.ng.core,global.ng.router,global['@ngrx/store'],global.rxjs.operators));\n}(this, (function (exports,core,router,store,operators) { 'use strict';\n\n    /**\n     * An action dispatched when a router navigation request is fired.\n     */\n    var ROUTER_REQUEST = '@ngrx/router-store/request';\n    /**\n     * An action dispatched when the router navigates.\n     */\n    var ROUTER_NAVIGATION = '@ngrx/router-store/navigation';\n    /**\n     * An action dispatched when the router cancels navigation.\n     */\n    var ROUTER_CANCEL = '@ngrx/router-store/cancel';\n    /**\n     * An action dispatched when the router errors.\n     */\n    var ROUTER_ERROR = '@ngrx/router-store/error';\n    /**\n     * An action dispatched after navigation has ended and new route is active.\n     */\n    var ROUTER_NAVIGATED = '@ngrx/router-store/navigated';\n\n    function routerReducer(state, action) {\n        // Allow compilation with strictFunctionTypes - ref: #1344\n        var routerAction = action;\n        switch (routerAction.type) {\n            case ROUTER_NAVIGATION:\n            case ROUTER_ERROR:\n            case ROUTER_CANCEL:\n                return {\n                    state: routerAction.payload.routerState,\n                    navigationId: routerAction.payload.event.id,\n                };\n            default:\n                return state;\n        }\n    }\n\n    var RouterStateSerializer = /** @class */ (function () {\n        function RouterStateSerializer() {\n        }\n        return RouterStateSerializer;\n    }());\n    var DefaultRouterStateSerializer = /** @class */ (function () {\n        function DefaultRouterStateSerializer() {\n        }\n        DefaultRouterStateSerializer.prototype.serialize = function (routerState) {\n            return {\n                root: this.serializeRoute(routerState.root),\n                url: routerState.url,\n            };\n        };\n        DefaultRouterStateSerializer.prototype.serializeRoute = function (route) {\n            var _this = this;\n            var children = route.children.map(function (c) { return _this.serializeRoute(c); });\n            return {\n                params: route.params,\n                paramMap: route.paramMap,\n                data: route.data,\n                url: route.url,\n                outlet: route.outlet,\n                routeConfig: route.routeConfig\n                    ? {\n                        component: route.routeConfig.component,\n                        path: route.routeConfig.path,\n                        pathMatch: route.routeConfig.pathMatch,\n                        redirectTo: route.routeConfig.redirectTo,\n                        outlet: route.routeConfig.outlet,\n                    }\n                    : null,\n                queryParams: route.queryParams,\n                queryParamMap: route.queryParamMap,\n                fragment: route.fragment,\n                component: (route.routeConfig\n                    ? route.routeConfig.component\n                    : undefined),\n                root: undefined,\n                parent: undefined,\n                firstChild: children[0],\n                pathFromRoot: undefined,\n                children: children,\n            };\n        };\n        return DefaultRouterStateSerializer;\n    }());\n\n    var __assign = (undefined && undefined.__assign) || function () {\n        __assign = Object.assign || function(t) {\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\n                s = arguments[i];\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                    t[p] = s[p];\n            }\n            return t;\n        };\n        return __assign.apply(this, arguments);\n    };\n    var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n        var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n        if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n        else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n        return c > 3 && r && Object.defineProperty(target, key, r), r;\n    };\n    var __metadata = (undefined && undefined.__metadata) || function (k, v) {\n        if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n    };\n    var __param = (undefined && undefined.__param) || function (paramIndex, decorator) {\n        return function (target, key) { decorator(target, key, paramIndex); }\n    };\n    var __read = (undefined && undefined.__read) || function (o, n) {\n        var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n        if (!m) return o;\n        var i = m.call(o), r, ar = [], e;\n        try {\n            while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n        }\n        catch (error) { e = { error: error }; }\n        finally {\n            try {\n                if (r && !r.done && (m = i[\"return\"])) m.call(i);\n            }\n            finally { if (e) throw e.error; }\n        }\n        return ar;\n    };\n    (function (NavigationActionTiming) {\n        NavigationActionTiming[NavigationActionTiming[\"PreActivation\"] = 1] = \"PreActivation\";\n        NavigationActionTiming[NavigationActionTiming[\"PostActivation\"] = 2] = \"PostActivation\";\n    })(exports.NavigationActionTiming || (exports.NavigationActionTiming = {}));\n    var _ROUTER_CONFIG = new core.InjectionToken('@ngrx/router-store Internal Configuration');\n    var ROUTER_CONFIG = new core.InjectionToken('@ngrx/router-store Configuration');\n    var DEFAULT_ROUTER_FEATURENAME = 'router';\n    function _createRouterConfig(config) {\n        return __assign({ stateKey: DEFAULT_ROUTER_FEATURENAME, serializer: DefaultRouterStateSerializer, navigationActionTiming: exports.NavigationActionTiming.PreActivation }, config);\n    }\n    var RouterTrigger;\n    (function (RouterTrigger) {\n        RouterTrigger[RouterTrigger[\"NONE\"] = 1] = \"NONE\";\n        RouterTrigger[RouterTrigger[\"ROUTER\"] = 2] = \"ROUTER\";\n        RouterTrigger[RouterTrigger[\"STORE\"] = 3] = \"STORE\";\n    })(RouterTrigger || (RouterTrigger = {}));\n    var ɵ0 = {};\n    /**\n     * Connects RouterModule with StoreModule.\n     *\n     * During the navigation, before any guards or resolvers run, the router will dispatch\n     * a ROUTER_NAVIGATION action, which has the following signature:\n     *\n     * ```\n     * export type RouterNavigationPayload = {\n     *   routerState: SerializedRouterStateSnapshot,\n     *   event: RoutesRecognized\n     * }\n     * ```\n     *\n     * Either a reducer or an effect can be invoked in response to this action.\n     * If the invoked reducer throws, the navigation will be canceled.\n     *\n     * If navigation gets canceled because of a guard, a ROUTER_CANCEL action will be\n     * dispatched. If navigation results in an error, a ROUTER_ERROR action will be dispatched.\n     *\n     * Both ROUTER_CANCEL and ROUTER_ERROR contain the store state before the navigation\n     * which can be used to restore the consistency of the store.\n     *\n     * Usage:\n     *\n     * ```typescript\n     * @NgModule({\n     *   declarations: [AppCmp, SimpleCmp],\n     *   imports: [\n     *     BrowserModule,\n     *     StoreModule.forRoot(mapOfReducers),\n     *     RouterModule.forRoot([\n     *       { path: '', component: SimpleCmp },\n     *       { path: 'next', component: SimpleCmp }\n     *     ]),\n     *     StoreRouterConnectingModule\n     *   ],\n     *   bootstrap: [AppCmp]\n     * })\n     * export class AppModule {\n     * }\n     * ```\n     */\n    var StoreRouterConnectingModule = /** @class */ (function () {\n        function StoreRouterConnectingModule(store$$1, router$$1, serializer, errorHandler, config) {\n            this.store = store$$1;\n            this.router = router$$1;\n            this.serializer = serializer;\n            this.errorHandler = errorHandler;\n            this.config = config;\n            this.lastEvent = null;\n            this.trigger = RouterTrigger.NONE;\n            this.stateKey = this.config.stateKey;\n            this.setUpStoreStateListener();\n            this.setUpRouterEventsListener();\n        }\n        StoreRouterConnectingModule_1 = StoreRouterConnectingModule;\n        StoreRouterConnectingModule.forRoot = function (config) {\n            if (config === void 0) { config = {}; }\n            return {\n                ngModule: StoreRouterConnectingModule_1,\n                providers: [\n                    { provide: _ROUTER_CONFIG, useValue: config },\n                    {\n                        provide: RouterStateSerializer,\n                        useClass: config.serializer\n                            ? config.serializer\n                            : DefaultRouterStateSerializer,\n                    },\n                ],\n            };\n        };\n        StoreRouterConnectingModule.prototype.setUpStoreStateListener = function () {\n            var _this = this;\n            this.store\n                .pipe(store.select(this.stateKey), operators.withLatestFrom(this.store))\n                .subscribe(function (_a) {\n                var _b = __read(_a, 2), routerStoreState = _b[0], storeState = _b[1];\n                _this.navigateIfNeeded(routerStoreState, storeState);\n            });\n        };\n        StoreRouterConnectingModule.prototype.navigateIfNeeded = function (routerStoreState, storeState) {\n            var _this = this;\n            if (!routerStoreState || !routerStoreState.state) {\n                return;\n            }\n            if (this.trigger === RouterTrigger.ROUTER) {\n                return;\n            }\n            if (this.lastEvent instanceof router.NavigationStart) {\n                return;\n            }\n            var url = routerStoreState.state.url;\n            if (this.router.url !== url) {\n                this.storeState = storeState;\n                this.trigger = RouterTrigger.STORE;\n                this.router.navigateByUrl(url).catch(function (error) {\n                    _this.errorHandler.handleError(error);\n                });\n            }\n        };\n        StoreRouterConnectingModule.prototype.setUpRouterEventsListener = function () {\n            var _this = this;\n            var dispatchNavLate = this.config.navigationActionTiming ===\n                exports.NavigationActionTiming.PostActivation;\n            var routesRecognized;\n            this.router.events\n                .pipe(operators.withLatestFrom(this.store))\n                .subscribe(function (_a) {\n                var _b = __read(_a, 2), event = _b[0], storeState = _b[1];\n                _this.lastEvent = event;\n                if (event instanceof router.NavigationStart) {\n                    _this.routerState = _this.serializer.serialize(_this.router.routerState.snapshot);\n                    if (_this.trigger !== RouterTrigger.STORE) {\n                        _this.storeState = storeState;\n                        _this.dispatchRouterRequest(event);\n                    }\n                }\n                else if (event instanceof router.RoutesRecognized) {\n                    routesRecognized = event;\n                    if (!dispatchNavLate && _this.trigger !== RouterTrigger.STORE) {\n                        _this.dispatchRouterNavigation(event);\n                    }\n                }\n                else if (event instanceof router.NavigationCancel) {\n                    _this.dispatchRouterCancel(event);\n                    _this.reset();\n                }\n                else if (event instanceof router.NavigationError) {\n                    _this.dispatchRouterError(event);\n                    _this.reset();\n                }\n                else if (event instanceof router.NavigationEnd) {\n                    if (_this.trigger !== RouterTrigger.STORE) {\n                        if (dispatchNavLate) {\n                            _this.dispatchRouterNavigation(routesRecognized);\n                        }\n                        _this.dispatchRouterNavigated(event);\n                    }\n                    _this.reset();\n                }\n            });\n        };\n        StoreRouterConnectingModule.prototype.dispatchRouterRequest = function (event) {\n            this.dispatchRouterAction(ROUTER_REQUEST, { event: event });\n        };\n        StoreRouterConnectingModule.prototype.dispatchRouterNavigation = function (lastRoutesRecognized) {\n            var nextRouterState = this.serializer.serialize(lastRoutesRecognized.state);\n            this.dispatchRouterAction(ROUTER_NAVIGATION, {\n                routerState: nextRouterState,\n                event: new router.RoutesRecognized(lastRoutesRecognized.id, lastRoutesRecognized.url, lastRoutesRecognized.urlAfterRedirects, nextRouterState),\n            });\n        };\n        StoreRouterConnectingModule.prototype.dispatchRouterCancel = function (event) {\n            this.dispatchRouterAction(ROUTER_CANCEL, {\n                storeState: this.storeState,\n                event: event,\n            });\n        };\n        StoreRouterConnectingModule.prototype.dispatchRouterError = function (event) {\n            this.dispatchRouterAction(ROUTER_ERROR, {\n                storeState: this.storeState,\n                event: new router.NavigationError(event.id, event.url, \"\" + event),\n            });\n        };\n        StoreRouterConnectingModule.prototype.dispatchRouterNavigated = function (event) {\n            var routerState = this.serializer.serialize(this.router.routerState.snapshot);\n            this.dispatchRouterAction(ROUTER_NAVIGATED, { event: event, routerState: routerState });\n        };\n        StoreRouterConnectingModule.prototype.dispatchRouterAction = function (type, payload) {\n            this.trigger = RouterTrigger.ROUTER;\n            try {\n                this.store.dispatch({\n                    type: type,\n                    payload: __assign({ routerState: this.routerState }, payload),\n                });\n            }\n            finally {\n                this.trigger = RouterTrigger.NONE;\n            }\n        };\n        StoreRouterConnectingModule.prototype.reset = function () {\n            this.trigger = RouterTrigger.NONE;\n            this.storeState = null;\n            this.routerState = null;\n        };\n        var StoreRouterConnectingModule_1;\n        StoreRouterConnectingModule = StoreRouterConnectingModule_1 = __decorate([\n            core.NgModule({\n                providers: [\n                    {\n                        provide: _ROUTER_CONFIG,\n                        useValue: ɵ0,\n                    },\n                    {\n                        provide: ROUTER_CONFIG,\n                        useFactory: _createRouterConfig,\n                        deps: [_ROUTER_CONFIG],\n                    },\n                    {\n                        provide: RouterStateSerializer,\n                        useClass: DefaultRouterStateSerializer,\n                    },\n                ],\n            }),\n            __param(4, core.Inject(ROUTER_CONFIG)),\n            __metadata(\"design:paramtypes\", [store.Store,\n                router.Router,\n                RouterStateSerializer,\n                core.ErrorHandler, Object])\n        ], StoreRouterConnectingModule);\n        return StoreRouterConnectingModule;\n    }());\n\n    /**\n     * DO NOT EDIT\n     *\n     * This file is automatically generated at build\n     */\n\n    /**\n     * Generated bundle index. Do not edit.\n     */\n\n    exports.ɵngrx_modules_router_store_router_store_a = _ROUTER_CONFIG;\n    exports.ɵngrx_modules_router_store_router_store_b = _createRouterConfig;\n    exports.ROUTER_ERROR = ROUTER_ERROR;\n    exports.ROUTER_CANCEL = ROUTER_CANCEL;\n    exports.ROUTER_NAVIGATION = ROUTER_NAVIGATION;\n    exports.ROUTER_NAVIGATED = ROUTER_NAVIGATED;\n    exports.ROUTER_REQUEST = ROUTER_REQUEST;\n    exports.routerReducer = routerReducer;\n    exports.StoreRouterConnectingModule = StoreRouterConnectingModule;\n    exports.ROUTER_CONFIG = ROUTER_CONFIG;\n    exports.DEFAULT_ROUTER_FEATURENAME = DEFAULT_ROUTER_FEATURENAME;\n    exports.RouterStateSerializer = RouterStateSerializer;\n    exports.DefaultRouterStateSerializer = DefaultRouterStateSerializer;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=router-store.umd.js.map\n"]}